import{r as a,m as e,p as l,A as s,w as t,a as i,c as u,b as n,i as o,o as c,d,g as r,t as f,e as m,f as _,F as v,s as p,x as b}from"./index-vCkMVs31.js";import{_ as k}from"./uni-icons.Da4HOIOP.js";import{r as I}from"./uni-app.es.CgFsQHgy.js";import{a as h}from"./http.1boYmU1a.js";import{a as y}from"./home.B72pI0rK.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=g({__name:"abelAdmin",setup(g){const j=a(!1),x=e(),{labelList:L,userInfo:w}=x.state,C=a();l((async()=>{C.value=await y()}));const A=a(),D=s((()=>L.filter((a=>!A.value.includes(a._id)&&a._id)))),z=s((()=>L.filter((a=>A.value.includes(a._id)))));function F(){j.value&&async function(){let{message:a}=await(e={labelList:A.value,userId:w._id},h({name:"updateLableItem",data:e}));var e;b({title:a});const l=C.value.filter((a=>A.value.includes(a._id)));x.commit("setlabelListItem",l),await(a=>h({name:"setlabelListItem",data:a}))({showTable:l,userId:w._id}),x.commit("updateUserInfo",{...w,labelIds:A.value,labelListItem:l})}(),j.value=!j.value}return t((()=>w),((a,e)=>{A.value=a.labelIds}),{immediate:!0,deep:!0}),(a,e)=>{const l=o,s=I(i("uni-icons"),k);return c(),u(l,{class:"label-container"},{default:n((()=>[d(l,{class:"label-box"},{default:n((()=>[d(l,{class:"header"},{default:n((()=>[d(l,{class:"title"},{default:n((()=>[r(" 我的标签 ")])),_:1}),d(l,{class:"edit",onClick:F},{default:n((()=>[r(f(j.value?"完成":"编辑"),1)])),_:1})])),_:1}),d(l,{class:"label-content"},{default:n((()=>[z.value.length?(c(!0),m(v,{key:0},_(z.value,((a,e)=>(c(),u(l,{class:"content-title-item",key:a._id},{default:n((()=>[r(f(a.name)+" ",1),j.value?(c(),u(s,{key:0,onClick:e=>function(a){j.value&&(A.value=A.value.filter((e=>e!==a._id)))}(a),class:"inco-close",type:"clear",size:"20",color:"red"},null,8,["onClick"])):p("",!0)])),_:2},1024)))),128)):p("",!0),z.value.length?p("",!0):(c(),u(l,{key:1,class:"noData"},{default:n((()=>[r(" 当前没有数据 ")])),_:1}))])),_:1})])),_:1}),d(l,{class:"label-box"},{default:n((()=>[d(l,{class:"header"},{default:n((()=>[d(l,{class:"title"},{default:n((()=>[r(" 标签推荐 ")])),_:1})])),_:1}),d(l,{class:"label-content"},{default:n((()=>[(c(!0),m(v,null,_(D.value,((a,e)=>(c(),u(l,{class:"content-title-item",onClick:e=>function(a){j.value&&A.value.push(a._id)}(a),key:a._id},{default:n((()=>[r(f(a.name),1)])),_:2},1032,["onClick"])))),128)),!D.value.length>0?(c(),u(l,{key:0,class:"noData"},{default:n((()=>[r(" 当前没有数据 ")])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-663f99fd"]]);export{j as default};
