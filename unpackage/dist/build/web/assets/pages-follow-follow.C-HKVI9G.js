import{_ as a,o as t,c as s,d as l,e,f as o,F as u,g as r,h as i,t as c,v as n,j as d,S as f,p as _,r as v,$ as m,q as p,a as h,b as w,n as L,x as g,l as b,m as j}from"./index-VArvefSN.js";import{L as y}from"./ListItem.v_jmnuVf.js";import{u as I}from"./isLogin.i1xWMhdH.js";import{a as k}from"./http.BhNkKofT.js";import"./listCard.CwASfMd0.js";import"./love.DBCKzdbg.js";import"./uni-icons.BPusHlUG.js";import"./uni-load-more.Bc3nc4_m.js";const x=a({__name:"AuthorList",props:{authorList:Array},setup(a){const _=a;return(a,v)=>{const m=n,p=d,h=f;return t(),s(p,{class:"list-scroll-container"},{default:l((()=>[e(h,{"scroll-y":"true",class:"list-scroll"},{default:l((()=>[(t(!0),o(u,null,r(_.authorList,((a,o)=>(t(),s(p,{class:"author-card",key:a._id},{default:l((()=>[e(p,{class:"author-image-container"},{default:l((()=>[e(m,{src:a.avatar?a.avatar:"../../static/img/info.jpg",alt:""},null,8,["src"])])),_:2},1024),e(p,{class:"author-desc-container"},{default:l((()=>[e(p,{class:"author-info"},{default:l((()=>[i(c(a.author_name),1)])),_:2},1024),e(p,{class:"author-info-bottom"},{default:l((()=>[e(p,{class:"info-left"},{default:l((()=>[i(c(a.professional),1)])),_:2},1024),e(p,{class:"info-right"},{default:l((()=>[e(p,{class:"desc"},{default:l((()=>[i(" 发帖:"+c(a.article_ids.length),1)])),_:2},1024),e(p,{class:"desc"},{default:l((()=>[i(" 粉丝："+c(a.fans_count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}}},[["__scopeId","data-v-b9b8639c"]]),A=a({__name:"follow",setup(a){const{checkLogin:o}=I(),u=_(),r=v([]),c=v(!0),n=v(!1),f=v(!1),A=v(0),C=v([]);async function F(){const a=await(t={userId:u.state.userInfo._id},k({name:"getArticFloow",data:t}));var t;0==a.length&&(n.value=!0),c.value=!1,r.value=a}async function M(){const a=await(t={userId:u.state.userInfo._id},k({name:"getAuthorLists",data:t}));var t;0==a.length&&(f.value=!0),C.value=a}return m("updateArticle",(()=>{F()})),m("updatefellow",(()=>{M()})),p((async()=>{await o(),await F(),await M()})),(a,o)=>{const u=d,_=h(w("ListItem"),y),v=b,m=j;return t(),s(u,{class:"follow-container"},{default:l((()=>[e(u,{class:"follow-tab"},{default:l((()=>[e(u,{class:"follow-tab-box"},{default:l((()=>[e(u,{class:L(["follow-tab-item",{active:0===A.value}]),onClick:o[0]||(o[0]=a=>A.value=0)},{default:l((()=>[i("文章")])),_:1},8,["class"]),e(u,{class:L(["follow-tab-item",{active:1===A.value}]),onClick:o[1]||(o[1]=a=>A.value=1)},{default:l((()=>[i("作者")])),_:1},8,["class"])])),_:1})])),_:1}),e(u,{class:"follow-list-container"},{default:l((()=>[e(m,{class:"follow-list-swiper",current:A.value,onChange:o[2]||(o[2]=a=>A.value=a.detail.current)},{default:l((()=>[e(v,null,{default:l((()=>[r.value.length?(t(),s(_,{key:0,isLoadMore:c.value,articleList:r.value},null,8,["isLoadMore","articleList"])):g("",!0),n.value?(t(),s(u,{key:1,class:"no-data"},{default:l((()=>[i("暂无收藏的文章")])),_:1})):g("",!0)])),_:1}),e(v,null,{default:l((()=>[e(x,{authorList:C.value},null,8,["authorList"]),f.value?(t(),s(u,{key:0,class:"no-data"},{default:l((()=>[i("暂无收藏的文章")])),_:1})):g("",!0)])),_:1})])),_:1},8,["current"])])),_:1})])),_:1})}}},[["__scopeId","data-v-c77b60d3"]]);export{A as default};
