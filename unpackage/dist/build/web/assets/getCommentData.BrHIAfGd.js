import{_ as e,r as t,w as a,a as o,a6 as s,b as n,o as r,c as l,d as m,e as c,h as u,t as d,j as h,a7 as i,A as f,T as p,f as y,F as _,g,v as M}from"./index-VArvefSN.js";import{a as D}from"./http.BhNkKofT.js";const v=e({__name:"CommentMasker",props:["isshow"],emits:["closeShow","sendDataComent"],setup(e,{emit:f}){const p=t(),y=e,_=f,g=t();function M(){_("closeShow")}async function D(){""!=g.value&&(_("sendDataComent",g.value),g.value="")}return a((()=>y.isshow),(e=>{e?p.value.open():p.value.close()})),(e,t)=>{const a=h,f=i,y=o(n("uni-popup"),s);return r(),l(y,{ref_key:"popup",ref:p,"mask-click":!1,type:"bottom"},{default:m((()=>[c(a,{class:"poput-wrapper"},{default:m((()=>[c(a,{class:"header"},{default:m((()=>[c(a,{class:"popItem",onClick:M},{default:m((()=>[u(" 取消 ")])),_:1}),c(a,{class:"popItem",onClick:D},{default:m((()=>[u(" 发布 ")])),_:1})])),_:1}),c(a,{class:"popContent"},{default:m((()=>[c(f,{class:"popup-content-textarea",modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),modelModifiers:{trim:!0},placeholder:"请输入内容",maxlength:"200"},null,8,["modelValue"]),c(a,{class:"popup-content-count"},{default:m((()=>{var e,t;return[u(d(200-((null==(e=g.value)?void 0:e.length)?null==(t=g.value)?void 0:t.length:0)),1)]})),_:1})])),_:1})])),_:1})])),_:1},512)}}},[["__scopeId","data-v-33cbe236"]]);function S(e,t=2){for(e+="";e.length<t;)e="0"+e;return e.slice(-t)}const k={yyyy:e=>S(e.year,4),yy:e=>S(e.year),MM:e=>S(e.month),M:e=>e.month,dd:e=>S(e.day),d:e=>e.day,hh:e=>S(e.hour),h:e=>e.hour,mm:e=>S(e.minute),m:e=>e.minute,ss:e=>S(e.second),s:e=>e.second,SSS:e=>S(e.millisecond,3),S:e=>e.millisecond};function w(e){return e instanceof Date?e:"string"==typeof e?e.indexOf("T")>-1?new Date(e):new Date(e.replace(/-/g,"/")):new Date(e)}function b(e,{locale:t="zh",threshold:a=[6e4,36e5],format:o="yyyy/MM/dd hh:mm:ss"}){if("-"===e)return e;if(!e&&0!==e)return"";const s={zh:{year:"年",month:"月",day:"天",hour:"小时",minute:"分钟",second:"秒",ago:"前",later:"后",justNow:"刚刚",soon:"马上",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},n=s[t]||s.zh;let r,l,m=w(e),c=m.getTime()-Date.now(),u=Math.abs(c);if(u<a[0])return c<0?n.justNow:n.soon;if(u>=a[1])return function(e,t="yyyy/MM/dd hh:mm:ss"){if(!e&&0!==e)return"";const a={year:(e=w(e)).getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()},o=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/;let s=!0,n=t;for(;s;)s=!1,n=n.replace(o,(function(e){return s=!0,k[e](a)}));return n}(m,o);let d=n.later;c<0&&(d=n.ago,c=-c);const h=Math.floor(c/1e3),i=Math.floor(h/60),f=Math.floor(i/60),p=Math.floor(f/24),y=Math.floor(p/30),_=Math.floor(y/12);switch(!0){case _>0:r=_,l=n.year;break;case y>0:r=y,l=n.month;break;case p>0:r=p,l=n.day;break;case f>0:r=f,l=n.hour;break;case i>0:r=i,l=n.minute;break;default:r=h,l=n.second}return"en"===t&&(1===r?r="a":l+="s"),n.template.replace(/{\s*num\s*}/g,r+"").replace(/{\s*unit\s*}/g,l).replace(/{\s*suffix\s*}/g,d)}const R=e({name:"uniDateformat",props:{date:{type:[Object,String,Number],default:()=>"-"},locale:{type:String,default:"zh"},threshold:{type:Array,default:()=>[0,0]},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data:()=>({refreshMark:0}),computed:{dateShow(){return this.refreshMark,b(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler(){this.setAutoRefresh()},immediate:!0}},methods:{refresh(){this.refreshMark++},setAutoRefresh(){clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval((()=>{this.refresh()}),parseInt(this.refreshRate)))}}},[["render",function(e,t,a,o,s,n){const c=f;return r(),l(c,null,{default:m((()=>[u(d(n.dateShow),1)])),_:1})}]]),x=e({__name:"commentBox",props:{commentData:{type:Object,default:()=>({})},isRepaly:{type:Boolean,default:!1}},emits:["repalyComment"],setup(e,{emit:t}){const a=t,s=e;function i(e){console.log(e,"sss"),e.isRepaly&&(e.comment.repaly_id=e.comment.comment_id,e.comment.comment_id=s.commentData.comment_id),a("repalyComment",e)}return(t,a)=>{const D=M,v=h,S=f,k=o(n("uni-dateformat"),R),w=p("commentBox",!0);return r(),l(v,{class:"comment-box"},{default:m((()=>[c(v,{class:"comment-header"},{default:m((()=>[c(v,{class:"comment-header-logo"},{default:m((()=>[c(D,{src:s.commentData.author.avatar,mode:"aspectFill"},null,8,["src"])])),_:1}),c(v,{class:"comment-header-info"},{default:m((()=>[s.commentData.isRepaly?(r(),l(v,{key:1,class:"title"},{default:m((()=>[u(d(s.commentData.author.author_name)+" ",1),c(S,{class:"reply-text"},{default:m((()=>[u(" 回复 ")])),_:1}),u(" "+d(s.commentData.to),1)])),_:1})):(r(),l(v,{key:0,class:"title"},{default:m((()=>[u(d(s.commentData.author.author_name),1)])),_:1})),c(v,{class:""},{default:m((()=>[c(k,{date:s.commentData.createTime,format:"yyyy-MM-dd hh:mm:ss"},null,8,["date"])])),_:1})])),_:1})])),_:1}),c(v,{class:"comment-content"},{default:m((()=>[c(v,{class:""},{default:m((()=>[u(d(s.commentData.content),1)])),_:1}),c(v,{class:"comment-info"},{default:m((()=>[c(v,{class:"comment-button",onClick:a[0]||(a[0]=t=>i({comment:e.commentData,isRepaly:e.isRepaly}))},{default:m((()=>[u(" 回复 ")])),_:1})])),_:1}),(r(!0),y(_,null,g(s.commentData.replay,(e=>(r(),l(v,{class:"repaly-comment",key:e.comment_id},{default:m((()=>[c(w,{isRepaly:!0,commentData:e,onRepalyComment:i},null,8,["commentData"])])),_:2},1024)))),128))])),_:1})])),_:1})}}},[["__scopeId","data-v-27e07ae8"]]),C=e=>D({name:"updateComent",data:e}),j=e=>D({name:"getCommentData",data:e});export{v as _,x as c,j as g,C as u};
