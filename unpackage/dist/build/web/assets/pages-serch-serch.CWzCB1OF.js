import{_ as a,r as s,p as e,c as t,d as l,j as r,o,e as i,h as c,u as n,f as u,g as d,t as h,F as m,A as v}from"./index-VArvefSN.js";import{N as f}from"./NavBar.W16ljO67.js";import{L as _}from"./ListItem.v_jmnuVf.js";import{a as y}from"./http.BhNkKofT.js";import"./uni-icons.BPusHlUG.js";import"./listCard.CwASfMd0.js";import"./love.DBCKzdbg.js";import"./isLogin.i1xWMhdH.js";import"./uni-load-more.Bc3nc4_m.js";const p=a({__name:"serch",setup(a){const p=s(!0),L=s(""),j=s([]),k=s(!1),g=s(!0),C=e();function S(){console.log(L.value,"asdasd"),C.commit("setHistoryList",L.value)}function x(a){L.value=a}async function V(){if(g.value=!1,!L.value)return g.value=!0,void(j.value=[]);const{articleList:a}=await(s={searchVal:L.value},y({name:"get_search_data",data:s}));var s;j.value=a}return(a,s)=>{const e=v,y=r;return o(),t(y,{class:"search-container"},{default:l((()=>[i(f,{isSearch:p.value,onSendSearchData:V,onUpdateValue:x,serchValue:L.value},null,8,["isSearch","serchValue"]),g.value?(o(),t(y,{key:0,class:"serch-history"},{default:l((()=>[i(y,{class:"serch-container"},{default:l((()=>[i(y,{class:"serach-header"},{default:l((()=>[i(e,{class:"history-text"},{default:l((()=>[c("搜索历史")])),_:1}),i(e,{class:"clear",onClick:s[0]||(s[0]=a=>n(C).commit("clearData"))},{default:l((()=>[c("清空")])),_:1})])),_:1})])),_:1}),n(C).state.historyList.length>0?(o(),t(y,{key:0,class:"serch-list"},{default:l((()=>[(o(!0),u(m,null,d(n(C).state.historyList,((a,s)=>(o(),t(y,{onClick:s=>(x(a),void V()),class:"history-content-item",key:a},{default:l((()=>[c(h(a),1)])),_:2},1032,["onClick"])))),128))])),_:1})):(o(),t(y,{key:1,class:"no-data"},{default:l((()=>[c(" 当前没有搜索历史 ")])),_:1}))])),_:1})):(o(),t(y,{key:1,class:"serach-list-container"},{default:l((()=>[j.value.length>=0?(o(),t(_,{key:0,articleList:j.value,saveSearchHistory:S,isLoadMore:k.value},null,8,["articleList","isLoadMore"])):(o(),t(y,{key:1,class:"no-data"},{default:l((()=>[c(" 没有搜索到数据 ")])),_:1}))])),_:1}))])),_:1})}}},[["__scopeId","data-v-39e2c910"]]);export{p as default};
