import{o as a,c as s,b as t,d as l,e,F as o,f as u,g as r,t as i,q as n,i as c,S as d,m as f,r as _,$ as m,a as p,n as v,s as h,k as w,l as g}from"./index-vCkMVs31.js";import{L}from"./ListItem.CCoqZfW1.js";import{o as j,r as b}from"./uni-app.es.CgFsQHgy.js";import{u as y}from"./isLogin.NjHcPaSZ.js";import{a as k}from"./http.1boYmU1a.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./listCard.n-MBBEQ8.js";import"./love.BWBFgmRW.js";import"./uni-icons.Da4HOIOP.js";import"./uni-load-more.BY3nG2Si.js";const A=I({__name:"AuthorList",props:{authorList:Array},setup(f){const _=f;return(f,m)=>{const p=n,v=c,h=d;return a(),s(v,{class:"list-scroll-container"},{default:t((()=>[l(h,{"scroll-y":"true",class:"list-scroll"},{default:t((()=>[(a(!0),e(o,null,u(_.authorList,((e,o)=>(a(),s(v,{class:"author-card",key:e._id},{default:t((()=>[l(v,{class:"author-image-container"},{default:t((()=>[l(p,{src:e.avatar?e.avatar:"../../static/img/info.jpg",alt:""},null,8,["src"])])),_:2},1024),l(v,{class:"author-desc-container"},{default:t((()=>[l(v,{class:"author-info"},{default:t((()=>[r(i(e.author_name),1)])),_:2},1024),l(v,{class:"author-info-bottom"},{default:t((()=>[l(v,{class:"info-left"},{default:t((()=>[r(i(e.professional),1)])),_:2},1024),l(v,{class:"info-right"},{default:t((()=>[l(v,{class:"desc"},{default:t((()=>[r(" 发帖:"+i(e.article_ids.length),1)])),_:2},1024),l(v,{class:"desc"},{default:t((()=>[r(" 粉丝："+i(e.fans_count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}}},[["__scopeId","data-v-b9b8639c"]]),x=I({__name:"follow",setup(e){const{checkLogin:o}=y(),u=f(),i=_([]),n=_(!0),d=_(!1),I=_(!1),x=_(0),C=_([]);async function q(){const a=await(s={userId:u.state.userInfo._id},k({name:"getArticFloow",data:s}));var s;0==a.length&&(d.value=!0),n.value=!1,i.value=a}async function F(){const a=await(s={userId:u.state.userInfo._id},k({name:"getAuthorLists",data:s}));var s;0==a.length&&(I.value=!0),C.value=a}return m("updateArticle",(()=>{q()})),m("updatefellow",(()=>{F()})),j((async()=>{await o(),await q(),await F()})),(e,o)=>{const u=c,f=b(p("ListItem"),L),_=w,m=g;return a(),s(u,{class:"follow-container"},{default:t((()=>[l(u,{class:"follow-tab"},{default:t((()=>[l(u,{class:"follow-tab-box"},{default:t((()=>[l(u,{class:v(["follow-tab-item",{active:0===x.value}]),onClick:o[0]||(o[0]=a=>x.value=0)},{default:t((()=>[r("文章")])),_:1},8,["class"]),l(u,{class:v(["follow-tab-item",{active:1===x.value}]),onClick:o[1]||(o[1]=a=>x.value=1)},{default:t((()=>[r("作者")])),_:1},8,["class"])])),_:1})])),_:1}),l(u,{class:"follow-list-container"},{default:t((()=>[l(m,{class:"follow-list-swiper",current:x.value,onChange:o[2]||(o[2]=a=>x.value=a.detail.current)},{default:t((()=>[l(_,null,{default:t((()=>[i.value.length?(a(),s(f,{key:0,isLoadMore:n.value,articleList:i.value},null,8,["isLoadMore","articleList"])):h("",!0),d.value?(a(),s(u,{key:1,class:"no-data"},{default:t((()=>[r("暂无收藏的文章")])),_:1})):h("",!0)])),_:1}),l(_,null,{default:t((()=>[l(A,{authorList:C.value},null,8,["authorList"]),I.value?(a(),s(u,{key:0,class:"no-data"},{default:t((()=>[r("暂无收藏的文章")])),_:1})):h("",!0)])),_:1})])),_:1},8,["current"])])),_:1})])),_:1})}}},[["__scopeId","data-v-c77b60d3"]]);export{x as default};
