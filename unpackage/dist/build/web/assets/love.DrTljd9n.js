import{r as a,m as s,p as e,B as t,a as i,o,c as n,b as r,d as c,a0 as l,x as u,i as p}from"./index-DwdDHTgs.js";import{_ as m}from"./uni-icons.DL8JbnSX.js";import{a as d,r as f}from"./uni-app.es.DtYEfKEf.js";import{u as v}from"./isLogin.D9YIoZAy.js";const _={__name:"love",props:["itemId"],emits:["updateArticle"],setup(_,{emit:I}){const{checkLogin:y}=v();let{itemId:g}=_;const h=a(),j=s();e((async()=>{h.value=await y()}));const k=t((()=>h.value&&h.value.article_likes_ids.includes(g)));async function w(a){a.stopPropagation();try{let a=await y();const{msg:e,newUserInfo:t}=await(s={articleId:g,userId:a._id},d({name:"updateLike",data:s}));h.value=t,l("updateArticle"),j.commit("updateUserInfo",t),u({title:e,icon:"success"})}catch(e){}var s}return(a,s)=>{const e=f(i("uni-icons"),m),t=p;return o(),n(t,{class:"love",onClick:s[0]||(s[0]=a=>w(a))},{default:r((()=>[c(e,{type:k.value?"heart-filled":"heart",color:"$ff6600",size:"24"},null,8,["type"])])),_:1})}}};export{_};
