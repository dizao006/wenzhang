import{r as a,m as e,p as l,B as s,w as t,a as i,c as u,b as n,i as c,o as d,d as o,g as f,t as r,e as _,f as m,F as v,s as b,x as p}from"./index-DwdDHTgs.js";import{_ as k}from"./uni-icons.DL8JbnSX.js";import{a as I,_ as h,r as y}from"./uni-app.es.DtYEfKEf.js";import{a as L}from"./home.DDCdm6RB.js";const g=h({__name:"abelAdmin",setup(h){const g=a(!1),w=e(),{labelList:x,userInfo:C}=w.state,j=a();l((async()=>{j.value=await L()}));const D=a(),z=s((()=>x.filter((a=>!D.value.includes(a._id)&&a._id)))),A=s((()=>x.filter((a=>D.value.includes(a._id)))));function B(){g.value&&async function(){let{message:a}=await(e={labelList:D.value,userId:C._id},I({name:"updateLableItem",data:e}));var e;p({title:a});const l=j.value.filter((a=>D.value.includes(a._id)));w.commit("setlabelListItem",l),await(a=>I({name:"setlabelListItem",data:a}))({showTable:l,userId:C._id}),w.commit("updateUserInfo",{...C,labelIds:D.value,labelListItem:l})}(),g.value=!g.value}return t((()=>C),((a,e)=>{D.value=a.labelIds}),{immediate:!0,deep:!0}),(a,e)=>{const l=c,s=y(i("uni-icons"),k);return d(),u(l,{class:"label-container"},{default:n((()=>[o(l,{class:"label-box"},{default:n((()=>[o(l,{class:"header"},{default:n((()=>[o(l,{class:"title"},{default:n((()=>[f(" 我的标签 ")])),_:1}),o(l,{class:"edit",onClick:B},{default:n((()=>[f(r(g.value?"完成":"编辑"),1)])),_:1})])),_:1}),o(l,{class:"label-content"},{default:n((()=>[A.value.length?(d(!0),_(v,{key:0},m(A.value,((a,e)=>(d(),u(l,{class:"content-title-item",key:a._id},{default:n((()=>[f(r(a.name)+" ",1),g.value?(d(),u(s,{key:0,onClick:e=>function(a){g.value&&(D.value=D.value.filter((e=>e!==a._id)))}(a),class:"inco-close",type:"clear",size:"20",color:"red"},null,8,["onClick"])):b("",!0)])),_:2},1024)))),128)):b("",!0),A.value.length?b("",!0):(d(),u(l,{key:1,class:"noData"},{default:n((()=>[f(" 当前没有数据 ")])),_:1}))])),_:1})])),_:1}),o(l,{class:"label-box"},{default:n((()=>[o(l,{class:"header"},{default:n((()=>[o(l,{class:"title"},{default:n((()=>[f(" 标签推荐 ")])),_:1})])),_:1}),o(l,{class:"label-content"},{default:n((()=>[(d(!0),_(v,null,m(z.value,((a,e)=>(d(),u(l,{class:"content-title-item",onClick:e=>function(a){g.value&&D.value.push(a._id)}(a),key:a._id},{default:n((()=>[f(r(a.name),1)])),_:2},1032,["onClick"])))),128)),!z.value.length>0?(d(),u(l,{key:0,class:"noData"},{default:n((()=>[f(" 当前没有数据 ")])),_:1})):b("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-663f99fd"]]);export{g as default};
