import{_ as e,p as s,z as a,G as t,c as d,d as r,j as l,o,e as n,h as w,t as i,n as h,A as u,I as c,N as f,B as _}from"./index-VArvefSN.js";import{a as m}from"./http.BhNkKofT.js";const p=e({name:"changePwd",data:()=>({errShow:!1,errMsg:"错误",newPwd:"",newPwds:"",store:s()}),methods:{showErr(e){this.errShow=!0,this.errMsg=e,setTimeout((()=>{this.errShow=!1}),2e3)},async confirm(){if(!/^[0-9a-zA-Z_]{1,}$/.test(this.newPwd))return void this.showErr("密码长度6-12位，可以由字母数字_构成");if(this.newPwd!==this.newPwds)return void this.showErr("两次输入密码不一致，请重新输入");if(this.newPwd.length<6||this.newPwd.length>12)return void this.showErr("密码长度为6~12位！");let e=await(s={pwd:this.newPwd,id:this.store.state.userInfo._id},m({name:"updatePwd",data:s}));var s;0==e.code&&a({title:e.msg,icon:"success"}),this.store.commit("updateUserInfo",e.result),t({url:"/pages/self/self"})}}},[["render",function(e,s,a,t,m,p){const P=u,g=c,V=l,v=f,S=_;return o(),d(V,{class:"changePwd"},{default:r((()=>[n(P,{class:"changePwd_title"},{default:r((()=>[w("设置新密码")])),_:1}),n(v,null,{default:r((()=>[n(V,{class:"changePwd_form_wrap"},{default:r((()=>[n(P,null,{default:r((()=>[w("新密码：")])),_:1}),n(g,{type:"password",placeholder:"请设置新密码",modelValue:m.newPwd,"onUpdate:modelValue":s[0]||(s[0]=e=>m.newPwd=e)},null,8,["modelValue"])])),_:1}),n(V,{class:"changePwd_form_wrap"},{default:r((()=>[n(P,null,{default:r((()=>[w("确认密码：")])),_:1}),n(g,{type:"password",placeholder:"请再次输入新密码",modelValue:m.newPwds,"onUpdate:modelValue":s[1]||(s[1]=e=>m.newPwds=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(P,{class:"tips"},{default:r((()=>[w("密码长度6-12位，由字母数字_构成")])),_:1}),n(V,{class:"btn"},{default:r((()=>[n(S,{onClick:p.confirm},{default:r((()=>[w("确定")])),_:1},8,["onClick"])])),_:1}),n(V,{class:h(["err",m.errShow?"errShow":"err"])},{default:r((()=>[w(i(m.errMsg),1)])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-ae52dd58"]]);export{p as default};
