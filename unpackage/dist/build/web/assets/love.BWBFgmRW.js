import{r as a,m as s,p as t,A as e,a as i,o,c as n,b as r,d as c,O as l,x as u,i as m}from"./index-vCkMVs31.js";import{_ as p}from"./uni-icons.Da4HOIOP.js";import{r as d}from"./uni-app.es.CgFsQHgy.js";import{u as f}from"./isLogin.NjHcPaSZ.js";import{a as v}from"./http.1boYmU1a.js";const _={__name:"love",props:["itemId"],emits:["updateArticle"],setup(_,{emit:I}){const{checkLogin:h}=f();let{itemId:j}=_;const y=a(),g=s();t((async()=>{y.value=await h()}));const k=e((()=>y.value&&y.value.article_likes_ids.includes(j)));async function w(a){a.stopPropagation();try{let a=await h();const{msg:t,newUserInfo:e}=await(s={articleId:j,userId:a._id},v({name:"updateLike",data:s}));y.value=e,l("updateArticle"),g.commit("updateUserInfo",e),u({title:t,icon:"success"})}catch(t){}var s}return(a,s)=>{const t=d(i("uni-icons"),p),e=m;return o(),n(e,{class:"love",onClick:s[0]||(s[0]=a=>w(a))},{default:r((()=>[c(t,{type:k.value?"heart-filled":"heart",color:"$ff6600",size:"24"},null,8,["type"])])),_:1})}}};export{_};
