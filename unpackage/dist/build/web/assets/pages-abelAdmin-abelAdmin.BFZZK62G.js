import{_ as a,r as e,p as l,s,D as t,w as i,a as u,b as n,c,d,j as o,o as f,e as _,h as r,t as m,f as v,g as b,x as p,F as k,z as I}from"./index-VArvefSN.js";import{_ as h}from"./uni-icons.BPusHlUG.js";import{a as y}from"./http.BhNkKofT.js";import{a as x}from"./home.Bf2Mbiut.js";const L=a({__name:"abelAdmin",setup(a){const L=e(!1),g=l(),{labelList:j,userInfo:w}=g.state,C=e();s((async()=>{C.value=await x()}));const D=e(),z=t((()=>j.filter((a=>!D.value.includes(a._id)&&a._id)))),A=t((()=>j.filter((a=>D.value.includes(a._id)))));function F(){L.value&&async function(){let{message:a}=await(e={labelList:D.value,userId:w._id},y({name:"updateLableItem",data:e}));var e;I({title:a});const l=C.value.filter((a=>D.value.includes(a._id)));g.commit("setlabelListItem",l),await(a=>y({name:"setlabelListItem",data:a}))({showTable:l,userId:w._id}),g.commit("updateUserInfo",{...w,labelIds:D.value,labelListItem:l})}(),L.value=!L.value}return i((()=>w),((a,e)=>{D.value=a.labelIds}),{immediate:!0,deep:!0}),(a,e)=>{const l=o,s=u(n("uni-icons"),h);return f(),c(l,{class:"label-container"},{default:d((()=>[_(l,{class:"label-box"},{default:d((()=>[_(l,{class:"header"},{default:d((()=>[_(l,{class:"title"},{default:d((()=>[r(" 我的标签 ")])),_:1}),_(l,{class:"edit",onClick:F},{default:d((()=>[r(m(L.value?"完成":"编辑"),1)])),_:1})])),_:1}),_(l,{class:"label-content"},{default:d((()=>[A.value.length?(f(!0),v(k,{key:0},b(A.value,((a,e)=>(f(),c(l,{class:"content-title-item",key:a._id},{default:d((()=>[r(m(a.name)+" ",1),L.value?(f(),c(s,{key:0,onClick:e=>function(a){L.value&&(D.value=D.value.filter((e=>e!==a._id)))}(a),class:"inco-close",type:"clear",size:"20",color:"red"},null,8,["onClick"])):p("",!0)])),_:2},1024)))),128)):p("",!0),A.value.length?p("",!0):(f(),c(l,{key:1,class:"noData"},{default:d((()=>[r(" 当前没有数据 ")])),_:1}))])),_:1})])),_:1}),_(l,{class:"label-box"},{default:d((()=>[_(l,{class:"header"},{default:d((()=>[_(l,{class:"title"},{default:d((()=>[r(" 标签推荐 ")])),_:1})])),_:1}),_(l,{class:"label-content"},{default:d((()=>[(f(!0),v(k,null,b(z.value,((a,e)=>(f(),c(l,{class:"content-title-item",onClick:e=>function(a){L.value&&D.value.push(a._id)}(a),key:a._id},{default:d((()=>[r(m(a.name),1)])),_:2},1032,["onClick"])))),128)),!z.value.length>0?(f(),c(l,{key:0,class:"noData"},{default:d((()=>[r(" 当前没有数据 ")])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-663f99fd"]]);export{L as default};
