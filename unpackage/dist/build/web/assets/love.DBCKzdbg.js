import{r as a,p as s,s as t,D as e,a as i,b as o,o as n,c,d as r,e as l,a3 as u,z as p,j as m}from"./index-VArvefSN.js";import{_ as d}from"./uni-icons.BPusHlUG.js";import{u as f}from"./isLogin.i1xWMhdH.js";import{a as v}from"./http.BhNkKofT.js";const _={__name:"love",props:["itemId"],emits:["updateArticle"],setup(_,{emit:y}){const{checkLogin:I}=f();let{itemId:h}=_;const j=a(),g=s();t((async()=>{j.value=await I()}));const k=e((()=>j.value&&j.value.article_likes_ids.includes(h)));async function w(a){a.stopPropagation();try{let a=await I();const{msg:t,newUserInfo:e}=await(s={articleId:h,userId:a._id},v({name:"updateLike",data:s}));j.value=e,u("updateArticle"),g.commit("updateUserInfo",e),p({title:t,icon:"success"})}catch(t){}var s}return(a,s)=>{const t=i(o("uni-icons"),d),e=m;return n(),c(e,{class:"love",onClick:s[0]||(s[0]=a=>w(a))},{default:r((()=>[l(t,{type:k.value?"heart-filled":"heart",color:"$ff6600",size:"24"},null,8,["type"])])),_:1})}}};export{_};
