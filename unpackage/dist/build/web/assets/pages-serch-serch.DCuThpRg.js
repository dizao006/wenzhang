import{r as a,m as s,c as e,b as t,i as l,o as r,d as o,g as i,u as c,e as u,f as n,t as d,F as m,y as h}from"./index-hP099HiM.js";import{N as v}from"./NavBar.WQYfROK4.js";import{L as f}from"./ListItem.C9osZamG.js";import{a as p}from"./http.CnX7aEgl.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.CrfVb6lZ.js";import"./uni-app.es.NZ0FsMzr.js";import"./listCard.dIuwNhB1.js";import"./love.CX3XWWW3.js";import"./isLogin.B444u07p.js";import"./uni-load-more.G-kRHN8T.js";const y=_({__name:"serch",setup(_){const y=a(!0),j=a(""),L=a([]),k=a(!1),g=a(!0),S=s();function x(){console.log(j.value,"asdasd"),S.commit("setHistoryList",j.value)}function C(a){j.value=a}async function V(){if(g.value=!1,!j.value)return g.value=!0,void(L.value=[]);const{articleList:a}=await(s={searchVal:j.value},p({name:"get_search_data",data:s}));var s;L.value=a}return(a,s)=>{const p=h,_=l;return r(),e(_,{class:"search-container"},{default:t((()=>[o(v,{isSearch:y.value,onSendSearchData:V,onUpdateValue:C,serchValue:j.value},null,8,["isSearch","serchValue"]),g.value?(r(),e(_,{key:0,class:"serch-history"},{default:t((()=>[o(_,{class:"serch-container"},{default:t((()=>[o(_,{class:"serach-header"},{default:t((()=>[o(p,{class:"history-text"},{default:t((()=>[i("搜索历史")])),_:1}),o(p,{class:"clear",onClick:s[0]||(s[0]=a=>c(S).commit("clearData"))},{default:t((()=>[i("清空")])),_:1})])),_:1})])),_:1}),c(S).state.historyList.length>0?(r(),e(_,{key:0,class:"serch-list"},{default:t((()=>[(r(!0),u(m,null,n(c(S).state.historyList,((a,s)=>(r(),e(_,{onClick:s=>(C(a),void V()),class:"history-content-item",key:a},{default:t((()=>[i(d(a),1)])),_:2},1032,["onClick"])))),128))])),_:1})):(r(),e(_,{key:1,class:"no-data"},{default:t((()=>[i(" 当前没有搜索历史 ")])),_:1}))])),_:1})):(r(),e(_,{key:1,class:"serach-list-container"},{default:t((()=>[L.value.length>=0?(r(),e(f,{key:0,articleList:L.value,saveSearchHistory:x,isLoadMore:k.value},null,8,["articleList","isLoadMore"])):(r(),e(_,{key:1,class:"no-data"},{default:t((()=>[i(" 没有搜索到数据 ")])),_:1}))])),_:1}))])),_:1})}}},[["__scopeId","data-v-39e2c910"]]);export{y as default};
