import{r as a,m as e,a as t,e as s,u as l,c as o,b as n,s as c,d as i,F as u,i as r,o as f,g as d,t as m,h as _,v as p,Y as y,x as h,q as g,y as I,z as k}from"./index-DwdDHTgs.js";import{_ as w}from"./uni-icons.DL8JbnSX.js";import{a as F,_ as b,o as v,r as x}from"./uni-app.es.DtYEfKEf.js";const C=b({__name:"self",setup(b){a("1.0.0"),a(!1);const C=e();function z(){_({url:"/pages/userinfo/login/login"})}function L(){C.commit("updateUserInfo",null),_({url:"/pages/index/index"})}function U(){_({url:"/pages/myArticle/myArticle"})}function j(){_({url:"/pages/feedback/feedback"})}function A(){p({count:1,success:async a=>{const e=await async function(a,e){const t="avatar/"+e;return(await y.uploadFile({filePath:a,cloudPath:t})).fileID}(a.tempFiles[0].path,a.tempFiles[0].name);let t=await y.getTempFileURL({fileList:[e]});console.log(t.fileList[0].tempFileURL),await async function(a){await(e={userId:C.state.userInfo._id,filePath:a},F({name:"AvatarUpdate",data:e})),h({title:"上传成功"}),C.commit("updateUserInfo",{...C.state.userInfo,avatar:a});var e}(t.fileList[0].tempFileURL)}})}return v((()=>{})),(a,e)=>{const _=g,p=r,y=I,h=x(t("uni-icons"),w),F=k;return f(),s(u,null,[l(C).state.userInfo?(f(),o(p,{key:0,class:"my-header"},{default:n((()=>[i(p,{class:"my-header-background"},{default:n((()=>[i(_,{src:l(C).state.userInfo.avatar,mode:"aspectFill"},null,8,["src"])])),_:1}),i(p,{class:"my-header-logo"},{default:n((()=>[i(p,{class:"my-header-logo-box",onClick:A},{default:n((()=>[i(_,{src:l(C).state.userInfo.avatar,mode:"aspectFill"},null,8,["src"])])),_:1}),i(y,{onClick:a.changeName,class:"user-name"},{default:n((()=>[d(m(l(C).state.userInfo.author_name),1)])),_:1},8,["onClick"])])),_:1}),i(p,{class:"my-header-info"},{default:n((()=>[i(p,{class:"my-header-info-box"},{default:n((()=>[i(y,{class:"my-header-info-title"},{default:n((()=>[d("被关注")])),_:1}),i(y,null,{default:n((()=>[d(m(l(C).state.userInfo.follow_count),1)])),_:1})])),_:1}),i(p,{class:"my-header-info-box"},{default:n((()=>[i(y,{class:"my-header-info-title"},{default:n((()=>[d("粉丝")])),_:1}),i(y,null,{default:n((()=>[d(m(l(C).state.userInfo.fans_count),1)])),_:1})])),_:1}),i(p,{class:"my-header-info-box"},{default:n((()=>[i(y,{class:"my-header-info-title"},{default:n((()=>[d("积分")])),_:1}),i(y,null,{default:n((()=>[d(m(l(C).state.userInfo.integral_count||0),1)])),_:1})])),_:1})])),_:1})])),_:1})):c("",!0),i(p,{class:"my-content"},{default:n((()=>[l(C).state.userInfo?c("",!0):(f(),o(p,{key:0,class:"my-content-list",onClick:z},{default:n((()=>[i(p,{class:"my-content-list-title"},{default:n((()=>[i(_,{class:"company-logo",src:"/assets/logo-DH6MYdfv.jpeg",mode:"aspectFill"}),i(y,null,{default:n((()=>[d("HI，您尚未登录,请点击登录")])),_:1})])),_:1}),i(h,{type:"arrowright",size:"14",color:"#666"})])),_:1})),i(p,{class:"my-content-list",onClick:U},{default:n((()=>[i(p,{class:"my-content-list-title"},{default:n((()=>[i(h,{class:"icons",type:"contact",size:"16",color:"#666"}),i(y,null,{default:n((()=>[d("我的文章")])),_:1})])),_:1}),i(h,{type:"arrowright",size:"14",color:"#666"})])),_:1}),i(p,{class:"my-content-list",onClick:j},{default:n((()=>[i(p,{class:"my-content-list-title"},{default:n((()=>[i(h,{class:"icons",type:"help",size:"16",color:"#666"}),i(y,null,{default:n((()=>[d("意见反馈")])),_:1})])),_:1}),i(h,{type:"arrowright",size:"14",color:"#666"})])),_:1}),l(C).state.userInfo?(f(),o(F,{key:1,type:"warn",class:"sign-out",onClick:L},{default:n((()=>[d("退出")])),_:1})):c("",!0)])),_:1})],64)}}},[["__scopeId","data-v-b92c8ed9"]]);export{C as default};
