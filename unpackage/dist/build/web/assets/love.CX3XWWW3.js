import{r as s,m as a,p as t,A as e,a as i,o,c as r,b as n,d as c,O as l,x as u,i as p}from"./index-hP099HiM.js";import{_ as m}from"./uni-icons.CrfVb6lZ.js";import{r as d}from"./uni-app.es.NZ0FsMzr.js";import{u as f}from"./isLogin.B444u07p.js";import{a as v}from"./http.CnX7aEgl.js";const _={__name:"love",props:["itemId"],emits:["updateArticle"],setup(_,{emit:I}){const{checkLogin:h}=f();let{itemId:j}=_;const y=s(),g=a();t((async()=>{y.value=await h()}));const k=e((()=>y.value&&y.value.article_likes_ids.includes(j)));async function w(s){s.stopPropagation();try{let s=await h();const{msg:t,newUserInfo:e}=await(a={articleId:j,userId:s._id},v({name:"updateLike",data:a}));y.value=e,l("updateArticle"),g.commit("updateUserInfo",e),u({title:t,icon:"success"})}catch(t){}var a}return(s,a)=>{const t=d(i("uni-icons"),m),e=p;return o(),r(e,{class:"love",onClick:a[0]||(a[0]=s=>w(s))},{default:n((()=>[c(t,{type:k.value?"heart-filled":"heart",color:"$ff6600",size:"24"},null,8,["type"])])),_:1})}}};export{_};
