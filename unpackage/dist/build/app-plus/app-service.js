var __defProp=Object.defineProperty,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,n),n);if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";const t=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}],n=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n};const s=n({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:t}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,n,s,i,o,r){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle(r.styleObj),class:e.normalizeClass(["uni-icons",["uniui-"+s.type,s.customPrefix,s.customPrefix?s.type:""]]),onClick:n[0]||(n[0]=(...e)=>r._onClick&&r._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-5610c8db"]]);function i(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}function o(e,t){return"string"==typeof e?t:e}const r=t=>(n,s=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,n,s)},a=r("onLoad"),l=r("onReachBottom"),c={__name:"NavBar",props:["isSearch","serchValue"],emits:["updateValue","sendSearchData"],setup(t,{emit:n}){const i=t,{isSearch:r,serchValue:a}=e.toRefs(i);let l=n,c=e.ref(20),u=e.ref(0);function d(){l("sendSearchData",h)}const h=e.computed({get:()=>a.value,set(e){l("updateValue",e),e||l("sendSearchData",e)}});function p(){H5,uni.navigateBack()}function m(){r.value||uni.navigateTo({url:"/pages/serch/serch"})}return uni.getSystemInfo().then((e=>{0!=e.statusBarHeight?c.value=2*e.statusBarHeight:c.value=20})),(t,n)=>{const i=o(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:"navBar"},[e.createElementVNode("view",{class:"nav-bar-top"},[e.createElementVNode("view",{style:e.normalizeStyle({height:e.unref(c)+"rpx"})},[e.unref(r)?(e.openBlock(),e.createElementBlock("view",{key:0,onClick:p,class:"return-icon",style:e.normalizeStyle({top:e.unref(c)+"rpx"})},[e.createVNode(i,{type:"back",size:"30",color:"#fff"})],4)):e.createCommentVNode("",!0)],4),e.createElementVNode("view",{onClick:m,class:"nav-bar-back",style:e.normalizeStyle({marginRight:e.unref(u)+"rpx",marginLeft:e.unref(r)?"20rpx":""})},[e.createVNode(i,{type:"search",color:"$999",size:"30"}),e.unref(r)?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>h.value=e),class:"serch-input",placeholder:"输入文章标题进行搜索","confirm-type":"search",onConfirm:d},null,544)),[[e.vModelText,h.value]]):(e.openBlock(),e.createElementBlock("view",{key:0,class:"nav-bar-text"}," 输入文章标题进行搜索 "))],4)]),e.createElementVNode("view",{style:e.normalizeStyle({height:e.unref(c)+80+"rpx"})},null,4)])}}},u=n(c,[["__scopeId","data-v-8a1b34ab"]]);function d(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}const h="function"==typeof Proxy;class p{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const o in e.settings){const t=e.settings[o];n[o]=t.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i={...n};try{const e=localStorage.getItem(s),t=JSON.parse(e);Object.assign(i,t)}catch(Ye){}this.fallbacks={getSettings:()=>i,setSettings(e){try{localStorage.setItem(s,JSON.stringify(e))}catch(Ye){}i=e}},t.on("plugin:settings:set",((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function m(e,t){const n=d(),s=d().__VUE_DEVTOOLS_GLOBAL_HOOK__,i=h&&e.enableEarlyProxy;if(!s||!n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&i){const o=i?new p(e,s):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}else s.emit("devtools-plugin:setup",e,t)}
/*!
   * vuex v4.1.0
   * (c) 2022 Evan You
   * @license MIT
   */var f="store";function g(t){return void 0===t&&(t=null),e.inject(null!==t?t:f)}function y(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function k(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function v(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;_(e,n,[],e._modules.root,!0),w(e,n,t)}function w(t,n,s){var i=t._state,o=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,a={},l={},c=e.effectScope(!0);c.run((function(){y(r,(function(n,s){a[s]=function(e,t){return function(){return e(t)}}(n,t),l[s]=e.computed((function(){return a[s]()})),Object.defineProperty(t.getters,s,{get:function(){return l[s].value},enumerable:!0})}))})),t._state=e.reactive({data:n}),t._scope=c,t.strict&&function(t){e.watch((function(){return t._state.data}),(function(){}),{deep:!0,flush:"sync"})}(t),i&&s&&t._withCommit((function(){i.data=null})),o&&o.stop()}function _(e,t,n,s,i){var o=!n.length,r=e._modules.getNamespace(n);if(s.namespaced&&(e._modulesNamespaceMap[r],e._modulesNamespaceMap[r]=s),!o&&!i){var a=x(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit((function(){a[l]=s.state}))}var c=s.context=function(e,t,n){var s=""===t,i={dispatch:s?e.dispatch:function(n,s,i){var o=S(n,s,i),r=o.payload,a=o.options,l=o.type;return a&&a.root||(l=t+l),e.dispatch(l,r)},commit:s?e.commit:function(n,s,i){var o=S(n,s,i),r=o.payload,a=o.options,l=o.type;a&&a.root||(l=t+l),e.commit(l,r,a)}};return Object.defineProperties(i,{getters:{get:s?function(){return e.getters}:function(){return b(e,t)}},state:{get:function(){return x(e.state,n)}}}),i}(e,r,n);s.forEachMutation((function(t,n){!function(e,t,n,s){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,s.state,t)}))}(e,r+n,t,c)})),s.forEachAction((function(t,n){var s=t.root?n:r+n,i=t.handler||t;!function(e,t,n,s){(e._actions[t]||(e._actions[t]=[])).push((function(t){var i,o=n.call(e,{dispatch:s.dispatch,commit:s.commit,getters:s.getters,state:s.state,rootGetters:e.getters,rootState:e.state},t);return(i=o)&&"function"==typeof i.then||(o=Promise.resolve(o)),e._devtoolHook?o.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):o}))}(e,s,i,c)})),s.forEachGetter((function(t,n){!function(e,t,n,s){if(e._wrappedGetters[t])return;e._wrappedGetters[t]=function(e){return n(s.state,s.getters,e.state,e.getters)}}(e,r+n,t,c)})),s.forEachChild((function(s,o){_(e,t,n.concat(o),s,i)}))}function b(e,t){if(!e._makeLocalGettersCache[t]){var n={},s=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,s)===t){var o=i.slice(s);Object.defineProperty(n,o,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function x(e,t){return t.reduce((function(e,t){return e[t]}),e)}function S(e,t,n){var s;return null!==(s=e)&&"object"==typeof s&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var I="vuex:mutations",E="vuex:actions",T="vuex",A=0;function C(e,t){m({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:["vuex bindings"]},(function(n){n.addTimelineLayer({id:I,label:"Vuex Mutations",color:N}),n.addTimelineLayer({id:E,label:"Vuex Actions",color:N}),n.addInspector({id:T,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===T)if(n.filter){var s=[];O(s,t._modules.root,n.filter,""),n.rootNodes=s}else n.rootNodes=[B(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===T){var s=n.nodeId;b(t,s),n.state=function(e,t,n){t="root"===n?t:t[n];var s=Object.keys(t),i={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(s.length){var o=function(e){var t={};return Object.keys(e).forEach((function(n){var s=n.split("/");if(s.length>1){var i=t,o=s.pop();s.forEach((function(e){i[e]||(i[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),i=i[e]._custom.value})),i[o]=D((function(){return e[n]}))}else t[n]=D((function(){return e[n]}))})),t}(t);i.getters=Object.keys(o).map((function(e){return{key:e.endsWith("/")?P(e):e,editable:!1,value:D((function(){return o[e]}))}}))}return i}((i=t._modules,(r=(o=s).split("/").filter((function(e){return e}))).reduce((function(e,t,n){var s=e[t];if(!s)throw new Error('Missing module "'+t+'" for path "'+o+'".');return n===r.length-1?s:s._children}),"root"===o?i:i.root._children)),"root"===s?t.getters:t._makeLocalGettersCache,s)}var i,o,r})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===T){var s=n.nodeId,i=n.path;"root"!==s&&(i=s.split("/").filter(Boolean).concat(i)),t._withCommit((function(){n.set(t._state.data,i,n.state.value)}))}})),t.subscribe((function(e,t){var s={};e.payload&&(s.payload=e.payload),s.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(T),n.sendInspectorState(T),n.addTimelineEvent({layerId:I,event:{time:Date.now(),title:e.type,data:s}})})),t.subscribeAction({before:function(e,t){var s={};e.payload&&(s.payload=e.payload),e._id=A++,e._time=Date.now(),s.state=t,n.addTimelineEvent({layerId:E,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:s}})},after:function(e,t){var s={},i=Date.now()-e._time;s.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},e.payload&&(s.payload=e.payload),s.state=t,n.addTimelineEvent({layerId:E,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:s}})}})}))}var N=8702998,L={label:"namespaced",textColor:16777215,backgroundColor:6710886};function P(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function B(e,t){return{id:t||"root",label:P(t),tags:e.namespaced?[L]:[],children:Object.keys(e._children).map((function(n){return B(e._children[n],t+n+"/")}))}}function O(e,t,n,s){s.includes(n)&&e.push({id:s||"root",label:s.endsWith("/")?s.slice(0,s.length-1):s||"Root",tags:t.namespaced?[L]:[]}),Object.keys(t._children).forEach((function(i){O(e,t._children[i],n,s+i+"/")}))}function D(e){try{return e()}catch(Ye){return Ye}}var R=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},V={namespaced:{configurable:!0}};V.namespaced.get=function(){return!!this._rawModule.namespaced},R.prototype.addChild=function(e,t){this._children[e]=t},R.prototype.removeChild=function(e){delete this._children[e]},R.prototype.getChild=function(e){return this._children[e]},R.prototype.hasChild=function(e){return e in this._children},R.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},R.prototype.forEachChild=function(e){y(this._children,e)},R.prototype.forEachGetter=function(e){this._rawModule.getters&&y(this._rawModule.getters,e)},R.prototype.forEachAction=function(e){this._rawModule.actions&&y(this._rawModule.actions,e)},R.prototype.forEachMutation=function(e){this._rawModule.mutations&&y(this._rawModule.mutations,e)},Object.defineProperties(R.prototype,V);var M=function(e){this.register([],e,!1)};function F(e,t,n){if(t.update(n),n.modules)for(var s in n.modules){if(!t.getChild(s))return;F(e.concat(s),t.getChild(s),n.modules[s])}}M.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},M.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},M.prototype.update=function(e){F([],this.root,e)},M.prototype.register=function(e,t,n){var s=this;void 0===n&&(n=!0);var i=new R(t,n);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&y(t.modules,(function(t,i){s.register(e.concat(i),t,n)}))},M.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],s=t.getChild(n);s&&s.runtime&&t.removeChild(n)},M.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var $=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var s=e.strict;void 0===s&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new M(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,r=this.dispatch,a=this.commit;this.dispatch=function(e,t){return r.call(o,e,t)},this.commit=function(e,t,n){return a.call(o,e,t,n)},this.strict=s;var l=this._modules.root.state;_(this,l,[],this._modules.root),w(this,l),n.forEach((function(e){return e(t)}))},U={state:{configurable:!0}};function j(){const e=g();return{checkLogin:()=>new Promise(((t,n)=>{const s=e.state.userInfo;s?(e.commit("updateUserInfo",s),t(s)):uni.navigateTo({url:"/pages/userinfo/login/login"}).catch((e=>{n(e)}))}))}}$.prototype.install=function(e,t){e.provide(t||f,this),e.config.globalProperties.$store=this,void 0!==this._devtools&&this._devtools&&C(e,this)},U.state.get=function(){return this._state.data},U.state.set=function(e){},$.prototype.commit=function(e,t,n){var s=this,i=S(e,t,n),o=i.type,r=i.payload,a={type:o,payload:r},l=this._mutations[o];l&&(this._withCommit((function(){l.forEach((function(e){e(r)}))})),this._subscribers.slice().forEach((function(e){return e(a,s.state)})))},$.prototype.dispatch=function(e,t){var n=this,s=S(e,t),i=s.type,o=s.payload,r={type:i,payload:o},a=this._actions[i];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(r,n.state)}))}catch(Ye){}var l=a.length>1?Promise.all(a.map((function(e){return e(o)}))):a[0](o);return new Promise((function(e,t){l.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(r,n.state)}))}catch(Ye){}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(r,n.state,e)}))}catch(Ye){}t(e)}))}))}},$.prototype.subscribe=function(e,t){return k(e,this._subscribers,t)},$.prototype.subscribeAction=function(e,t){return k("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},$.prototype.watch=function(t,n,s){var i=this;return e.watch((function(){return t(i.state,i.getters)}),n,Object.assign({},s))},$.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},$.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),_(this,this.state,e,this._modules.get(e),n.preserveState),w(this,this.state)},$.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){delete x(t.state,e.slice(0,-1))[e[e.length-1]]})),v(this)},$.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},$.prototype.hotUpdate=function(e){this._modules.update(e),v(this,!0)},$.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties($.prototype,U);const z=n({__name:"TabBar",props:["activeIndex","labeList"],emits:["changeIndex"],setup(t,{emit:n}){let i=t,r=n,a=e.ref("item0");const{checkLogin:l}=j();async function c(){await l(),uni.navigateTo({url:"/pages/abelAdmin/abelAdmin"})}return e.watch((()=>i.activeIndex),(e=>{a.value=`item${e}`})),(n,i)=>{const l=o(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:"tabBar"},[e.createElementVNode("scroll-view",{"scroll-x":"true",class:"tabScroll","scroll-with-animation":!0,"scroll-into-view":e.unref(a)},[e.createElementVNode("view",{class:"box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.labeList,((n,s)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>function(e){r("changeIndex",e)}(s),class:e.normalizeClass([{active:t.activeIndex==s},"tab-item"]),key:n._id,id:`item${s}`},e.toDisplayString(n.name),11,["onClick","id"])))),128))])],8,["scroll-into-view"]),e.createElementVNode("view",{class:"icons"},[e.createVNode(l,{type:"gear",size:"26",color:"#666",onClick:c})])])}}},[["__scopeId","data-v-133d6240"]]),q={pages:[{path:"pages/index/index",style:{navigationStyle:"custom"}},{path:"pages/follow/follow",style:{navigationBarTitleText:"关注",enablePullDownRefresh:!1}},{path:"pages/self/self",style:{navigationBarTitleText:"用户信息",enablePullDownRefresh:!1}},{path:"pages/serch/serch",style:{navigationStyle:"custom"}},{path:"pages/userinfo/login/login",style:{navigationBarTitleText:"用户登录",enablePullDownRefresh:!1}},{path:"pages/abelAdmin/abelAdmin",style:{navigationBarTitleText:"标签页管理"}},{path:"pages/articleDetail/articleDetail",style:{navigationBarTitleText:"文章详情"}},{path:"pages/commentList/commentList",style:{navigationBarTitleText:"评论列表"}},{path:"pages/myArticle/myArticle",style:{navigationBarTitleText:""}},{path:"pages/feedback/feedback",style:{navigationBarTitleText:""}}],globalStyle:{navigationBarTextStyle:"white",navigationBarTitleText:"旧城以西_",navigationBarBackgroundColor:"#f25037",backgroundColor:"#F8F8F8"},tabBar:{color:"#666",selectedColor:"#f25037",backgroundColor:"#fff",list:[{pagePath:"pages/index/index",iconPath:"static/img/home.png",selectedIconPath:"static/img/home-active.png",text:"首页"},{pagePath:"pages/follow/follow",iconPath:"static/img/follow.png",selectedIconPath:"static/img/follow-active.png",text:"关注"},{pagePath:"pages/self/self",iconPath:"static/img/my.png",selectedIconPath:"static/img/my-active.png",text:"我的"}]}};function H(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var J=H((function(e,t){var n;e.exports=(n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},i=s.lib={},o=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,s=this.sigBytes,i=e.sigBytes;if(this.clamp(),s%4)for(var o=0;o<i;o++){var r=n[o>>>2]>>>24-o%4*8&255;t[s+o>>>2]|=r<<24-(s+o)%4*8}else for(o=0;o<i;o+=4)t[s+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,s=[],i=function(t){var n=987654321,s=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&s)<<16)+(t=18e3*(65535&t)+(t>>16)&s)&s;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=i(4294967296*(n||e.random()));n=987654071*a(),s.push(4294967296*a()|0)}return new r.init(s,t)}}),a=s.enc={},l=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,s=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;s.push((o>>>4).toString(16)),s.push((15&o).toString(16))}return s.join("")},parse:function(e){for(var t=e.length,n=[],s=0;s<t;s+=2)n[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new r.init(n,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,s=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;s.push(String.fromCharCode(o))}return s.join("")},parse:function(e){for(var t=e.length,n=[],s=0;s<t;s++)n[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new r.init(n,t)}},u=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,s=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),l=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,c=e.min(4*l,i);if(l){for(var u=0;u<l;u+=o)this._doProcessBlock(s,u);var d=s.splice(0,l);n.sigBytes-=c}return new r.init(d,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=s.algo={};return s}(Math),n)})),W=J,G=(H((function(e,t){var n;e.exports=(n=W,function(e){var t=n,s=t.lib,i=s.WordArray,o=s.Hasher,r=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=r.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var s=t+n,i=e[s];e[s]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,r=e[t+0],l=e[t+1],p=e[t+2],m=e[t+3],f=e[t+4],g=e[t+5],y=e[t+6],k=e[t+7],v=e[t+8],w=e[t+9],_=e[t+10],b=e[t+11],x=e[t+12],S=e[t+13],I=e[t+14],E=e[t+15],T=o[0],A=o[1],C=o[2],N=o[3];T=c(T,A,C,N,r,7,a[0]),N=c(N,T,A,C,l,12,a[1]),C=c(C,N,T,A,p,17,a[2]),A=c(A,C,N,T,m,22,a[3]),T=c(T,A,C,N,f,7,a[4]),N=c(N,T,A,C,g,12,a[5]),C=c(C,N,T,A,y,17,a[6]),A=c(A,C,N,T,k,22,a[7]),T=c(T,A,C,N,v,7,a[8]),N=c(N,T,A,C,w,12,a[9]),C=c(C,N,T,A,_,17,a[10]),A=c(A,C,N,T,b,22,a[11]),T=c(T,A,C,N,x,7,a[12]),N=c(N,T,A,C,S,12,a[13]),C=c(C,N,T,A,I,17,a[14]),T=u(T,A=c(A,C,N,T,E,22,a[15]),C,N,l,5,a[16]),N=u(N,T,A,C,y,9,a[17]),C=u(C,N,T,A,b,14,a[18]),A=u(A,C,N,T,r,20,a[19]),T=u(T,A,C,N,g,5,a[20]),N=u(N,T,A,C,_,9,a[21]),C=u(C,N,T,A,E,14,a[22]),A=u(A,C,N,T,f,20,a[23]),T=u(T,A,C,N,w,5,a[24]),N=u(N,T,A,C,I,9,a[25]),C=u(C,N,T,A,m,14,a[26]),A=u(A,C,N,T,v,20,a[27]),T=u(T,A,C,N,S,5,a[28]),N=u(N,T,A,C,p,9,a[29]),C=u(C,N,T,A,k,14,a[30]),T=d(T,A=u(A,C,N,T,x,20,a[31]),C,N,g,4,a[32]),N=d(N,T,A,C,v,11,a[33]),C=d(C,N,T,A,b,16,a[34]),A=d(A,C,N,T,I,23,a[35]),T=d(T,A,C,N,l,4,a[36]),N=d(N,T,A,C,f,11,a[37]),C=d(C,N,T,A,k,16,a[38]),A=d(A,C,N,T,_,23,a[39]),T=d(T,A,C,N,S,4,a[40]),N=d(N,T,A,C,r,11,a[41]),C=d(C,N,T,A,m,16,a[42]),A=d(A,C,N,T,y,23,a[43]),T=d(T,A,C,N,w,4,a[44]),N=d(N,T,A,C,x,11,a[45]),C=d(C,N,T,A,E,16,a[46]),T=h(T,A=d(A,C,N,T,p,23,a[47]),C,N,r,6,a[48]),N=h(N,T,A,C,k,10,a[49]),C=h(C,N,T,A,I,15,a[50]),A=h(A,C,N,T,g,21,a[51]),T=h(T,A,C,N,x,6,a[52]),N=h(N,T,A,C,m,10,a[53]),C=h(C,N,T,A,_,15,a[54]),A=h(A,C,N,T,l,21,a[55]),T=h(T,A,C,N,v,6,a[56]),N=h(N,T,A,C,E,10,a[57]),C=h(C,N,T,A,y,15,a[58]),A=h(A,C,N,T,S,21,a[59]),T=h(T,A,C,N,f,6,a[60]),N=h(N,T,A,C,b,10,a[61]),C=h(C,N,T,A,p,15,a[62]),A=h(A,C,N,T,w,21,a[63]),o[0]=o[0]+T|0,o[1]=o[1]+A|0,o[2]=o[2]+C|0,o[3]=o[3]+N|0},_doFinalize:function(){var t=this._data,n=t.words,s=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(s/4294967296),r=s;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,l=a.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,s,i,o,r){var a=e+(t&n|~t&s)+i+r;return(a<<o|a>>>32-o)+t}function u(e,t,n,s,i,o,r){var a=e+(t&s|n&~s)+i+r;return(a<<o|a>>>32-o)+t}function d(e,t,n,s,i,o,r){var a=e+(t^n^s)+i+r;return(a<<o|a>>>32-o)+t}function h(e,t,n,s,i,o,r){var a=e+(n^(t|~s))+i+r;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(l),t.HmacMD5=o._createHmacHelper(l)}(Math),n.MD5)})),H((function(e,t){var n,s,i;e.exports=(s=(n=W).lib.Base,i=n.enc.Utf8,void(n.algo.HMAC=s.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,s=4*n;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),r=this._iKey=t.clone(),a=o.words,l=r.words,c=0;c<n;c++)a[c]^=1549556828,l[c]^=909522486;o.sigBytes=r.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))})),H((function(e,t){e.exports=W.HmacMD5}))),K=H((function(e,t){e.exports=W.enc.Utf8})),Q=H((function(e,t){var n,s,i;e.exports=(i=(s=n=W).lib.WordArray,s.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,s=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var r=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(s.charAt(r>>>6*(3-a)&63));var l=s.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var t=e.length,n=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var o=0;o<n.length;o++)s[n.charCodeAt(o)]=o}var r=n.charAt(64);if(r){var a=e.indexOf(r);-1!==a&&(t=a)}return function(e,t,n){for(var s=[],o=0,r=0;r<t;r++)if(r%4){var a=n[e.charCodeAt(r-1)]<<r%4*2,l=n[e.charCodeAt(r)]>>>6-r%4*2;s[o>>>2]|=(a|l)<<24-o%4*8,o++}return i.create(s,o)}(e,t,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)}));const Z="FUNCTION",Y="pending",X="rejected";function ee(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function te(e){return"object"===ee(e)}function ne(e){return"function"==typeof e}function se(e){return function(){try{return e.apply(e,arguments)}catch(t){console.error(t)}}}const ie="REJECTED",oe="NOT_PENDING";class re{constructor({createPromise:e,retryRule:t=ie}={}){this.createPromise=e,this.status=null,this.promise=null,this.retryRule=t}get needRetry(){if(!this.status)return!0;switch(this.retryRule){case ie:return this.status===X;case oe:return this.status!==Y}}exec(){return this.needRetry?(this.status=Y,this.promise=this.createPromise().then((e=>(this.status="fulfilled",Promise.resolve(e))),(e=>(this.status=X,Promise.reject(e)))),this.promise):this.promise}}function ae(e){return e&&"string"==typeof e?JSON.parse(e):e}const le=ae([]);ae("");const ce=ae('[{"provider":"alipay","spaceName":"dz06","spaceId":"env-00jxhafly6bt","spaceAppId":"2021004149698315","accessKey":"1Hx5IM9QCSCG7Oqg","secretKey":"PvOD6U1pxcx3bJz7"}]')||[];let ue="";try{ue="__UNI__EEB4416"}catch(Ye){}let de={};function he(e,t={}){var n,s;return n=de,s=e,Object.prototype.hasOwnProperty.call(n,s)||(de[e]=t),de[e]}de=uni._globalUniCloudObj?uni._globalUniCloudObj:uni._globalUniCloudObj={};const pe=["invoke","success","fail","complete"],me=he("_globalUniCloudInterceptor");function fe(e,t){me[e]||(me[e]={}),te(t)&&Object.keys(t).forEach((n=>{pe.indexOf(n)>-1&&function(e,t,n){let s=me[e][t];s||(s=me[e][t]=[]),-1===s.indexOf(n)&&ne(n)&&s.push(n)}(e,n,t[n])}))}function ge(e,t){me[e]||(me[e]={}),te(t)?Object.keys(t).forEach((n=>{pe.indexOf(n)>-1&&function(e,t,n){const s=me[e][t];if(!s)return;const i=s.indexOf(n);i>-1&&s.splice(i,1)}(e,n,t[n])})):delete me[e]}function ye(e,t){return e&&0!==e.length?e.reduce(((e,n)=>e.then((()=>n(t)))),Promise.resolve()):Promise.resolve()}function ke(e,t){return me[e]&&me[e][t]||[]}function ve(e){fe("callObject",e)}const we=he("_globalUniCloudListener"),_e="response",be="needLogin",xe="refreshToken",Se="clientdb",Ie="cloudfunction",Ee="cloudobject";function Te(e){return we[e]||(we[e]=[]),we[e]}function Ae(e,t){const n=Te(e);n.includes(t)||n.push(t)}function Ce(e,t){const n=Te(e),s=n.indexOf(t);-1!==s&&n.splice(s,1)}function Ne(e,t){const n=Te(e);for(let s=0;s<n.length;s++)(0,n[s])(t)}let Le,Pe=!1;function Be(){return Le||(Le=new Promise((e=>{Pe&&e(),function t(){if("function"==typeof getCurrentPages){const t=getCurrentPages();t&&t[0]&&(Pe=!0,e())}Pe||setTimeout((()=>{t()}),30)}()})),Le)}function Oe(e){const t={};for(const n in e){const s=e[n];ne(s)&&(t[n]=se(s))}return t}class De extends Error{constructor(e){super(e.message),this.errMsg=e.message||e.errMsg||"unknown system error",this.code=this.errCode=e.code||e.errCode||"SYSTEM_ERROR",this.errSubject=this.subject=e.subject||e.errSubject,this.cause=e.cause,this.requestId=e.requestId}toJson(e=0){if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}}var Re={request:e=>uni.request(e),uploadFile:e=>uni.uploadFile(e),setStorageSync:(e,t)=>uni.setStorageSync(e,t),getStorageSync:e=>uni.getStorageSync(e),removeStorageSync:e=>uni.removeStorageSync(e),clearStorageSync:()=>uni.clearStorageSync(),connectSocket:e=>uni.connectSocket(e)};function Ve(e){return e&&Ve(e.__v_raw)||e}function Me(){return{token:Re.getStorageSync("uni_id_token")||Re.getStorageSync("uniIdToken"),tokenExpired:Re.getStorageSync("uni_id_token_expired")}}function Fe({token:e,tokenExpired:t}={}){e&&Re.setStorageSync("uni_id_token",e),t&&Re.setStorageSync("uni_id_token_expired",t)}let $e,Ue;function je(){return $e||($e=uni.getSystemInfoSync()),$e}function ze(){let e,t;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;const{scene:n,channel:s}=uni.getLaunchOptionsSync();e=s,t=n}}catch(n){}return{channel:e,scene:t}}let qe={};function He(){const e=uni.getLocale&&uni.getLocale()||"en";if(Ue)return{...qe,...Ue,locale:e,LOCALE:e};const t=je(),{deviceId:n,osName:s,uniPlatform:i,appId:o}=t,r=["appId","appLanguage","appName","appVersion","appVersionCode","appWgtVersion","browserName","browserVersion","deviceBrand","deviceId","deviceModel","deviceType","osName","osVersion","romName","romVersion","ua","hostName","hostVersion","uniPlatform","uniRuntimeVersion","uniRuntimeVersionCode","uniCompilerVersion","uniCompilerVersionCode"];for(const a in t)Object.hasOwnProperty.call(t,a)&&-1===r.indexOf(a)&&delete t[a];return Ue={PLATFORM:i,OS:s,APPID:o,DEVICEID:n,...ze(),...t},{...qe,...Ue,locale:e,LOCALE:e}}var Je=function(e,t){let n="";return Object.keys(e).sort().forEach((function(t){e[t]&&(n=n+"&"+t+"="+e[t])})),n=n.slice(1),G(n,t).toString()},We=function(e,t){return new Promise(((n,s)=>{t(Object.assign(e,{complete(e){e||(e={});const t=e.data&&e.data.header&&e.data.header["x-serverless-request-id"]||e.header&&e.header["request-id"];if(!e.statusCode||e.statusCode>=400){const n=e.data&&e.data.error&&e.data.error.code||"SYS_ERR",i=e.data&&e.data.error&&e.data.error.message||e.errMsg||"request:fail";return s(new De({code:n,message:i,requestId:t}))}const i=e.data;if(i.error)return s(new De({code:i.error.code,message:i.error.message,requestId:t}));i.result=i.data,i.requestId=t,delete i.data,n(i)}}))}))},Ge=function(e){return Q.stringify(K.parse(e))},Ke={init(e){const t=new class{constructor(e){["spaceId","clientSecret"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),this.config=Object.assign({},{endpoint:0===e.spaceId.indexOf("mp-")?"https://api.next.bspapp.com":"https://api.bspapp.com"},e),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=Re,this._getAccessTokenPromiseHub=new re({createPromise:()=>this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then((e=>{if(!e.result||!e.result.accessToken)throw new De({code:"AUTH_FAILED",message:"获取accessToken失败"});this.setAccessToken(e.result.accessToken)})),retryRule:oe})}get hasAccessToken(){return!!this.accessToken}setAccessToken(e){this.accessToken=e}requestWrapped(e){return We(e,this.adapter.request)}requestAuth(e){return this.requestWrapped(e)}request(e,t){return Promise.resolve().then((()=>this.hasAccessToken?t?this.requestWrapped(e):this.requestWrapped(e).catch((t=>new Promise(((e,n)=>{!t||"GATEWAY_INVALID_TOKEN"!==t.code&&"InvalidParameter.InvalidToken"!==t.code?n(t):e()})).then((()=>this.getAccessToken())).then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)})))):this.getAccessToken().then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)}))))}rebuildRequest(e){const t=Object.assign({},e);return t.data.token=this.accessToken,t.header["x-basement-token"]=this.accessToken,t.header["x-serverless-sign"]=Je(t.data,this.config.clientSecret),t}setupRequest(e,t){const n=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),s={"Content-Type":"application/json"};return"auth"!==t&&(n.token=this.accessToken,s["x-basement-token"]=this.accessToken),s["x-serverless-sign"]=Je(n,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:s}}getAccessToken(){return this._getAccessTokenPromiseHub.exec()}async authorize(){await this.getAccessToken()}callFunction(e){const t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request({...this.setupRequest(t),timeout:e.timeout})}getOSSUploadOptionsFromPath(e){const t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}uploadFileToOSS({url:e,formData:t,name:n,filePath:s,fileType:i,onUploadProgress:o}){return new Promise(((r,a)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:n,filePath:s,fileType:i,header:{"X-OSS-server-side-encrpytion":"AES256"},success(e){e&&e.statusCode<400?r(e):a(new De({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){a(new De({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof o&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{o({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}reportOSSUpload(e){const t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}async uploadFile({filePath:e,cloudPath:t,fileType:n="image",cloudPathAsRealPath:s=!1,onUploadProgress:i,config:o}){if("string"!==ee(t))throw new De({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new De({code:"INVALID_PARAM",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new De({code:"INVALID_PARAM",message:"cloudPath不合法"});const r=o&&o.envType||this.config.envType;if(s&&("/"!==t[0]&&(t="/"+t),t.indexOf("\\")>-1))throw new De({code:"INVALID_PARAM",message:"使用cloudPath作为路径时，cloudPath不可包含“\\”"});const a=(await this.getOSSUploadOptionsFromPath({env:r,filename:s?t.split("/").pop():t,fileId:s?t:void 0})).result,l="https://"+a.cdnDomain+"/"+a.ossPath,{securityToken:c,accessKeyId:u,signature:d,host:h,ossPath:p,id:m,policy:f,ossCallbackUrl:g}=a,y={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:u,Signature:d,host:h,id:m,key:p,policy:f,success_action_status:200};if(c&&(y["x-oss-security-token"]=c),g){const e=JSON.stringify({callbackUrl:g,callbackBody:JSON.stringify({fileId:m,spaceId:this.config.spaceId}),callbackBodyType:"application/json"});y.callback=Ge(e)}const k={url:"https://"+a.host,formData:y,fileName:"file",name:"file",filePath:e,fileType:n};if(await this.uploadFileToOSS(Object.assign({},k,{onUploadProgress:i})),g)return{success:!0,filePath:e,fileID:l};if((await this.reportOSSUpload({id:m})).success)return{success:!0,filePath:e,fileID:l};throw new De({code:"UPLOAD_FAILED",message:"文件上传失败"})}getTempFileURL({fileList:e}={}){return new Promise(((t,n)=>{Array.isArray(e)&&0!==e.length||n(new De({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"})),t({fileList:e.map((e=>({fileID:e,tempFileURL:e})))})}))}async getFileInfo({fileList:e}={}){if(!Array.isArray(e)||0===e.length)throw new De({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const t={method:"serverless.file.resource.info",params:JSON.stringify({id:e.map((e=>e.split("?")[0])).join(",")})};return{fileList:(await this.request(this.setupRequest(t))).result}}}(e),n={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return n},t.customAuth=t.auth,t}};const Qe="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:";var Ze,Ye;(Ye=Ze||(Ze={})).local="local",Ye.none="none",Ye.session="session";var Xe=function(){},et=H((function(e,t){var n;e.exports=(n=W,function(e){var t=n,s=t.lib,i=s.WordArray,o=s.Hasher,r=t.algo,a=[],l=[];!function(){function t(t){for(var n=e.sqrt(t),s=2;s<=n;s++)if(!(t%s))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var s=2,i=0;i<64;)t(s)&&(i<8&&(a[i]=n(e.pow(s,.5))),l[i]=n(e.pow(s,1/3)),i++),s++}();var c=[],u=r.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,s=n[0],i=n[1],o=n[2],r=n[3],a=n[4],u=n[5],d=n[6],h=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var m=c[p-15],f=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,g=c[p-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=f+c[p-7]+y+c[p-16]}var k=s&i^s&o^i&o,v=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),w=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+l[p]+c[p];h=d,d=u,u=a,a=r+w|0,r=o,o=i,i=s,s=w+(v+k)|0}n[0]=n[0]+s|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+r|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,s=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(s/4294967296),n[15+(i+64>>>9<<4)]=s,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(u),t.HmacSHA256=o._createHmacHelper(u)}(Math),n.SHA256)})),tt=et,nt=H((function(e,t){e.exports=W.HmacSHA256}));const st=()=>{let e;if(!Promise){e=()=>{},e.promise={};const t=()=>{throw new De({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}const t=new Promise(((t,n)=>{e=(e,s)=>e?n(e):t(s)}));return e.promise=t,e};function it(e){return void 0===e}function ot(e){return"[object Null]"===Object.prototype.toString.call(e)}var rt;!function(e){e.WEB="web",e.WX_MP="wx_mp"}(rt||(rt={}));const at={adapter:null,runtime:void 0},lt=["anonymousUuidKey"];class ct extends Xe{constructor(){super(),at.adapter.root.tcbObject||(at.adapter.root.tcbObject={})}setItem(e,t){at.adapter.root.tcbObject[e]=t}getItem(e){return at.adapter.root.tcbObject[e]}removeItem(e){delete at.adapter.root.tcbObject[e]}clear(){delete at.adapter.root.tcbObject}}function ut(e,t){switch(e){case"local":return t.localStorage||new ct;case"none":return new ct;default:return t.sessionStorage||new ct}}class dt{constructor(e){if(!this._storage){this._persistence=at.adapter.primaryStorage||e.persistence,this._storage=ut(this._persistence,at.adapter);const t=`access_token_${e.env}`,n=`access_token_expire_${e.env}`,s=`refresh_token_${e.env}`,i=`anonymous_uuid_${e.env}`,o=`login_type_${e.env}`,r=`user_info_${e.env}`;this.keys={accessTokenKey:t,accessTokenExpireKey:n,refreshTokenKey:s,anonymousUuidKey:i,loginTypeKey:o,userInfoKey:r}}}updatePersistence(e){if(e===this._persistence)return;const t="local"===this._persistence;this._persistence=e;const n=ut(e,at.adapter);for(const s in this.keys){const e=this.keys[s];if(t&&lt.includes(s))continue;const i=this._storage.getItem(e);it(i)||ot(i)||(n.setItem(e,i),this._storage.removeItem(e))}this._storage=n}setStore(e,t,n){if(!this._storage)return;const s={version:n||"localCachev1",content:t},i=JSON.stringify(s);try{this._storage.setItem(e,i)}catch(o){throw o}}getStore(e,t){try{if(!this._storage)return}catch(s){return""}t=t||"localCachev1";const n=this._storage.getItem(e);return n&&n.indexOf(t)>=0?JSON.parse(n).content:""}removeStore(e){this._storage.removeItem(e)}}const ht={},pt={};function mt(e){return ht[e]}class ft{constructor(e,t){this.data=t||null,this.name=e}}class gt extends ft{constructor(e,t){super("error",{error:e,data:t}),this.error=e}}const yt=new class{constructor(){this._listeners={}}on(e,t){return n=e,s=t,(i=this._listeners)[n]=i[n]||[],i[n].push(s),this;var n,s,i}off(e,t){return function(e,t,n){if(n&&n[e]){const s=n[e].indexOf(t);-1!==s&&n[e].splice(s,1)}}(e,t,this._listeners),this}fire(e,t){if(e instanceof gt)return console.error(e.error),this;const n="string"==typeof e?new ft(e,t||{}):e,s=n.name;if(this._listens(s)){n.target=this;const e=this._listeners[s]?[...this._listeners[s]]:[];for(const t of e)t.call(this,n)}return this}_listens(e){return this._listeners[e]&&this._listeners[e].length>0}};function kt(e,t){yt.on(e,t)}function vt(e,t={}){yt.fire(e,t)}function wt(e,t){yt.off(e,t)}const _t="loginStateChanged",bt="loginStateExpire",xt="loginTypeChanged",St="anonymousConverted",It="refreshAccessToken";var Et;!function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.NULL="NULL"}(Et||(Et={}));const Tt=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],At={"X-SDK-Version":"1.3.5"};function Ct(e,t,n){const s=e[t];e[t]=function(t){const i={},o={};n.forEach((n=>{const{data:s,headers:r}=n.call(e,t);Object.assign(i,s),Object.assign(o,r)}));const r=t.data;return r&&(()=>{var e;if(e=r,"[object FormData]"!==Object.prototype.toString.call(e))t.data={...r,...i};else for(const t in i)r.append(t,i[t])})(),t.headers={...t.headers||{},...o},s.call(e,t)}}function Nt(){const e=Math.random().toString(16).slice(2);return{data:{seqId:e},headers:{...At,"x-seqid":e}}}class Lt{constructor(e={}){var t;this.config=e,this._reqClass=new at.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`请求在${this.config.timeout/1e3}s内未完成，已中断`,restrictedMethods:["post"]}),this._cache=mt(this.config.env),this._localCache=(t=this.config.env,pt[t]),Ct(this._reqClass,"post",[Nt]),Ct(this._reqClass,"upload",[Nt]),Ct(this._reqClass,"download",[Nt])}async post(e){return await this._reqClass.post(e)}async upload(e){return await this._reqClass.upload(e)}async download(e){return await this._reqClass.download(e)}async refreshAccessToken(){let e,t;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=await this._refreshAccessTokenPromise}catch(n){t=n}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,t)throw t;return e}async _refreshAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:n,loginTypeKey:s,anonymousUuidKey:i}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(t);let o=this._cache.getStore(n);if(!o)throw new De({message:"未登录CloudBase"});const r={refresh_token:o},a=await this.request("auth.fetchAccessTokenWithRefreshToken",r);if(a.data.code){const{code:e}=a.data;if("SIGN_PARAM_INVALID"===e||"REFRESH_TOKEN_EXPIRED"===e||"INVALID_REFRESH_TOKEN"===e){if(this._cache.getStore(s)===Et.ANONYMOUS&&"INVALID_REFRESH_TOKEN"===e){const e=this._cache.getStore(i),t=this._cache.getStore(n),s=await this.send("auth.signInAnonymously",{anonymous_uuid:e,refresh_token:t});return this.setRefreshToken(s.refresh_token),this._refreshAccessToken()}vt(bt),this._cache.removeStore(n)}throw new De({code:a.data.code,message:`刷新access token失败：${a.data.code}`})}if(a.data.access_token)return vt(It),this._cache.setStore(e,a.data.access_token),this._cache.setStore(t,a.data.access_token_expire+Date.now()),{accessToken:a.data.access_token,accessTokenExpire:a.data.access_token_expire};a.data.refresh_token&&(this._cache.removeStore(n),this._cache.setStore(n,a.data.refresh_token),this._refreshAccessToken())}async getAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:n}=this._cache.keys;if(!this._cache.getStore(n))throw new De({message:"refresh token不存在，登录状态异常"});let s=this._cache.getStore(e),i=this._cache.getStore(t),o=!0;return this._shouldRefreshAccessTokenHook&&!(await this._shouldRefreshAccessTokenHook(s,i))&&(o=!1),(!s||!i||i<Date.now())&&o?this.refreshAccessToken():{accessToken:s,accessTokenExpire:i}}async request(e,t,n){const s=`x-tcb-trace_${this.config.env}`;let i="application/x-www-form-urlencoded";const o={action:e,env:this.config.env,dataVersion:"2019-08-16",...t};if(-1===Tt.indexOf(e)){const{refreshTokenKey:e}=this._cache.keys;this._cache.getStore(e)&&(o.access_token=(await this.getAccessToken()).accessToken)}let r;if("storage.uploadFile"===e){r=new FormData;for(let e in r)r.hasOwnProperty(e)&&void 0!==r[e]&&r.append(e,o[e]);i="multipart/form-data"}else{i="application/json",r={};for(let e in o)void 0!==o[e]&&(r[e]=o[e])}let a={headers:{"content-type":i}};n&&n.timeout&&(a.timeout=n.timeout),n&&n.onUploadProgress&&(a.onUploadProgress=n.onUploadProgress);const l=this._localCache.getStore(s);l&&(a.headers["X-TCB-Trace"]=l);const{parse:c,inQuery:u,search:d}=t;let h={env:this.config.env};c&&(h.parse=!0),u&&(h={...u,...h});let p=function(e,t,n={}){const s=/\?/.test(t);let i="";for(let o in n)""===i?!s&&(t+="?"):i+="&",i+=`${o}=${encodeURIComponent(n[o])}`;return/^http(s)?\:\/\//.test(t+=i)?t:`${e}${t}`}(Qe,"//tcb-api.tencentcloudapi.com/web",h);d&&(p+=d);const m=await this.post({url:p,data:r,...a}),f=m.header&&m.header["x-tcb-trace"];if(f&&this._localCache.setStore(s,f),200!==Number(m.status)&&200!==Number(m.statusCode)||!m.data)throw new De({code:"NETWORK_ERROR",message:"network request error"});return m}async send(e,t={},n={}){const s=await this.request(e,t,{...n,onUploadProgress:t.onUploadProgress});if("ACCESS_TOKEN_EXPIRED"===s.data.code&&-1===Tt.indexOf(e)){await this.refreshAccessToken();const s=await this.request(e,t,{...n,onUploadProgress:t.onUploadProgress});if(s.data.code)throw new De({code:s.data.code,message:s.data.message});return s.data}if(s.data.code)throw new De({code:s.data.code,message:s.data.message});return s.data}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:n,refreshTokenKey:s}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(n),this._cache.setStore(s,e)}}const Pt={};function Bt(e){return Pt[e]}class Ot{constructor(e){this.config=e,this._cache=mt(e.env),this._request=Bt(e.env)}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:n,refreshTokenKey:s}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(n),this._cache.setStore(s,e)}setAccessToken(e,t){const{accessTokenKey:n,accessTokenExpireKey:s}=this._cache.keys;this._cache.setStore(n,e),this._cache.setStore(s,t)}async refreshUserInfo(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e)}}class Dt{constructor(e){if(!e)throw new De({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=mt(this._envId),this._request=Bt(this._envId),this.setUserInfo()}linkWithTicket(e){if("string"!=typeof e)throw new De({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if("string"!=typeof e)throw new De({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}async getLinkedUidList(){const{data:e}=await this._request.send("auth.getLinkedUidList",{});let t=!1;const{users:n}=e;return n.forEach((e=>{e.wxOpenId&&e.wxPublicId&&(t=!0)})),{users:n,hasPrimaryUid:t}}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}async update(e){const{nickName:t,gender:n,avatarUrl:s,province:i,country:o,city:r}=e,{data:a}=await this._request.send("auth.updateUserInfo",{nickName:t,gender:n,avatarUrl:s,province:i,country:o,city:r});this.setLocalUserInfo(a)}async refresh(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setUserInfo(){const{userInfoKey:e}=this._cache.keys,t=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach((e=>{this[e]=t[e]})),this.location={country:t.country,province:t.province,city:t.city}}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e),this.setUserInfo()}}class Rt{constructor(e){if(!e)throw new De({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=mt(e);const{refreshTokenKey:t,accessTokenKey:n,accessTokenExpireKey:s}=this._cache.keys,i=this._cache.getStore(t),o=this._cache.getStore(n),r=this._cache.getStore(s);this.credential={refreshToken:i,accessToken:o,accessTokenExpire:r},this.user=new Dt(e)}get isAnonymousAuth(){return this.loginType===Et.ANONYMOUS}get isCustomAuth(){return this.loginType===Et.CUSTOM}get isWeixinAuth(){return this.loginType===Et.WECHAT||this.loginType===Et.WECHAT_OPEN||this.loginType===Et.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}}class Vt extends Ot{async signIn(){this._cache.updatePersistence("local");const{anonymousUuidKey:e,refreshTokenKey:t}=this._cache.keys,n=this._cache.getStore(e)||void 0,s=this._cache.getStore(t)||void 0,i=await this._request.send("auth.signInAnonymously",{anonymous_uuid:n,refresh_token:s});if(i.uuid&&i.refresh_token){this._setAnonymousUUID(i.uuid),this.setRefreshToken(i.refresh_token),await this._request.refreshAccessToken(),vt(_t),vt(xt,{env:this.config.env,loginType:Et.ANONYMOUS,persistence:"local"});const e=new Rt(this.config.env);return await e.user.refresh(),e}throw new De({message:"匿名登录失败"})}async linkAndRetrieveDataWithTicket(e){const{anonymousUuidKey:t,refreshTokenKey:n}=this._cache.keys,s=this._cache.getStore(t),i=this._cache.getStore(n),o=await this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:s,refresh_token:i,ticket:e});if(o.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(o.refresh_token),await this._request.refreshAccessToken(),vt(St,{env:this.config.env}),vt(xt,{loginType:Et.CUSTOM,persistence:"local"}),{credential:{refreshToken:o.refresh_token}};throw new De({message:"匿名转化失败"})}_setAnonymousUUID(e){const{anonymousUuidKey:t,loginTypeKey:n}=this._cache.keys;this._cache.removeStore(t),this._cache.setStore(t,e),this._cache.setStore(n,Et.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}}class Mt extends Ot{async signIn(e){if("string"!=typeof e)throw new De({code:"PARAM_ERROR",message:"ticket must be a string"});const{refreshTokenKey:t}=this._cache.keys,n=await this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(t)||""});if(n.refresh_token)return this.setRefreshToken(n.refresh_token),await this._request.refreshAccessToken(),vt(_t),vt(xt,{env:this.config.env,loginType:Et.CUSTOM,persistence:this.config.persistence}),await this.refreshUserInfo(),new Rt(this.config.env);throw new De({message:"自定义登录失败"})}}class Ft extends Ot{async signIn(e,t){if("string"!=typeof e)throw new De({code:"PARAM_ERROR",message:"email must be a string"});const{refreshTokenKey:n}=this._cache.keys,s=await this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:t,refresh_token:this._cache.getStore(n)||""}),{refresh_token:i,access_token:o,access_token_expire:r}=s;if(i)return this.setRefreshToken(i),o&&r?this.setAccessToken(o,r):await this._request.refreshAccessToken(),await this.refreshUserInfo(),vt(_t),vt(xt,{env:this.config.env,loginType:Et.EMAIL,persistence:this.config.persistence}),new Rt(this.config.env);throw s.code?new De({code:s.code,message:`邮箱登录失败: ${s.message}`}):new De({message:"邮箱登录失败"})}async activate(e){return this._request.send("auth.activateEndUserMail",{token:e})}async resetPasswordWithToken(e,t){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:t})}}class $t extends Ot{async signIn(e,t){if("string"!=typeof e)throw new De({code:"PARAM_ERROR",message:"username must be a string"});"string"!=typeof t&&(t="",console.warn("password is empty"));const{refreshTokenKey:n}=this._cache.keys,s=await this._request.send("auth.signIn",{loginType:Et.USERNAME,username:e,password:t,refresh_token:this._cache.getStore(n)||""}),{refresh_token:i,access_token_expire:o,access_token:r}=s;if(i)return this.setRefreshToken(i),r&&o?this.setAccessToken(r,o):await this._request.refreshAccessToken(),await this.refreshUserInfo(),vt(_t),vt(xt,{env:this.config.env,loginType:Et.USERNAME,persistence:this.config.persistence}),new Rt(this.config.env);throw s.code?new De({code:s.code,message:`用户名密码登录失败: ${s.message}`}):new De({message:"用户名密码登录失败"})}}class Ut{constructor(e){this.config=e,this._cache=mt(e.env),this._request=Bt(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),kt(xt,this._onLoginTypeChanged)}get currentUser(){const e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new Vt(this.config)}customAuthProvider(){return new Mt(this.config)}emailAuthProvider(){return new Ft(this.config)}usernameAuthProvider(){return new $t(this.config)}async signInAnonymously(){return new Vt(this.config).signIn()}async signInWithEmailAndPassword(e,t){return new Ft(this.config).signIn(e,t)}signInWithUsernameAndPassword(e,t){return new $t(this.config).signIn(e,t)}async linkAndRetrieveDataWithTicket(e){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new Vt(this.config)),kt(St,this._onAnonymousConverted),await this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)}async signOut(){if(this.loginType===Et.ANONYMOUS)throw new De({message:"匿名用户不支持登出操作"});const{refreshTokenKey:e,accessTokenKey:t,accessTokenExpireKey:n}=this._cache.keys,s=this._cache.getStore(e);if(!s)return;const i=await this._request.send("auth.logout",{refresh_token:s});return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.removeStore(n),vt(_t),vt(xt,{env:this.config.env,loginType:Et.NULL,persistence:this.config.persistence}),i}async signUpWithEmailAndPassword(e,t){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:t})}async sendPasswordResetEmail(e){return this._request.send("auth.sendPasswordResetEmail",{email:e})}onLoginStateChanged(e){kt(_t,(()=>{const t=this.hasLoginState();e.call(this,t)}));const t=this.hasLoginState();e.call(this,t)}onLoginStateExpired(e){kt(bt,e.bind(this))}onAccessTokenRefreshed(e){kt(It,e.bind(this))}onAnonymousConverted(e){kt(St,e.bind(this))}onLoginTypeChanged(e){kt(xt,(()=>{const t=this.hasLoginState();e.call(this,t)}))}async getAccessToken(){return{accessToken:(await this._request.getAccessToken()).accessToken,env:this.config.env}}hasLoginState(){const{refreshTokenKey:e}=this._cache.keys;return this._cache.getStore(e)?new Rt(this.config.env):null}async isUsernameRegistered(e){if("string"!=typeof e)throw new De({code:"PARAM_ERROR",message:"username must be a string"});const{data:t}=await this._request.send("auth.isUsernameRegistered",{username:e});return t&&t.isRegistered}getLoginState(){return Promise.resolve(this.hasLoginState())}async signInWithTicket(e){return new Mt(this.config).signIn(e)}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then((e=>e.code?e:{...e.data,requestId:e.seqId}))}getAuthHeader(){const{refreshTokenKey:e,accessTokenKey:t}=this._cache.keys,n=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(t)+"/@@/"+n}}_onAnonymousConverted(e){const{env:t}=e.data;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){const{loginType:t,persistence:n,env:s}=e.data;s===this.config.env&&(this._cache.updatePersistence(n),this._cache.setStore(this._cache.keys.loginTypeKey,t))}}const jt=function(e,t){t=t||st();const n=Bt(this.config.env),{cloudPath:s,filePath:i,onUploadProgress:o,fileType:r="image"}=e;return n.send("storage.getUploadMetadata",{path:s}).then((e=>{const{data:{url:a,authorization:l,token:c,fileId:u,cosFileId:d},requestId:h}=e,p={key:s,signature:l,"x-cos-meta-fileid":d,success_action_status:"201","x-cos-security-token":c};n.upload({url:a,data:p,file:i,name:s,fileType:r,onUploadProgress:o}).then((e=>{201===e.statusCode?t(null,{fileID:u,requestId:h}):t(new De({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${e.data}`}))})).catch((e=>{t(e)}))})).catch((e=>{t(e)})),t.promise},zt=function(e,t){t=t||st();const n=Bt(this.config.env),{cloudPath:s}=e;return n.send("storage.getUploadMetadata",{path:s}).then((e=>{t(null,e)})).catch((e=>{t(e)})),t.promise},qt=function({fileList:e},t){if(t=t||st(),!e||!Array.isArray(e))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};for(let s of e)if(!s||"string"!=typeof s)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"};const n={fileid_list:e};return Bt(this.config.env).send("storage.batchDeleteFile",n).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.delete_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Ht=function({fileList:e},t){t=t||st(),e&&Array.isArray(e)||t(null,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});let n=[];for(let i of e)"object"==typeof i?(i.hasOwnProperty("fileID")&&i.hasOwnProperty("maxAge")||t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),n.push({fileid:i.fileID,max_age:i.maxAge})):"string"==typeof i?n.push({fileid:i}):t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"});const s={file_list:n};return Bt(this.config.env).send("storage.batchGetDownloadUrl",s).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.download_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Jt=async function({fileID:e},t){const n=(await Ht.call(this,{fileList:[{fileID:e,maxAge:600}]})).fileList[0];if("SUCCESS"!==n.code)return t?t(n):new Promise((e=>{e(n)}));const s=Bt(this.config.env);let i=n.download_url;if(i=encodeURI(i),!t)return s.download({url:i});t(await s.download({url:i}))},Wt=function({name:e,data:t,query:n,parse:s,search:i,timeout:o},r){const a=r||st();let l;try{l=t?JSON.stringify(t):""}catch(u){return Promise.reject(u)}if(!e)return Promise.reject(new De({code:"PARAM_ERROR",message:"函数名不能为空"}));const c={inQuery:n,parse:s,search:i,function_name:e,request_data:l};return Bt(this.config.env).send("functions.invokeFunction",c,{timeout:o}).then((e=>{if(e.code)a(null,e);else{let n=e.data.response_data;if(s)a(null,{result:n,requestId:e.requestId});else try{n=JSON.parse(e.data.response_data),a(null,{result:n,requestId:e.requestId})}catch(t){a(new De({message:"response data must be json"}))}}return a.promise})).catch((e=>{a(e)})),a.promise},Gt={timeout:15e3,persistence:"session"},Kt={};class Qt{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(at.adapter||(this.requestClient=new at.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`请求在${(e.timeout||5e3)/1e3}s内未完成，已中断`})),this.config={...Gt,...e},!0){case this.config.timeout>6e5:console.warn("timeout大于可配置上限[10分钟]，已重置为上限数值"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout小于可配置下限[100ms]，已重置为下限数值"),this.config.timeout=100}return new Qt(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;const t=e||at.adapter.primaryStorage||Gt.persistence;var n;return t!==this.config.persistence&&(this.config.persistence=t),function(e){const{env:t}=e;ht[t]=new dt(e),pt[t]=new dt({...e,persistence:"local"})}(this.config),n=this.config,Pt[n.env]=new Lt(n),this.authObj=new Ut(this.config),this.authObj}on(e,t){return kt.apply(this,[e,t])}off(e,t){return wt.apply(this,[e,t])}callFunction(e,t){return Wt.apply(this,[e,t])}deleteFile(e,t){return qt.apply(this,[e,t])}getTempFileURL(e,t){return Ht.apply(this,[e,t])}downloadFile(e,t){return Jt.apply(this,[e,t])}uploadFile(e,t){return jt.apply(this,[e,t])}getUploadMetadata(e,t){return zt.apply(this,[e,t])}registerExtension(e){Kt[e.name]=e}async invokeExtension(e,t){const n=Kt[e];if(!n)throw new De({message:`扩展${e} 必须先注册`});return await n.invoke(t,this)}useAdapters(e){const{adapter:t,runtime:n}=function(e){const t=(n=e,"[object Array]"===Object.prototype.toString.call(n)?e:[e]);var n;for(const s of t){const{isMatch:e,genAdapter:t,runtime:n}=s;if(e())return{adapter:t(),runtime:n}}}(e)||{};t&&(at.adapter=t),n&&(at.runtime=n)}}var Zt=new Qt;function Yt(e,t,n){void 0===n&&(n={});var s=/\?/.test(t),i="";for(var o in n)""===i?!s&&(t+="?"):i+="&",i+=o+"="+encodeURIComponent(n[o]);return/^http(s)?:\/\//.test(t+=i)?t:""+e+t}class Xt{post(e){const{url:t,data:n,headers:s,timeout:i}=e;return new Promise(((e,o)=>{Re.request({url:Yt("https:",t),data:n,method:"POST",header:s,timeout:i,success(t){e(t)},fail(e){o(e)}})}))}upload(e){return new Promise(((t,n)=>{const{url:s,file:i,data:o,headers:r,fileType:a}=e,l=Re.uploadFile({url:Yt("https:",s),name:"file",formData:Object.assign({},o),filePath:i,fileType:a,header:r,success(e){const n={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&o.success_action_status&&(n.statusCode=parseInt(o.success_action_status,10)),t(n)},fail(e){n(new Error(e.errMsg||"uploadFile:fail"))}});"function"==typeof e.onUploadProgress&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((t=>{e.onUploadProgress({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}}const en={setItem(e,t){Re.setStorageSync(e,t)},getItem:e=>Re.getStorageSync(e),removeItem(e){Re.removeStorageSync(e)},clear(){Re.clearStorageSync()}};var tn={genAdapter:function(){return{root:{},reqClass:Xt,localStorage:en,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};Zt.useAdapters(tn);const nn=Zt,sn=nn.init;nn.init=function(e){e.env=e.spaceId;const t=sn.call(this,e);t.config.provider="tencent",t.config.spaceId=e.spaceId;const n=t.auth;return t.auth=function(e){const t=n.call(this,e);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach((e=>{var n;t[e]=(n=t[e],function(e){e=e||{};const{success:t,fail:s,complete:i}=Oe(e);if(!(t||s||i))return n.call(this,e);n.call(this,e).then((e=>{t&&t(e),i&&i(e)}),(e=>{s&&s(e),i&&i(e)}))}).bind(t)})),t},t.customAuth=t.auth,t};var on=nn;async function rn(e,t){const n=`http://${e}:${t}/system/ping`;try{const e=await(s={url:n,timeout:500},new Promise(((e,t)=>{Re.request({...s,success(t){e(t)},fail(e){t(e)}})})));return!(!e.data||0!==e.data.code)}catch(i){return!1}var s}const an={"serverless.file.resource.generateProximalSign":"storage/generate-proximal-sign","serverless.file.resource.report":"storage/report","serverless.file.resource.delete":"storage/delete","serverless.file.resource.getTempFileURL":"storage/get-temp-file-url"};var ln={init(e){const t=new class{constructor(e){if(["spaceId","clientSecret"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),!e.endpoint)throw new Error("集群空间未配置ApiEndpoint，配置后需要重新关联服务空间后生效");this.config=Object.assign({},e),this.config.provider="dcloud",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.adapter=Re}async request(e,t=!0){return e=this.setupRequest(e),Promise.resolve().then((()=>We(e,this.adapter.request)))}requestLocal(e){return new Promise(((t,n)=>{this.adapter.request(Object.assign(e,{complete(e){if(e||(e={}),!e.statusCode||e.statusCode>=400){const t=e.data&&e.data.code||"SYS_ERR",s=e.data&&e.data.message||"request:fail";return n(new De({code:t,message:s}))}t({success:!0,result:e.data})}}))}))}setupRequest(e){const t=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),n={"Content-Type":"application/json"};n["x-serverless-sign"]=Je(t,this.config.clientSecret);const s=He();n["x-client-info"]=encodeURIComponent(JSON.stringify(s));const{token:i}=Me();return n["x-client-token"]=i,{url:this.config.requestUrl,method:"POST",data:t,dataType:"json",header:JSON.parse(JSON.stringify(n))}}async setupLocalRequest(e){const t=He(),{token:n}=Me(),s=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now(),clientInfo:t,token:n}),{address:i,servePort:o}=this.__dev__&&this.__dev__.debugInfo||{},{address:r}=await async function(e,t){let n;for(let s=0;s<e.length;s++){const i=e[s];if(await rn(i,t)){n=i;break}}return{address:n,port:t}}(i,o);return{url:`http://${r}:${o}/${an[e.method]}`,method:"POST",data:s,dataType:"json",header:JSON.parse(JSON.stringify({"Content-Type":"application/json"}))}}callFunction(e){const t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request(t,!1)}getUploadFileOptions(e){const t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(t)}reportUploadFile(e){const t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(t)}uploadFile({filePath:e,cloudPath:t,fileType:n="image",onUploadProgress:s}){if(!t)throw new De({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});let i;return this.getUploadFileOptions({cloudPath:t}).then((t=>{const{url:o,formData:r,name:a}=t.result;return i=t.result.fileUrl,new Promise(((t,i)=>{const l=this.adapter.uploadFile({url:o,formData:r,name:a,filePath:e,fileType:n,success(e){e&&e.statusCode<400?t(e):i(new De({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){i(new De({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof s&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))})).then((()=>this.reportUploadFile({cloudPath:t}))).then((t=>new Promise(((n,s)=>{t.success?n({success:!0,filePath:e,fileID:i}):s(new De({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))))}deleteFile({fileList:e}){const t={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:e})};return this.request(t).then((e=>{if(e.success)return e.result;throw new De({code:"DELETE_FILE_FAILED",message:"删除文件失败"})}))}getTempFileURL({fileList:e,maxAge:t}={}){if(!Array.isArray(e)||0===e.length)throw new De({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const n={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:e,maxAge:t})};return this.request(n).then((e=>{if(e.success)return{fileList:e.result.fileList.map((e=>({fileID:e.fileID,tempFileURL:e.tempFileURL})))};throw new De({code:"GET_TEMP_FILE_URL_FAILED",message:"获取临时文件链接失败"})}))}}(e),n={signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return n},t.customAuth=t.auth,t}},cn=H((function(e,t){e.exports=W.enc.Hex}));function un(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function dn(e="",t={}){const{data:n,functionName:s,method:i,headers:o,signHeaderKeys:r=[],config:a}=t,l=Date.now(),c=un(),u=Object.assign({},o,{"x-from-app-id":a.spaceAppId,"x-from-env-id":a.spaceId,"x-to-env-id":a.spaceId,"x-from-instance-id":l,"x-from-function-name":s,"x-client-timestamp":l,"x-alipay-source":"client","x-request-id":c,"x-alipay-callid":c,"x-trace-id":c}),d=["x-from-app-id","x-from-env-id","x-to-env-id","x-from-instance-id","x-from-function-name","x-client-timestamp"].concat(r),[h="",p=""]=e.split("?")||[],m=function(e){const t=e.signedHeaders.join(";"),n=e.signedHeaders.map((t=>`${t.toLowerCase()}:${e.headers[t]}\n`)).join(""),s=tt(e.body).toString(cn),i=`${e.method.toUpperCase()}\n${e.path}\n${e.query}\n${n}\n${t}\n${s}\n`,o=tt(i).toString(cn),r=`HMAC-SHA256\n${e.timestamp}\n${o}\n`,a=nt(r,e.secretKey).toString(cn);return`HMAC-SHA256 Credential=${e.secretId}, SignedHeaders=${t}, Signature=${a}`}({path:h,query:p,method:i,headers:u,timestamp:l,body:JSON.stringify(n),secretId:a.accessKey,secretKey:a.secretKey,signedHeaders:d.sort()});return{url:`${a.endpoint}${e}`,headers:Object.assign({},u,{Authorization:m})}}function hn({url:e,data:t,method:n="POST",headers:s={},timeout:i}){return new Promise(((o,r)=>{Re.request({url:e,method:n,data:"object"==typeof t?JSON.stringify(t):t,header:s,dataType:"json",timeout:i,complete:(e={})=>{const t=s["x-trace-id"]||"";if(!e.statusCode||e.statusCode>=400){const{message:n,errMsg:s,trace_id:i}=e.data||{};return r(new De({code:"SYS_ERR",message:n||s||"request:fail",requestId:i||t}))}o({status:e.statusCode,data:e.data,headers:e.header,requestId:t})}})}))}function pn(e,t){const{path:n,data:s,method:i="GET"}=e,{url:o,headers:r}=dn(n,{functionName:"",data:s,method:i,headers:{"x-alipay-cloud-mode":"oss","x-data-api-type":"oss","x-expire-timestamp":Date.now()+6e4},signHeaderKeys:["x-data-api-type","x-expire-timestamp"],config:t});return hn({url:o,data:s,method:i,headers:r}).then((e=>{const t=e.data||{};if(!t.success)throw new De({code:e.errCode,message:e.errMsg,requestId:e.requestId});return t.data||{}})).catch((e=>{throw new De({code:e.errCode,message:e.errMsg,requestId:e.requestId})}))}function mn(e=""){const t=e.trim().replace(/^cloud:\/\//,""),n=t.indexOf("/");if(n<=0)throw new De({code:"INVALID_PARAM",message:"fileID不合法"});const s=t.substring(0,n),i=t.substring(n+1);return s!==this.config.spaceId&&console.warn("file ".concat(e," does not belong to env ").concat(this.config.spaceId)),i}function fn(e=""){return"cloud://".concat(this.config.spaceId,"/").concat(e.replace(/^\/+/,""))}class gn{constructor(e){this.config=e}signedURL(e,t={}){const n=`/ws/function/${e}`,s=this.config.wsEndpoint.replace(/^ws(s)?:\/\//,""),i=Object.assign({},t,{accessKeyId:this.config.accessKey,signatureNonce:un(),timestamp:""+Date.now()}),o=[n,["accessKeyId","authorization","signatureNonce","timestamp"].sort().map((function(e){return i[e]?"".concat(e,"=").concat(i[e]):null})).filter(Boolean).join("&"),`host:${s}`].join("\n"),r=["HMAC-SHA256",tt(o).toString(cn)].join("\n"),a=nt(r,this.config.secretKey).toString(cn),l=Object.keys(i).map((e=>`${e}=${encodeURIComponent(i[e])}`)).join("&");return`${this.config.wsEndpoint}${n}?${l}&signature=${a}`}}var yn={init:e=>{e.provider="alipay";const t=new class{constructor(e){if(["spaceId","spaceAppId","accessKey","secretKey"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),e.endpoint){if("string"!=typeof e.endpoint)throw new Error("endpoint must be string");if(!/^https:\/\//.test(e.endpoint))throw new Error("endpoint must start with https://");e.endpoint=e.endpoint.replace(/\/$/,"")}this.config=Object.assign({},e,{endpoint:e.endpoint||`https://${e.spaceId}.api-hz.cloudbasefunction.cn`,wsEndpoint:e.wsEndpoint||`wss://${e.spaceId}.api-hz.cloudbasefunction.cn`}),this._websocket=new gn(this.config)}callFunction(e){return function(e,t){const{name:n,data:s,async:i=!1,timeout:o}=e,r="POST",a={"x-to-function-name":n};i&&(a["x-function-invoke-type"]="async");const{url:l,headers:c}=dn("/functions/invokeFunction",{functionName:n,data:s,method:r,headers:a,signHeaderKeys:["x-to-function-name"],config:t});return hn({url:l,data:s,method:r,headers:c,timeout:o}).then((e=>{let t=0;if(i){const n=e.data||{};t="200"===n.errCode?0:n.errCode,e.data=n.data||{},e.errMsg=n.errMsg}if(0!==t)throw new De({code:t,message:e.errMsg,requestId:e.requestId});return{errCode:t,success:0===t,requestId:e.requestId,result:e.data}})).catch((e=>{throw new De({code:e.errCode,message:e.errMsg,requestId:e.requestId})}))}(e,this.config)}uploadFileToOSS({url:e,filePath:t,fileType:n,formData:s,onUploadProgress:i}){return new Promise(((o,r)=>{const a=Re.uploadFile({url:e,filePath:t,fileType:n,formData:s,name:"file",success(e){e&&e.statusCode<400?o(e):r(new De({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){r(new De({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof i&&a&&"function"==typeof a.onProgressUpdate&&a.onProgressUpdate((e=>{i({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}async uploadFile({filePath:e,cloudPath:t="",fileType:n="image",onUploadProgress:s}){if("string"!==ee(t))throw new De({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new De({code:"INVALID_PARAM",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new De({code:"INVALID_PARAM",message:"cloudPath不合法"});const i=await pn({path:"/".concat(t.replace(/^\//,""),"?post_url")},this.config),{file_id:o,upload_url:r,form_data:a}=i,l=a&&a.reduce(((e,t)=>(e[t.key]=t.value,e)),{});return this.uploadFileToOSS({url:r,filePath:e,fileType:n,formData:l,onUploadProgress:s}).then((()=>({fileID:o})))}async getTempFileURL({fileList:e}){return new Promise(((t,n)=>{(!e||e.length<0)&&n(new De({errCode:"INVALID_PARAM",errMsg:"fileList不能为空数组"})),e.length>50&&n(new De({errCode:"INVALID_PARAM",errMsg:"fileList数组长度不能超过50"}));const s=[];for(const i of e){"string"!==ee(i)&&n(new De({errCode:"INVALID_PARAM",errMsg:"fileList的元素必须是非空的字符串"}));const e=mn.call(this,i);s.push({file_id:e,expire:600})}pn({path:"/?download_url",data:{file_list:s},method:"POST"},this.config).then((e=>{const{file_list:n=[]}=e;t({fileList:n.map((e=>({fileID:fn.call(this,e.file_id),tempFileURL:e.download_url})))})})).catch((e=>n(e)))}))}async connectWebSocket(e){const{name:t,query:n}=e;return Re.connectSocket({url:this._websocket.signedURL(t,n),complete:()=>{}})}}(e);return t.auth=function(){return{signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!0)}}},t}};function kn({data:e}){let t;t=He();const n=JSON.parse(JSON.stringify(e||{}));if(Object.assign(n,{clientInfo:t}),!n.uniIdToken){const{token:e}=Me();e&&(n.uniIdToken=e)}return n}const vn=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"，云函数[{functionName}]在云端不存在，请检查此云函数名称是否正确以及该云函数是否已上传到服务空间",mode:"append"}];var wn=/[\\^$.*+?()[\]{}|]/g,_n=RegExp(wn.source);function bn(e,t,n){return e.replace(new RegExp((s=t)&&_n.test(s)?s.replace(wn,"\\$&"):s,"g"),n);var s}const xn=2e4,Sn={code:20101,message:"Invalid client"};function In(e){const{errSubject:t,subject:n,errCode:s,errMsg:i,code:o,message:r,cause:a}=e||{};return new De({subject:t||n||"uni-secure-network",code:s||o||xn,message:i||r,cause:a})}let En;function Tn({secretType:e}={}){return"request"===e||"response"===e||"both"===e}function An({name:e,data:t={}}={}){return"DCloud-clientDB"===e&&"encryption"===t.redirectTo&&"getAppClientKey"===t.action}function Cn({functionName:e,result:t,logPvd:n}){}function Nn(e){const t=e.callFunction,n=function(n){const s=n.name;n.data=kn.call(e,{data:n.data});const i={aliyun:"aliyun",tencent:"tcb",tcb:"tcb",alipay:"alipay",dcloud:"dcloud"}[this.config.provider],o=Tn(n),r=An(n),a=o||r;return t.call(this,n).then((e=>(e.errCode=0,!a&&Cn.call(this,{functionName:s,result:e,logPvd:i}),Promise.resolve(e))),(e=>(!a&&Cn.call(this,{functionName:s,result:e,logPvd:i}),e&&e.message&&(e.message=function({message:e="",extraInfo:t={},formatter:n=[]}={}){for(let s=0;s<n.length;s++){const{rule:i,content:o,mode:r}=n[s],a=e.match(i);if(!a)continue;let l=o;for(let e=1;e<a.length;e++)l=bn(l,`{$${e}}`,a[e]);for(const e in t)l=bn(l,`{${e}}`,t[e]);return"replace"===r?l:e+l}return e}({message:`[${n.name}]: ${e.message}`,formatter:vn,extraInfo:{functionName:s}})),Promise.reject(e))))};e.callFunction=function(t){const{provider:s,spaceId:i}=e.config,o=t.name;let r,a;return t.data=t.data||{},r=n,r=r.bind(e),a=An(t)?n.call(e,t):Tn(t)?new En({secretType:t.secretType,uniCloudIns:e}).wrapEncryptDataCallFunction(n.bind(e))(t):function({provider:e,spaceId:t,functionName:n}={}){const{appId:s,uniPlatform:i,osName:o}=je();let r=i;"app"===i&&(r=o);const a=function({provider:e,spaceId:t}={}){const n=le;if(!n)return{};e=function(e){return"tencent"===e?"tcb":e}(e);const s=n.find((n=>n.provider===e&&n.spaceId===t));return s&&s.config}({provider:e,spaceId:t});if(!a||!a.accessControl||!a.accessControl.enable)return!1;const l=a.accessControl.function||{},c=Object.keys(l);if(0===c.length)return!0;const u=function(e,t){let n,s,i;for(let o=0;o<e.length;o++){const r=e[o];r!==t?"*"!==r?r.split(",").map((e=>e.trim())).indexOf(t)>-1&&(s=r):i=r:n=r}return n||s||i}(c,n);if(!u)return!1;if((l[u]||[]).find(((e={})=>e.appId===s&&(e.platform||"").toLowerCase()===r.toLowerCase())))return!0;throw console.error(`此应用[appId: ${s}, platform: ${r}]不在云端配置的允许访问的应用列表内，参考：https://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`),In(Sn)}({provider:s,spaceId:i,functionName:o})?new En({secretType:t.secretType,uniCloudIns:e}).wrapVerifyClientCallFunction(n.bind(e))(t):r(t),Object.defineProperty(a,"result",{get:()=>(console.warn("当前返回结果为Promise类型，不可直接访问其result属性，详情请参考：https://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),a.then((e=>("undefined"!=typeof UTSJSONObject&&(e.result=new UTSJSONObject(e.result)),e)))}}En=class{constructor(){throw In({message:"Platform app is not enabled, please check whether secure network module is enabled in your manifest.json"})}};const Ln=Symbol("CLIENT_DB_INTERNAL");function Pn(e,t){return e.then="DoNotReturnProxyWithAFunctionNamedThen",e._internalType=Ln,e.inspect=null,e.__v_raw=void 0,new Proxy(e,{get(e,n,s){if("_uniClient"===n)return null;if("symbol"==typeof n)return e[n];if(n in e||"string"!=typeof n){const t=e[n];return"function"==typeof t?t.bind(e):t}return t.get(e,n,s)}})}function Bn(e){return{on:(t,n)=>{e[t]=e[t]||[],e[t].indexOf(n)>-1||e[t].push(n)},off:(t,n)=>{e[t]=e[t]||[];const s=e[t].indexOf(n);-1!==s&&e[t].splice(s,1)}}}const On=["db.Geo","db.command","command.aggregate"];function Dn(e,t){return On.indexOf(`${e}.${t}`)>-1}function Rn(e){switch(ee(e=Ve(e))){case"array":return e.map((e=>Rn(e)));case"object":return e._internalType===Ln||Object.keys(e).forEach((t=>{e[t]=Rn(e[t])})),e;case"regexp":return{$regexp:{source:e.source,flags:e.flags}};case"date":return{$date:e.toISOString()};default:return e}}function Vn(e){return e&&e.content&&e.content.$method}class Mn{constructor(e,t,n){this.content=e,this.prevStage=t||null,this.udb=null,this._database=n}toJSON(){let e=this;const t=[e.content];for(;e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map((e=>({$method:e.$method,$param:Rn(e.$param)})))}}toString(){return JSON.stringify(this.toJSON())}getAction(){const e=this.toJSON().$db.find((e=>"action"===e.$method));return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter((e=>"action"!==e.$method))}}get isAggregate(){let e=this;for(;e;){const t=Vn(e),n=Vn(e.prevStage);if("aggregate"===t&&"collection"===n||"pipeline"===t)return!0;e=e.prevStage}return!1}get isCommand(){let e=this;for(;e;){if("command"===Vn(e))return!0;e=e.prevStage}return!1}get isAggregateCommand(){let e=this;for(;e;){const t=Vn(e),n=Vn(e.prevStage);if("aggregate"===t&&"command"===n)return!0;e=e.prevStage}return!1}getNextStageFn(e){const t=this;return function(){return Fn({$method:e,$param:Rn(Array.from(arguments))},t,t._database)}}get count(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}get remove(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}get(){return this._send("get",Array.from(arguments))}get add(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}get set(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL禁止使用set方法")}}_send(e,t){const n=this.getAction(),s=this.getCommand();return s.$db.push({$method:e,$param:Rn(t)}),this._database._callCloudFunction({action:n,command:s})}}function Fn(e,t,n){return Pn(new Mn(e,t,n),{get(e,t){let s="db";return e&&e.content&&(s=e.content.$method),Dn(s,t)?Fn({$method:t},e,n):function(){return Fn({$method:t,$param:Rn(Array.from(arguments))},e,n)}}})}function $n({path:e,method:t}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...e.map((e=>({$method:e}))),{$method:t,$param:this.param}]}}toString(){return JSON.stringify(this.toJSON())}}}function Un(e,t={}){return Pn(new e(t),{get:(e,t)=>Dn("db",t)?Fn({$method:t},null,e):function(){return Fn({$method:t,$param:Rn(Array.from(arguments))},null,e)}})}class jn extends class{constructor({uniClient:e={},isJQL:t=!1}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e._isDefault&&(this._dbCallBacks=he("_globalUniCloudDatabaseCallback")),t||(this.auth=Bn(this._authCallBacks)),this._isJQL=t,Object.assign(this,Bn(this._dbCallBacks)),this.env=Pn({},{get:(e,t)=>({$env:t})}),this.Geo=Pn({},{get:(e,t)=>$n({path:["Geo"],method:t})}),this.serverDate=$n({path:[],method:"serverDate"}),this.RegExp=$n({path:[],method:"RegExp"})}getCloudEnv(e){if("string"!=typeof e||!e.trim())throw new Error("getCloudEnv参数错误");return{$env:e.replace("$cloudEnv_","")}}_callback(e,t){const n=this._dbCallBacks;n[e]&&n[e].forEach((e=>{e(...t)}))}_callbackAuth(e,t){const n=this._authCallBacks;n[e]&&n[e].forEach((e=>{e(...t)}))}multiSend(){const e=Array.from(arguments),t=e.map((e=>{const t=e.getAction(),n=e.getCommand();if("getTemp"!==n.$db[n.$db.length-1].$method)throw new Error("multiSend只支持子命令内使用getTemp");return{action:t,command:n}}));return this._callCloudFunction({multiCommand:t,queryList:e})}}{_parseResult(e){return this._isJQL?e.result:e}_callCloudFunction({action:e,command:t,multiCommand:n,queryList:s}){function i(e,t){if(n&&s)for(let n=0;n<s.length;n++){const i=s[n];i.udb&&"function"==typeof i.udb.setResult&&(t?i.udb.setResult(t):i.udb.setResult(e.result.dataList[n]))}}const o=this,r=this._isJQL?"databaseForJQL":"database";function a(e){return o._callback("error",[e]),ye(ke(r,"fail"),e).then((()=>ye(ke(r,"complete"),e))).then((()=>(i(null,e),Ne(_e,{type:Se,content:e}),Promise.reject(e))))}const l=ye(ke(r,"invoke")),c=this._uniClient;return l.then((()=>c.callFunction({name:"DCloud-clientDB",type:"CLIENT_DB",data:{action:e,command:t,multiCommand:n}}))).then((e=>{const{code:t,message:n,token:s,tokenExpired:l,systemInfo:c=[]}=e.result;if(c)for(let i=0;i<c.length;i++){const{level:e,message:t,detail:n}=c[i],s=console["warn"===e?"error":e]||console.log;let o="[System Info]"+t;n&&(o=`${o}\n详细信息：${n}`),s(o)}if(t)return a(new De({code:t,message:n,requestId:e.requestId}));e.result.errCode=e.result.errCode||e.result.code,e.result.errMsg=e.result.errMsg||e.result.message,s&&l&&(Fe({token:s,tokenExpired:l}),this._callbackAuth("refreshToken",[{token:s,tokenExpired:l}]),this._callback("refreshToken",[{token:s,tokenExpired:l}]),Ne(xe,{token:s,tokenExpired:l}));const u=[{prop:"affectedDocs",tips:"affectedDocs不再推荐使用，请使用inserted/deleted/updated/data.length替代"},{prop:"code",tips:"code不再推荐使用，请使用errCode替代"},{prop:"message",tips:"message不再推荐使用，请使用errMsg替代"}];for(let i=0;i<u.length;i++){const{prop:t,tips:n}=u[i];if(t in e.result){const s=e.result[t];Object.defineProperty(e.result,t,{get:()=>(console.warn(n),s)})}}return d=e,ye(ke(r,"success"),d).then((()=>ye(ke(r,"complete"),d))).then((()=>{i(d,null);const e=o._parseResult(d);return Ne(_e,{type:Se,content:e}),Promise.resolve(e)}));var d}),(e=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(e.message)&&console.warn("clientDB未初始化，请在web控制台保存一次schema以开启clientDB"),a(new De({code:e.code||"SYSTEM_ERROR",message:e.message,requestId:e.requestId})))))}}const zn="token无效，跳转登录页面",qn="token过期，跳转登录页面",Hn={TOKEN_INVALID_TOKEN_EXPIRED:qn,TOKEN_INVALID_INVALID_CLIENTID:zn,TOKEN_INVALID:zn,TOKEN_INVALID_WRONG_TOKEN:zn,TOKEN_INVALID_ANONYMOUS_USER:zn},Jn={"uni-id-token-expired":qn,"uni-id-check-token-failed":zn,"uni-id-token-not-exist":zn,"uni-id-check-device-feature-failed":zn};function Wn(e,t){let n="";return n=e?`${e}/${t}`:t,n.replace(/^\//,"")}function Gn(e=[],t=""){const n=[],s=[];return e.forEach((e=>{!0===e.needLogin?n.push(Wn(t,e.path)):!1===e.needLogin&&s.push(Wn(t,e.path))})),{needLoginPage:n,notNeedLoginPage:s}}function Kn(e){return e.split("?")[0].replace(/^\//,"")}function Qn(){return function(e){let t=e&&e.$page&&e.$page.fullPath||"";return t?("/"!==t.charAt(0)&&(t="/"+t),t):t}(function(){const e=getCurrentPages();return e[e.length-1]}())}function Zn(){return Kn(Qn())}function Yn(e="",t={}){if(!e)return!1;if(!(t&&t.list&&t.list.length))return!1;const n=t.list,s=Kn(e);return n.some((e=>e.pagePath===s))}const Xn=!!q.uniIdRouter,{loginPage:es,routerNeedLogin:ts,resToLogin:ns,needLoginPage:ss,notNeedLoginPage:is,loginPageInTabBar:os}=function({pages:e=[],subPackages:t=[],uniIdRouter:n={},tabBar:s={}}=q){const{loginPage:i,needLogin:o=[],resToLogin:r=!0}=n,{needLoginPage:a,notNeedLoginPage:l}=Gn(e),{needLoginPage:c,notNeedLoginPage:u}=function(e=[]){const t=[],n=[];return e.forEach((e=>{const{root:s,pages:i=[]}=e,{needLoginPage:o,notNeedLoginPage:r}=Gn(i,s);t.push(...o),n.push(...r)})),{needLoginPage:t,notNeedLoginPage:n}}(t);return{loginPage:i,routerNeedLogin:o,resToLogin:r,needLoginPage:[...a,...c],notNeedLoginPage:[...l,...u],loginPageInTabBar:Yn(i,s)}}();if(ss.indexOf(es)>-1)throw new Error(`Login page [${es}] should not be "needLogin", please check your pages.json`);function rs(e){const t=Zn();if("/"===e.charAt(0))return e;const[n,s]=e.split("?"),i=n.replace(/^\//,"").split("/"),o=t.split("/");o.pop();for(let r=0;r<i.length;r++){const e=i[r];".."===e?o.pop():"."!==e&&o.push(e)}return""===o[0]&&o.shift(),"/"+o.join("/")+(s?"?"+s:"")}function as({redirect:e}){const t=Kn(e),n=Kn(es);return Zn()!==n&&t!==n}function ls({api:e,redirect:t}={}){if(!t||!as({redirect:t}))return;const n=(i=t,"/"!==(s=es).charAt(0)&&(s="/"+s),i?s.indexOf("?")>-1?s+`&uniIdRedirectUrl=${encodeURIComponent(i)}`:s+`?uniIdRedirectUrl=${encodeURIComponent(i)}`:s);var s,i;os?"navigateTo"!==e&&"redirectTo"!==e||(e="switchTab"):"switchTab"===e&&(e="navigateTo");const o={navigateTo:uni.navigateTo,redirectTo:uni.redirectTo,switchTab:uni.switchTab,reLaunch:uni.reLaunch};setTimeout((()=>{o[e]({url:n})}),0)}function cs({url:e}={}){const t={abortLoginPageJump:!1,autoToLoginPage:!1},n=function(){const{token:e,tokenExpired:t}=Me();let n;if(e){if(t<Date.now()){const e="uni-id-token-expired";n={errCode:e,errMsg:Jn[e]}}}else{const e="uni-id-check-token-failed";n={errCode:e,errMsg:Jn[e]}}return n}();if(function(e){const t=Kn(rs(e));return!(is.indexOf(t)>-1)&&(ss.indexOf(t)>-1||ts.some((t=>{return n=e,new RegExp(t).test(n);var n})))}(e)&&n){if(n.uniIdRedirectUrl=e,Te(be).length>0)return setTimeout((()=>{Ne(be,n)}),0),t.abortLoginPageJump=!0,t;t.autoToLoginPage=!0}return t}function us(){!function(){const e=Qn(),{abortLoginPageJump:t,autoToLoginPage:n}=cs({url:e});t||n&&ls({api:"redirectTo",redirect:e})}();const e=["navigateTo","redirectTo","reLaunch","switchTab"];for(let t=0;t<e.length;t++){const n=e[t];uni.addInterceptor(n,{invoke(e){const{abortLoginPageJump:t,autoToLoginPage:s}=cs({url:e.url});return t?e:s?(ls({api:n,redirect:rs(e.url)}),!1):e}})}}function ds(){this.onResponse((e=>{const{type:t,content:n}=e;let s=!1;switch(t){case"cloudobject":s=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in Jn}(n);break;case"clientdb":s=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in Hn}(n)}s&&function(e={}){const t=Te(be);Be().then((()=>{const n=Qn();if(n&&as({redirect:n}))return t.length>0?Ne(be,Object.assign({uniIdRedirectUrl:n},e)):void(es&&ls({api:"navigateTo",redirect:n}))}))}(n)}))}function hs(e){var t;(t=e).onResponse=function(e){Ae(_e,e)},t.offResponse=function(e){Ce(_e,e)},function(e){e.onNeedLogin=function(e){Ae(be,e)},e.offNeedLogin=function(e){Ce(be,e)},Xn&&(he("_globalUniCloudStatus").needLoginInit||(he("_globalUniCloudStatus").needLoginInit=!0,Be().then((()=>{us.call(e)})),ns&&ds.call(e)))}(e),function(e){e.onRefreshToken=function(e){Ae(xe,e)},e.offRefreshToken=function(e){Ce(xe,e)}}(e)}let ps;const ms="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",fs=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function gs(){const e=Me().token||"",t=e.split(".");if(!e||3!==t.length)return{uid:null,role:[],permission:[],tokenExpired:0};let n;try{n=JSON.parse((s=t[1],decodeURIComponent(ps(s).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(i){throw new Error("获取当前用户信息出错，详细错误信息为："+i.message)}var s;return n.tokenExpired=1e3*n.exp,delete n.exp,delete n.iat,n}ps="function"!=typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!fs.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,s,i="",o=0;o<e.length;)t=ms.indexOf(e.charAt(o++))<<18|ms.indexOf(e.charAt(o++))<<12|(n=ms.indexOf(e.charAt(o++)))<<6|(s=ms.indexOf(e.charAt(o++))),i+=64===n?String.fromCharCode(t>>16&255):64===s?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return i}:atob;var ys=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(H((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n="chooseAndUploadFile:ok",s="chooseAndUploadFile:fail";function i(e,t){return e.tempFiles.forEach(((e,n)=>{e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+n+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((e=>e.path))),e}function o(e,t,{onChooseFile:s,onUploadProgress:i}){return t.then((e=>{if(s){const t=s(e);if(void 0!==t)return Promise.resolve(t).then((t=>void 0===t?e:t))}return e})).then((t=>!1===t?{errMsg:n,tempFilePaths:[],tempFiles:[]}:function(e,t,s=5,i){(t=Object.assign({},t)).errMsg=n;const o=t.tempFiles,r=o.length;let a=0;return new Promise((n=>{for(;a<s;)l();function l(){const s=a++;if(s>=r)return void(!o.find((e=>!e.url&&!e.errMsg))&&n(t));const c=o[s];e.uploadFile({provider:c.provider,filePath:c.path,cloudPath:c.cloudPath,fileType:c.fileType,cloudPathAsRealPath:c.cloudPathAsRealPath,onUploadProgress(e){e.index=s,e.tempFile=c,e.tempFilePath=c.path,i&&i(e)}}).then((e=>{c.url=e.fileID,s<r&&l()})).catch((e=>{c.errMsg=e.errMsg||e.message,s<r&&l()}))}}))}(e,t,5,i)))}t.initChooseAndUploadFile=function(e){return function(t={type:"all"}){return"image"===t.type?o(e,function(e){const{count:t,sizeType:n,sourceType:o=["album","camera"],extension:r}=e;return new Promise(((e,a)=>{uni.chooseImage({count:t,sizeType:n,sourceType:o,extension:r,success(t){e(i(t,"image"))},fail(e){a({errMsg:e.errMsg.replace("chooseImage:fail",s)})}})}))}(t),t):"video"===t.type?o(e,function(e){const{camera:t,compressed:n,maxDuration:o,sourceType:r=["album","camera"],extension:a}=e;return new Promise(((e,l)=>{uni.chooseVideo({camera:t,compressed:n,maxDuration:o,sourceType:r,extension:a,success(t){const{tempFilePath:n,duration:s,size:o,height:r,width:a}=t;e(i({errMsg:"chooseVideo:ok",tempFilePaths:[n],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:n,size:o,type:t.tempFile&&t.tempFile.type||"",width:a,height:r,duration:s,fileType:"video",cloudPath:""}]},"video"))},fail(e){l({errMsg:e.errMsg.replace("chooseVideo:fail",s)})}})}))}(t),t):o(e,function(e){const{count:t,extension:n}=e;return new Promise(((e,o)=>{let r=uni.chooseFile;if("undefined"!=typeof wx&&"function"==typeof wx.chooseMessageFile&&(r=wx.chooseMessageFile),"function"!=typeof r)return o({errMsg:s+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});r({type:"all",count:t,extension:n,success(t){e(i(t))},fail(e){o({errMsg:e.errMsg.replace("chooseFile:fail",s)})}})}))}(t),t)}}})));function ks(e){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{},mixinDatacomError:null}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach((t=>{e.push(this[t])})),e}),((e,t)=>{if("manual"===this.loadtime)return;let n=!1;const s=[];for(let i=2;i<e.length;i++)e[i]!==t[i]&&(s.push(e[i]),n=!0);e[0]!==t[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(n,s)}))},methods:{onMixinDatacomPropsChange(e,t){},mixinDatacomEasyGet({getone:e=!1,success:t,fail:n}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomError=null,this.mixinDatacomGet().then((n=>{this.mixinDatacomLoading=!1;const{data:s,count:i}=n.result;this.getcount&&(this.mixinDatacomPage.count=i),this.mixinDatacomHasMore=s.length<this.pageSize;const o=e?s.length?s[0]:void 0:s;this.mixinDatacomResData=o,t&&t(o)})).catch((e=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=e,this.mixinDatacomError=e,n&&n(e)})))},mixinDatacomGet(t={}){let n;t=t||{},n="undefined"!=typeof __uniX&&__uniX?e.databaseForJQL(this.spaceInfo):e.database(this.spaceInfo);const s=t.action||this.action;s&&(n=n.action(s));const i=t.collection||this.collection;n=Array.isArray(i)?n.collection(...i):n.collection(i);const o=t.where||this.where;o&&Object.keys(o).length&&(n=n.where(o));const r=t.field||this.field;r&&(n=n.field(r));const a=t.foreignKey||this.foreignKey;a&&(n=n.foreignKey(a));const l=t.groupby||this.groupby;l&&(n=n.groupBy(l));const c=t.groupField||this.groupField;c&&(n=n.groupField(c)),!0===(void 0!==t.distinct?t.distinct:this.distinct)&&(n=n.distinct());const u=t.orderby||this.orderby;u&&(n=n.orderBy(u));const d=void 0!==t.pageCurrent?t.pageCurrent:this.mixinDatacomPage.current,h=void 0!==t.pageSize?t.pageSize:this.mixinDatacomPage.size,p=void 0!==t.getcount?t.getcount:this.getcount,m=void 0!==t.gettree?t.gettree:this.gettree,f=void 0!==t.gettreepath?t.gettreepath:this.gettreepath,g={getCount:p},y={limitLevel:void 0!==t.limitlevel?t.limitlevel:this.limitlevel,startWith:void 0!==t.startwith?t.startwith:this.startwith};return m&&(g.getTree=y),f&&(g.getTreePath=y),n=n.skip(h*(d-1)).limit(h).get(g),n}}}}function vs(e){return he("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",e.config.spaceId))}async function ws({openid:e,callLoginByWeixin:t=!1}={}){throw vs(this),new Error("[SecureNetwork] API `initSecureNetworkByWeixin` is not supported on platform `app`")}async function _s(e){const t=vs(this);return t.initPromise||(t.initPromise=ws.call(this,e).then((e=>e)).catch((e=>{throw delete t.initPromise,e}))),t.initPromise}function bs(e){qe=e}function xs(e){const t={getSystemInfo:uni.getSystemInfo,getPushClientId:uni.getPushClientId};return function(n){return new Promise(((s,i)=>{t[e]({...n,success(e){s(e)},fail(e){i(e)}})}))}}class Ss extends class{constructor(){this._callback={}}addListener(e,t){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(t)}on(e,t){return this.addListener(e,t)}removeListener(e,t){if(!t)throw new Error('The "listener" argument must be of type function. Received undefined');const n=this._callback[e];if(!n)return;const s=function(e,t){for(let n=e.length-1;n>=0;n--)if(e[n]===t)return n;return-1}(n,t);n.splice(s,1)}off(e,t){return this.removeListener(e,t)}removeAllListener(e){delete this._callback[e]}emit(e,...t){const n=this._callback[e];if(n)for(let s=0;s<n.length;s++)n[s](...t)}}{constructor(){super(),this._uniPushMessageCallback=this._receivePushMessage.bind(this),this._currentMessageId=-1,this._payloadQueue=[]}init(){return Promise.all([xs("getSystemInfo")(),xs("getPushClientId")()]).then((([{appId:e}={},{cid:t}={}]=[])=>{if(!e)throw new Error("Invalid appId, please check the manifest.json file");if(!t)throw new Error("Invalid push client id");this._appId=e,this._pushClientId=t,this._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),this.emit("open"),this._initMessageListener()}),(e=>{throw this.emit("error",e),this.close(),e}))}async open(){return this.init()}_isUniCloudSSE(e){if("receive"!==e.type)return!1;const t=e&&e.data&&e.data.payload;return!(!t||"UNI_CLOUD_SSE"!==t.channel||t.seqId!==this._seqId)}_receivePushMessage(e){if(!this._isUniCloudSSE(e))return;const t=e&&e.data&&e.data.payload,{action:n,messageId:s,message:i}=t;this._payloadQueue.push({action:n,messageId:s,message:i}),this._consumMessage()}_consumMessage(){for(;;){const e=this._payloadQueue.find((e=>e.messageId===this._currentMessageId+1));if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}_parseMessagePayload(e){const{action:t,messageId:n,message:s}=e;"end"===t?this._end({messageId:n,message:s}):"message"===t&&this._appendMessage({messageId:n,message:s})}_appendMessage({messageId:e,message:t}={}){this.emit("message",t)}_end({messageId:e,message:t}={}){this.emit("end",t),this.close()}_initMessageListener(){uni.onPushMessage(this._uniPushMessageCallback)}_destroy(){uni.offPushMessage(this._uniPushMessageCallback)}toJSON(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}close(){this._destroy(),this.emit("close")}}const Is={tcb:on,tencent:on,aliyun:Ke,private:ln,dcloud:ln,alipay:yn};let Es=new class{init(e){let t={};const n=Is[e.provider];if(!n)throw new Error("未提供正确的provider参数");var s;return t=n.init(e),function(e){e._initPromiseHub||(e._initPromiseHub=new re({createPromise:function(){let t=Promise.resolve();t=new Promise((e=>{setTimeout((()=>{e()}),1)}));const n=e.auth();return t.then((()=>n.getLoginState())).then((e=>e?Promise.resolve():n.signInAnonymously()))}}))}(t),Nn(t),function(e){const t=e.uploadFile;e.uploadFile=function(e){return t.call(this,e)}}(t),(s=t).database=function(e){if(e&&Object.keys(e).length>0)return s.init(e).database();if(this._database)return this._database;const t=Un(jn,{uniClient:s});return this._database=t,t},s.databaseForJQL=function(e){if(e&&Object.keys(e).length>0)return s.init(e).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;const t=Un(jn,{uniClient:s,isJQL:!0});return this._databaseForJQL=t,t},function(e){e.getCurrentUserInfo=gs,e.chooseAndUploadFile=ys.initChooseAndUploadFile(e),Object.assign(e,{get mixinDatacom(){return ks(e)}}),e.SSEChannel=Ss,e.initSecureNetworkByWeixin=function(e){return function({openid:t,callLoginByWeixin:n=!1}={}){return _s.call(e,{openid:t,callLoginByWeixin:n})}}(e),e.setCustomClientInfo=bs,e.importObject=function(t){return function(n,s={}){s=function(e,t={}){return e.customUI=t.customUI||e.customUI,e.parseSystemError=t.parseSystemError||e.parseSystemError,Object.assign(e.loadingOptions,t.loadingOptions),Object.assign(e.errorOptions,t.errorOptions),"object"==typeof t.secretMethods&&(e.secretMethods=t.secretMethods),e}({customUI:!1,loadingOptions:{title:"加载中...",mask:!0},errorOptions:{type:"modal",retry:!1}},s);const{customUI:i,loadingOptions:o,errorOptions:r,parseSystemError:a}=s,l=!i;return new Proxy({},{get(i,c){switch(c){case"toString":return"[object UniCloudObject]";case"toJSON":return{}}return function({fn:e,interceptorName:t,getCallbackArgs:n}={}){return async function(...s){const i=n?n({params:s}):{};let o,r;try{return await ye(ke(t,"invoke"),{...i}),o=await e(...s),await ye(ke(t,"success"),{...i,result:o}),o}catch(a){throw r=a,await ye(ke(t,"fail"),{...i,error:r}),r}finally{await ye(ke(t,"complete"),r?{...i,error:r}:{...i,result:o})}}}({fn:async function i(...u){let d;l&&uni.showLoading({title:o.title,mask:o.mask});const h={name:n,type:"OBJECT",data:{method:c,params:u}};"object"==typeof s.secretMethods&&function(e,t){const n=t.data.method,s=e.secretMethods||{},i=s[n]||s["*"];i&&(t.secretType=i)}(s,h);let p=!1;try{d=await t.callFunction(h)}catch(e){p=!0,d={result:new De(e)}}const{errSubject:m,errCode:f,errMsg:g,newToken:y}=d.result||{};if(l&&uni.hideLoading(),y&&y.token&&y.tokenExpired&&(Fe(y),Ne(xe,{...y})),f){let e=g;if(p&&a&&(e=(await a({objectName:n,methodName:c,params:u,errSubject:m,errCode:f,errMsg:g})).errMsg||g),l)if("toast"===r.type)uni.showToast({title:e,icon:"none"});else{if("modal"!==r.type)throw new Error(`Invalid errorOptions.type: ${r.type}`);{const{confirm:t}=await async function({title:e,content:t,showCancel:n,cancelText:s,confirmText:i}={}){return new Promise(((o,r)=>{uni.showModal({title:e,content:t,showCancel:n,cancelText:s,confirmText:i,success(e){o(e)},fail(){o({confirm:!1,cancel:!0})}})}))}({title:"提示",content:e,showCancel:r.retry,cancelText:"取消",confirmText:r.retry?"重试":"确定"});if(r.retry&&t)return i(...u)}}const t=new De({subject:m,code:f,message:g,requestId:d.requestId});throw t.detail=d.result,Ne(_e,{type:Ee,content:t}),t}return Ne(_e,{type:Ee,content:d.result}),d.result},interceptorName:"callObject",getCallbackArgs:function({params:e}={}){return{objectName:n,methodName:c,params:e}}})}})}}(e)}(t),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach((e=>{if(!t[e])return;const n=t[e];t[e]=function(){return n.apply(t,Array.from(arguments))},t[e]=function(e,t){return function(n){let s=!1;if("callFunction"===t){const e=n&&n.type||Z;s=e!==Z}const i="callFunction"===t&&!s,o=this._initPromiseHub.exec();n=n||{};const{success:r,fail:a,complete:l}=Oe(n),c=o.then((()=>s?Promise.resolve():ye(ke(t,"invoke"),n))).then((()=>e.call(this,n))).then((e=>s?Promise.resolve(e):ye(ke(t,"success"),e).then((()=>ye(ke(t,"complete"),e))).then((()=>(i&&Ne(_e,{type:Ie,content:e}),Promise.resolve(e))))),(e=>s?Promise.reject(e):ye(ke(t,"fail"),e).then((()=>ye(ke(t,"complete"),e))).then((()=>(Ne(_e,{type:Ie,content:e}),Promise.reject(e))))));if(!(r||a||l))return c;c.then((e=>{r&&r(e),l&&l(e),i&&Ne(_e,{type:Ie,content:e})}),(e=>{a&&a(e),l&&l(e),i&&Ne(_e,{type:Ie,content:e})}))}}(t[e],e).bind(t)})),t.init=this.init,t}};(()=>{const e=ce;let t={};if(e&&1===e.length)t=e[0],Es=Es.init(t),Es._isDefault=!0;else{const t=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"];let n;n=e&&e.length>0?"应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间":"应用未关联服务空间，请在uniCloud目录右键关联服务空间",t.forEach((e=>{Es[e]=function(){return console.error(n),Promise.reject(new De({code:"SYS_ERR",message:n}))}}))}Object.assign(Es,{get mixinDatacom(){return ks(Es)}}),hs(Es),Es.addInterceptor=fe,Es.removeInterceptor=ge,Es.interceptObject=ve})();var Ts=Es;const As=({name:e,data:t={}})=>new Promise(((n,s)=>{uni.showLoading({title:"加载中..."}),Ts.callFunction({name:e,data:t,success({result:e}){uni.hideLoading(),0===e.code?n(e.data):(uni.showToast({icon:"none",title:e.msg||"未知错误"}),s(new Error(e.msg||"未知错误")))},fail(e){uni.hideLoading(),uni.showToast({icon:"none",title:e.message||"请求失败"}),s(e)}})})),Cs={__name:"love",props:["itemId"],emits:["updateArticle"],setup(t,{emit:n}){const{checkLogin:i}=j();let{itemId:r}=t;const a=e.ref(),l=g();e.onMounted((async()=>{a.value=await i()}));const c=e.computed((()=>a.value&&a.value.article_likes_ids.includes(r)));async function u(e){e.stopPropagation();try{let e=await i();const{msg:n,newUserInfo:s}=await(t={articleId:r,userId:e._id},As({name:"updateLike",data:t}));a.value=s,uni.$emit("updateArticle"),l.commit("updateUserInfo",s),uni.showToast({title:n,icon:"success"})}catch(n){}var t}return(t,n)=>{const i=o(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:"love",onClick:n[0]||(n[0]=e=>u(e))},[e.createVNode(i,{type:c.value?"heart-filled":"heart",color:"$ff6600",size:"24"},null,8,["type"])])}}},Ns=n({__name:"listCard",props:["list"],emits:["saveSearchHistory"],setup(t,{emit:n}){let s=t;const i=n;async function r(){const{_id:e,title:t,author:n,create_time:o,thumbs_up_count:r,browse_count:a}=s.list,l={_id:e,title:t,author:n,create_time:o,thumbs_up_count:r,browse_count:a};i("saveSearchHistory"),uni.navigateTo({url:`/pages/articleDetail/articleDetail?options=${JSON.stringify(l)}`})}return(t,n)=>{const i=o(e.resolveDynamicComponent("love"),Cs);return e.openBlock(),e.createElementBlock("view",null,["base"===e.unref(s).list.mode?(e.openBlock(),e.createElementBlock("view",{key:0,class:"list-card",onClick:r},[e.createElementVNode("view",{class:"list-card-img"},[e.createElementVNode("image",{src:e.unref(s).list.cover[0]?e.unref(s).list.cover[0]:"/static/img/logo.jpeg",mode:"aspectFill"},null,8,["src"])]),e.createElementVNode("view",{class:"list-card-content"},[e.createElementVNode("view",{class:"list-card-content-title"},[e.createElementVNode("text",null,e.toDisplayString(e.unref(s).list.title),1),e.createVNode(i,{itemId:e.unref(s).list._id},null,8,["itemId"])]),e.createElementVNode("view",{class:"list-card-content-desc"},[e.createElementVNode("view",{class:"article-type"},e.toDisplayString(e.unref(s).list.classify),1),e.createElementVNode("view",{class:"count"}," 浏览量："+e.toDisplayString(e.unref(s).list.browse_count),1)])])])):e.createCommentVNode("",!0),"column"===e.unref(s).list.mode?(e.openBlock(),e.createElementBlock("view",{key:1,onClick:r,class:"list-card model-column"},[e.createElementVNode("view",{class:"list-card-top"},[e.createElementVNode("text",null,e.toDisplayString(e.unref(s).list.title),1),e.createVNode(i,{itemId:e.unref(s).list._id},null,8,["itemId"])]),e.createElementVNode("view",{class:"list-card-middle"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).list.cover.slice(0,3),((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"image-container",key:n},[e.createElementVNode("image",{src:t,mode:"aspectFill"},null,8,["src"])])))),128))]),e.createElementVNode("view",{class:"list-card-content-desc list-card-bottom"},[e.createElementVNode("view",{class:"article-type"},e.toDisplayString(e.unref(s).list.classify),1),e.createElementVNode("view",{class:"count"}," 浏览量："+e.toDisplayString(e.unref(s).list.browse_count),1)])])):e.createCommentVNode("",!0),"image"===e.unref(s).list.mode?(e.openBlock(),e.createElementBlock("view",{key:2,onClick:r,class:"list-card model-image"},[e.createElementVNode("view",{class:"list-card-top"},[e.createElementVNode("view",{class:"image-container"},[e.createElementVNode("image",{src:e.unref(s).list.cover[0],mode:"aspectFill"},null,8,["src"])])]),e.createElementVNode("view",{class:"list-card-middle"},[e.createElementVNode("text",null,e.toDisplayString(e.unref(s).list.title),1),e.createVNode(i,{itemId:e.unref(s).list._id},null,8,["itemId"])]),e.createElementVNode("view",{class:"list-card-content-desc list-card-bottom"},[e.createElementVNode("view",{class:"article-type"},e.toDisplayString(e.unref(s).list.classify),1),e.createElementVNode("view",{class:"count"}," 浏览量："+e.toDisplayString(e.unref(s).list.browse_count),1)])])):e.createCommentVNode("",!0)])}}},[["__scopeId","data-v-552cdcef"]]),Ls=["{","}"];const Ps=/^(?:\d)+/,Bs=/^(?:\w)+/;const Os="zh-Hans",Ds="zh-Hant",Rs="en",Vs=Object.prototype.hasOwnProperty,Ms=(e,t)=>Vs.call(e,t),Fs=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,n=Ls){if(!t)return[e];let s=this._caches[e];return s||(s=function(e,[t,n]){const s=[];let i=0,o="";for(;i<e.length;){let r=e[i++];if(r===t){o&&s.push({type:"text",value:o}),o="";let t="";for(r=e[i++];void 0!==r&&r!==n;)t+=r,r=e[i++];const a=r===n,l=Ps.test(t)?"list":a&&Bs.test(t)?"named":"unknown";s.push({value:t,type:l})}else o+=r}return o&&s.push({type:"text",value:o}),s}(e,n),this._caches[e]=s),function(e,t){const n=[];let s=0;const i=Array.isArray(t)?"list":(o=t,null!==o&&"object"==typeof o?"named":"unknown");var o;if("unknown"===i)return n;for(;s<e.length;){const o=e[s];switch(o.type){case"text":n.push(o.value);break;case"list":n.push(t[parseInt(o.value,10)]);break;case"named":"named"===i&&n.push(t[o.value])}s++}return n}(s,t)}};function $s(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return Os;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?Os:e.indexOf("-hant")>-1?Ds:(n=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==n.indexOf(e)))?Ds:Os);var n;let s=[Rs,"fr","es"];t&&Object.keys(t).length>0&&(s=Object.keys(t));const i=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,s);return i||void 0}class Us{constructor({locale:e,fallbackLocale:t,messages:n,watcher:s,formater:i}){this.locale=Rs,this.fallbackLocale=Rs,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=i||Fs,this.messages=n||{},this.setLocale(e||Rs),s&&this.watchLocale(s)}setLocale(e){const t=this.locale;this.locale=$s(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,n=!0){const s=this.messages[e];s?n?Object.assign(s,t):Object.keys(t).forEach((e=>{Ms(s,e)||(s[e]=t[e])})):this.messages[e]=t}f(e,t,n){return this.formater.interpolate(e,t,n).join("")}t(e,t,n){let s=this.message;return"string"==typeof t?(t=$s(t,this.messages))&&(s=this.messages[t]):n=t,Ms(s,e)?this.formater.interpolate(s[e],n).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}const js={en:{"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},"zh-Hans":{"uni-load-more.contentdown":"上拉显示更多","uni-load-more.contentrefresh":"正在加载...","uni-load-more.contentnomore":"没有更多数据了"},"zh-Hant":{"uni-load-more.contentdown":"上拉顯示更多","uni-load-more.contentrefresh":"正在加載...","uni-load-more.contentnomore":"沒有更多數據了"}};let zs;setTimeout((()=>{zs=uni.getSystemInfoSync().platform}),16);const{t:qs}=function(e,t={},n,s){if("string"!=typeof e){const n=[t,e];e=n[0],t=n[1]}"string"!=typeof e&&(e="undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():Rs),"string"!=typeof n&&(n="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||Rs);const i=new Us({locale:e,fallbackLocale:n,messages:t,watcher:s});let o=(e,t)=>{if("function"!=typeof getApp)o=function(e,t){return i.t(e,t)};else{let e=!1;o=function(t,n){const s=getApp().$vm;return s&&(s.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(s,i))),i.t(t,n)}}return o(e,t)};return{i18n:i,f:(e,t,n)=>i.f(e,t,n),t:(e,t)=>o(e,t),add:(e,t,n=!0)=>i.add(e,t,n),watch:e=>i.watchLocale(e),getLocale:()=>i.getLocale(),setLocale:e=>i.setLocale(e)}}(js);const Hs=n({name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:()=>({contentdown:"",contentrefresh:"",contentnomore:""})},showText:{type:Boolean,default:!0}},data:()=>({webviewHide:!1,platform:zs,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}),computed:{iconSnowWidth(){return 2*(Math.floor(this.iconSize/24)||1)},contentdownText(){return this.contentText.contentdown||qs("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||qs("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||qs("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1].$getAppWebview();t.addEventListener("hide",(()=>{this.webviewHide=!0})),t.addEventListener("show",(()=>{this.webviewHide=!1}))},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}},[["render",function(t,n,s,i,o,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-load-more",onClick:n[0]||(n[0]=(...e)=>r.onClick&&r.onClick(...e))},[!o.webviewHide&&("circle"===s.iconType||"auto"===s.iconType&&"android"===o.platform)&&"loading"===s.status&&s.showIcon?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle({width:s.iconSize+"px",height:s.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--android-MP"},[e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:s.color,borderTopWidth:s.iconSize/12})},null,4),e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:s.color,borderTopWidth:s.iconSize/12})},null,4),e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:s.color,borderTopWidth:s.iconSize/12})},null,4)],4)):!o.webviewHide&&"loading"===s.status&&s.showIcon?(e.openBlock(),e.createElementBlock("view",{key:1,style:e.normalizeStyle({width:s.iconSize+"px",height:s.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--ios-H5"},[e.createElementVNode("image",{src:o.imgBase64,mode:"widthFix"},null,8,["src"])],4)):e.createCommentVNode("",!0),s.showText?(e.openBlock(),e.createElementBlock("text",{key:2,class:"uni-load-more__text",style:e.normalizeStyle({color:s.color})},e.toDisplayString("more"===s.status?r.contentdownText:"loading"===s.status?r.contentrefreshText:r.contentnomoreText),5)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-a7e112cc"]]),Js=e=>As({name:"getLobarList",data:e}),Ws=n({__name:"ListItem",props:["articleList","loadData","isLoadMore","saveSearchHistory"],emits:["loadMore"],setup(t,{emit:n}){let s=t,i=n,r=e.ref("loading"),a=e.computed((()=>!1!==s.isLoadMore||s.isLoadMore));function l(){i("loadMore")}return e.watch((()=>{var e;return null==(e=s.loadData)?void 0:e.loading}),((e,t)=>{r.value=e})),(t,n)=>{const i=o(e.resolveDynamicComponent("listCard"),Ns),c=o(e.resolveDynamicComponent("uni-load-more"),Hs);return e.openBlock(),e.createElementBlock("view",{class:"list-scorll-container"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"list-scroll",onScrolltolower:l},[e.createElementVNode("view",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).articleList,(t=>(e.openBlock(),e.createBlock(i,{onSaveSearchHistory:e.unref(s).saveSearchHistory,key:t._id,list:t},null,8,["onSaveSearchHistory","list"])))),128))]),e.unref(a)?(e.openBlock(),e.createBlock(c,{key:0,status:e.unref(r)},null,8,["status"])):e.createCommentVNode("",!0)],32)])}}},[["__scopeId","data-v-1852fb8a"]]),Gs={__name:"ArticleList",props:["artList","activeIndex"],emits:["changeIndex"],setup(t,{emit:n}){let s=t,i=n,r=e.ref({}),a=e.ref({}),l=e.ref();e.ref(1);let c=e.ref(6);function u(e){const t=e.detail.current;i("changeIndex",t)}async function d(e){a.value[s.activeIndex]||(a.value[s.activeIndex]={page:1,loading:"loading,",total:0});let{articleList:t,total:n}=await(i={classify:e.name,page:a.value[s.activeIndex].page,pageSize:c.value},As({name:"get_article_list",data:i}));var i;let o=r.value[s.activeIndex]||[];JSON.stringify(t)!==JSON.stringify(o)&&o.push(...t),r.value[s.activeIndex]=o,a.value[s.activeIndex].total=n}function h(){if(a.value[s.activeIndex].total===r.value[s.activeIndex].length)return a.value[s.activeIndex]={...a.value[s.activeIndex],loading:"noMore"},void e.nextTick();a.value[s.activeIndex].page++,d(l.value)}return e.watch([()=>s.artList,()=>s.activeIndex],(e=>{l.value=e[0][e[1]],d(l.value)}),{immediate:!0}),(t,n)=>{const i=o(e.resolveDynamicComponent("ListItem"),Ws);return e.openBlock(),e.createElementBlock("swiper",{class:"swiper-container",current:e.unref(s).activeIndex,onChange:u},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).artList,(t=>(e.openBlock(),e.createElementBlock("swiper-item",{class:"swiper-item",key:t._id},[e.createVNode(i,{loadData:e.unref(a)[e.unref(s).activeIndex],onLoadMore:h,articleList:e.unref(r)[e.unref(s).activeIndex],isLoadMore:!1},null,8,["loadData","articleList"])])))),128))],40,["current"])}}},Ks=n(Gs,[["__scopeId","data-v-36cd0cdc"]]),Qs=n({__name:"index",setup(t){let n=e.ref(0);const s=g(),i=e.ref();function r(e){n.value=e}const l=e.ref(),{checkLogin:c}=j();return a((async()=>{await c()})),e.onMounted((async()=>{l.value=await Js(),l.value=[{name:"全部"},...l.value],s.commit("setlabelList",l.value)})),e.watch((()=>s.state.labelListItem),((e,t)=>{i.value=[{name:"全部"},...e]}),{immediate:!0,deep:!0}),(t,s)=>{const a=o(e.resolveDynamicComponent("NavBar"),u),c=o(e.resolveDynamicComponent("TabBar"),z),d=o(e.resolveDynamicComponent("ArticleList"),Ks);return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createVNode(a),e.createVNode(c,{labeList:i.value.length>1?i.value:l.value,activeIndex:e.unref(n),onChangeIndex:r},null,8,["labeList","activeIndex"]),e.createVNode(d,{artList:i.value.length>1?i.value:l.value,activeIndex:e.unref(n),class:"list-container",onChangeIndex:r},null,8,["artList","activeIndex"])])}}},[["__scopeId","data-v-0b00c12e"]]),Zs=n({__name:"AuthorList",props:{authorList:Array},setup(t){const n=t;return(t,s)=>(e.openBlock(),e.createElementBlock("view",{class:"list-scroll-container"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"list-scroll"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.authorList,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"author-card",key:t._id},[e.createElementVNode("view",{class:"author-image-container"},[e.createElementVNode("image",{src:t.avatar?t.avatar:"../../static/img/info.jpg",alt:""},null,8,["src"])]),e.createElementVNode("view",{class:"author-desc-container"},[e.createElementVNode("view",{class:"author-info"},e.toDisplayString(t.author_name),1),e.createElementVNode("view",{class:"author-info-bottom"},[e.createElementVNode("view",{class:"info-left"},e.toDisplayString(t.professional),1),e.createElementVNode("view",{class:"info-right"},[e.createElementVNode("view",{class:"desc"}," 发帖:"+e.toDisplayString(t.article_ids.length),1),e.createElementVNode("view",{class:"desc"}," 粉丝："+e.toDisplayString(t.fans_count),1)])])])])))),128))])]))}},[["__scopeId","data-v-b9b8639c"]]),Ys=n({__name:"follow",setup(t){const{checkLogin:n}=j(),s=g(),i=e.ref([]),r=e.ref(!0),l=e.ref(!1),c=e.ref(!1),u=e.ref(0),d=e.ref([]);async function h(){const e=await(t={userId:s.state.userInfo._id},As({name:"getArticFloow",data:t}));var t;0==e.length&&(l.value=!0),r.value=!1,i.value=e}async function p(){const e=await(t={userId:s.state.userInfo._id},As({name:"getAuthorLists",data:t}));var t;0==e.length&&(c.value=!0),d.value=e}return uni.$on("updateArticle",(()=>{h()})),uni.$on("updatefellow",(()=>{p()})),a((async()=>{await n(),await h(),await p()})),(t,n)=>{const s=o(e.resolveDynamicComponent("ListItem"),Ws);return e.openBlock(),e.createElementBlock("view",{class:"follow-container"},[e.createElementVNode("view",{class:"follow-tab"},[e.createElementVNode("view",{class:"follow-tab-box"},[e.createElementVNode("view",{class:e.normalizeClass(["follow-tab-item",{active:0===u.value}]),onClick:n[0]||(n[0]=e=>u.value=0)},"文章",2),e.createElementVNode("view",{class:e.normalizeClass(["follow-tab-item",{active:1===u.value}]),onClick:n[1]||(n[1]=e=>u.value=1)},"作者",2)])]),e.createElementVNode("view",{class:"follow-list-container"},[e.createElementVNode("swiper",{class:"follow-list-swiper",current:u.value,onChange:n[2]||(n[2]=e=>u.value=e.detail.current)},[e.createElementVNode("swiper-item",null,[i.value.length?(e.openBlock(),e.createBlock(s,{key:0,isLoadMore:r.value,articleList:i.value},null,8,["isLoadMore","articleList"])):e.createCommentVNode("",!0),l.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"no-data"},"暂无收藏的文章")):e.createCommentVNode("",!0)]),e.createElementVNode("swiper-item",null,[e.createVNode(Zs,{authorList:d.value},null,8,["authorList"]),c.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"no-data"},"暂无收藏的文章")):e.createCommentVNode("",!0)])],40,["current"])])])}}},[["__scopeId","data-v-c77b60d3"]]),Xs=n({__name:"self",setup(t){const n=e.ref("1.0.0"),r=e.ref(!1),l=g();function c(){uni.navigateTo({url:"/pages/userinfo/login/login"})}function u(){l.commit("updateUserInfo",null),uni.navigateTo({url:"/pages/index/index"})}function d(){uni.navigateTo({url:"/pages/myArticle/myArticle"})}function h(){uni.navigateTo({url:"/pages/feedback/feedback"})}function p(){uni.showLoading({title:"下载中，请稍后"}),plus.downloader.createDownload(downLoadLinkUrl.value,{},(function(e,t){uni.hideLoading({}),200==t?plus.runtime.install(plus.io.convertLocalFileSystemURL(e.filename),{},{},(function(e){uni.showToast({title:"安装失败",duration:1500,icon:"none"})})):uni.showToast({title:"更新失败",duration:1500,icon:"none"})})).start()}function m(){uni.chooseImage({count:1,success:async e=>{const t=await async function(e,t){const n="avatar/"+t;return(await Ts.uploadFile({filePath:e,cloudPath:n})).fileID}(e.tempFiles[0].path,e.tempFiles[0].name);let n=await Ts.getTempFileURL({fileList:[t]});i("log","at pages/self/self.vue:179",n.fileList[0].tempFileURL),await async function(e){await(t={userId:l.state.userInfo._id,filePath:e},As({name:"AvatarUpdate",data:t})),uni.showToast({title:"上传成功"}),l.commit("updateUserInfo",{...l.state.userInfo,avatar:e});var t}(n.fileList[0].tempFileURL)}})}return a((()=>{uni.getSystemInfo({success:e=>{"android"===e.platform&&plus.runtime.getProperty(plus.runtime.appid,(e=>{n.value=e.version,async function(){const{version:e,downLoadLinkUrl:t}=await As({name:"get_current_version",data:s});var s;e>n.value&&(r.value=!0,t.value=t)}()}))}})})),(t,i)=>{const a=o(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(l).state.userInfo?(e.openBlock(),e.createElementBlock("view",{key:0,class:"my-header"},[e.createElementVNode("view",{class:"my-header-background"},[e.createElementVNode("image",{src:e.unref(l).state.userInfo.avatar,mode:"aspectFill"},null,8,["src"])]),e.createElementVNode("view",{class:"my-header-logo"},[e.createElementVNode("view",{class:"my-header-logo-box",onClick:m},[e.createElementVNode("image",{src:e.unref(l).state.userInfo.avatar,mode:"aspectFill"},null,8,["src"])]),e.createElementVNode("text",{onClick:i[0]||(i[0]=(...e)=>t.changeName&&t.changeName(...e)),class:"user-name"},e.toDisplayString(e.unref(l).state.userInfo.author_name),1)]),e.createElementVNode("view",{class:"my-header-info"},[e.createElementVNode("view",{class:"my-header-info-box"},[e.createElementVNode("text",{class:"my-header-info-title"},"被关注"),e.createElementVNode("text",null,e.toDisplayString(e.unref(l).state.userInfo.follow_count),1)]),e.createElementVNode("view",{class:"my-header-info-box"},[e.createElementVNode("text",{class:"my-header-info-title"},"粉丝"),e.createElementVNode("text",null,e.toDisplayString(e.unref(l).state.userInfo.fans_count),1)]),e.createElementVNode("view",{class:"my-header-info-box"},[e.createElementVNode("text",{class:"my-header-info-title"},"积分"),e.createElementVNode("text",null,e.toDisplayString(e.unref(l).state.userInfo.integral_count||0),1)])])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"my-content"},[e.unref(l).state.userInfo?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"my-content-list",onClick:c},[e.createElementVNode("view",{class:"my-content-list-title"},[e.createElementVNode("image",{class:"company-logo",src:"/static/img/logo.jpeg",mode:"aspectFill"}),e.createElementVNode("text",null,"HI，您尚未登录,请点击登录")]),e.createVNode(a,{type:"arrowright",size:"14",color:"#666"})])),e.createElementVNode("view",{class:"my-content-list",onClick:d},[e.createElementVNode("view",{class:"my-content-list-title"},[e.createVNode(a,{class:"icons",type:"contact",size:"16",color:"#666"}),e.createElementVNode("text",null,"我的文章")]),e.createVNode(a,{type:"arrowright",size:"14",color:"#666"})]),e.createElementVNode("view",{class:"my-content-list",onClick:h},[e.createElementVNode("view",{class:"my-content-list-title"},[e.createVNode(a,{class:"icons",type:"help",size:"16",color:"#666"}),e.createElementVNode("text",null,"意见反馈")]),e.createVNode(a,{type:"arrowright",size:"14",color:"#666"})]),e.createElementVNode("view",{class:"my-content-list",onClick:i[1]||(i[1]=e=>r.value&&p)},[e.createElementVNode("view",{class:"my-content-list-title"},[e.createVNode(a,{class:"icons",type:"paperclip",size:"16",color:"#666"}),e.createElementVNode("view",{class:"version-container"},[e.createElementVNode("text",null,[e.createTextVNode(" 当前版本 "),r.value?(e.openBlock(),e.createElementBlock("text",{key:0,class:"new-version-tip"},"(点击下载最新版本)")):e.createCommentVNode("",!0)]),e.createElementVNode("text",{class:"version"},e.toDisplayString(n.value),1)])]),e.createVNode(a,{type:"arrowright",size:"14",color:"#666"})]),e.unref(l).state.userInfo?(e.openBlock(),e.createElementBlock("button",{key:1,type:"warn",class:"sign-out",onClick:u},"退出")):e.createCommentVNode("",!0)])],64)}}},[["__scopeId","data-v-90fc1658"]]),ei=n({__name:"serch",setup(t){const n=e.ref(!0),s=e.ref(""),o=e.ref([]),r=e.ref(!1),a=e.ref(!0),l=g();function c(){i("log","at pages/serch/serch.vue:55",s.value,"asdasd"),l.commit("setHistoryList",s.value)}function d(e){s.value=e}async function h(){if(a.value=!1,!s.value)return a.value=!0,void(o.value=[]);const{articleList:e}=await(t={searchVal:s.value},As({name:"get_search_data",data:t}));var t;o.value=e}return(t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"search-container"},[e.createVNode(u,{isSearch:n.value,onSendSearchData:h,onUpdateValue:d,serchValue:s.value},null,8,["isSearch","serchValue"]),a.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"serch-history"},[e.createElementVNode("view",{class:"serch-container"},[e.createElementVNode("view",{class:"serach-header"},[e.createElementVNode("text",{class:"history-text"},"搜索历史"),e.createElementVNode("text",{class:"clear",onClick:i[0]||(i[0]=t=>e.unref(l).commit("clearData"))},"清空")])]),e.unref(l).state.historyList.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"serch-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l).state.historyList,((t,n)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>(d(t),void h()),class:"history-content-item",key:t},e.toDisplayString(t),9,["onClick"])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"no-data"}," 当前没有搜索历史 "))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"serach-list-container"},[o.value.length>=0?(e.openBlock(),e.createBlock(Ws,{key:0,articleList:o.value,saveSearchHistory:c,isLoadMore:r.value},null,8,["articleList","isLoadMore"])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"no-data"}," 没有搜索到数据 "))]))]))}},[["__scopeId","data-v-a9b4182e"]]);const ti=n({name:"uniFormsItem",options:{virtualHost:!0},provide(){return{uniFormItem:this}},inject:{form:{from:"uniForm",default:null}},props:{rules:{type:Array,default:()=>null},name:{type:[String,Array],default:""},required:{type:Boolean,default:!1},label:{type:String,default:""},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:""},errorMessage:{type:[String,Boolean],default:""},leftIcon:String,iconColor:{type:String,default:"#606266"}},data:()=>({errMsg:"",userRules:null,localLabelAlign:"left",localLabelWidth:"70px",localLabelPos:"left",border:!1,isFirstBorder:!1}),computed:{msg(){return this.errorMessage||this.errMsg}},watch:{"form.formRules"(e){this.init()},"form.labelWidth"(e){this.localLabelWidth=this._labelWidthUnit(e)},"form.labelPosition"(e){this.localLabelPos=this._labelPosition()},"form.labelAlign"(e){}},created(){this.init(!0),this.name&&this.form&&this.$watch((()=>this.form._getDataValue(this.name,this.form.localData)),((e,t)=>{if(!this.form._isEqual(e,t)){const t=this.itemSetValue(e);this.onFieldChange(t,!1)}}),{immediate:!1})},unmounted(){this.__isUnmounted=!0,this.unInit()},methods:{setRules(e=null){this.userRules=e,this.init(!1)},setValue(){},async onFieldChange(e,t=!0){const{formData:n,localData:s,errShowType:i,validateCheck:o,validateTrigger:r,_isRequiredField:a,_realName:l}=this.form,c=l(this.name);e||(e=this.form.formData[c]);const u=this.itemRules.rules&&this.itemRules.rules.length;if(!this.validator||!u||0===u)return;const d=a(this.itemRules.rules||[]);let h=null;return"bind"===r||t?(h=await this.validator.validateUpdate({[c]:e},n),d||void 0!==e&&""!==e||(h=null),h&&h.errorMessage?("undertext"===i&&(this.errMsg=h?h.errorMessage:""),"toast"===i&&uni.showToast({title:h.errorMessage||"校验错误",icon:"none"}),"modal"===i&&uni.showModal({title:"提示",content:h.errorMessage||"校验错误"})):this.errMsg="",o(h||null)):this.errMsg="",h||null},init(e=!1){const{validator:t,formRules:n,childrens:s,formData:i,localData:o,_realName:r,labelWidth:a,_getDataValue:l,_setDataValue:c}=this.form||{};if(this.localLabelAlign=this._justifyContent(),this.localLabelWidth=this._labelWidthUnit(a),this.localLabelPos=this._labelPosition(),this.form&&e&&s.push(this),!t||!n)return;this.form.isFirstBorder||(this.form.isFirstBorder=!0,this.isFirstBorder=!0),this.group&&(this.group.isFirstBorder||(this.group.isFirstBorder=!0,this.isFirstBorder=!0)),this.border=this.form.border;const u=r(this.name),d=this.userRules||this.rules;"object"==typeof n&&d&&(n[u]={rules:d},t.updateSchema(n));const h=n[u]||{};this.itemRules=h,this.validator=t,this.itemSetValue(l(this.name,o))},unInit(){if(this.form){const{childrens:e,formData:t,_realName:n}=this.form;e.forEach(((e,s)=>{e===this&&(this.form.childrens.splice(s,1),delete t[n(e.name)])}))}},itemSetValue(e){const t=this.form._realName(this.name),n=this.itemRules.rules||[],s=this.form._getValue(t,e,n);return this.form._setDataValue(t,this.form.formData,s),s},clearValidate(){this.errMsg=""},_isRequired(){return this.required},_justifyContent(){if(this.form){const{labelAlign:e}=this.form;let t=this.labelAlign?this.labelAlign:e;if("left"===t)return"flex-start";if("center"===t)return"center";if("right"===t)return"flex-end"}return"flex-start"},_labelWidthUnit(e){return this.num2px(this.labelWidth?this.labelWidth:e||(this.label?70:"auto"))},_labelPosition(){return this.form&&this.form.labelPosition||"left"},isTrigger:(e,t,n)=>"submit"!==e&&e?"bind":void 0===e?"bind"!==t?t?"submit":""===n?"bind":"submit":"bind":"submit",num2px:e=>"number"==typeof e?`${e}px`:e}},[["render",function(t,n,s,i,o,r){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-forms-item",["is-direction-"+o.localLabelPos,o.border?"uni-forms-item--border":"",o.border&&o.isFirstBorder?"is-first-border":""]])},[e.renderSlot(t.$slots,"label",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-forms-item__label",{"no-label":!s.label&&!s.required}]),style:e.normalizeStyle({width:o.localLabelWidth,justifyContent:o.localLabelAlign})},[s.required?(e.openBlock(),e.createElementBlock("text",{key:0,class:"is-required"},"*")):e.createCommentVNode("",!0),e.createElementVNode("text",null,e.toDisplayString(s.label),1)],6)]),!0),e.createElementVNode("view",{class:"uni-forms-item__content"},[e.renderSlot(t.$slots,"default",{},void 0,!0),e.createElementVNode("view",{class:e.normalizeClass(["uni-forms-item__error",{"msg--active":r.msg}])},[e.createElementVNode("text",null,e.toDisplayString(r.msg),1)],2)])],2)}],["__scopeId","data-v-7b97b15c"]]),ni=n({__name:"SendCode",props:["form","sendCodeData"],setup(t){let{form:n,sendCodeData:s}=t;e.onUnmounted((()=>{clearInterval(o.value),r.value=6,o.value=null,a.value=!1}));let o=e.ref(null),r=e.ref(6),a=e.ref(!1);async function l(){const{phone:e}=await n.validateField(["phone"]);a.value||(i("log","at components/SendCode/SendCode.vue:49",r.value),a.value=!0,o.value=setInterval((()=>{if(1==r.value)return clearInterval(o.value),r.value=6,o.value=null,void(a.value=!1);r.value--,i("log","at components/SendCode/SendCode.vue:60",r.value)}),1e3));const t=await(l={phone:e},As({name:"phone",data:l}));var l;uni.showToast({title:"发送成功，请注意查收验证码",icon:"none"}),s(t)}return(t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"code-container"},[e.createElementVNode("view",{class:"vCode-btn",onClick:l},e.toDisplayString(e.unref(a)?`${e.unref(r)}后重新获取`:"获取验证码"),1)]))}},[["__scopeId","data-v-ed15b470"]]);var si={email:/^\S+?@\S+?\.\S+?$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")};const ii={int:"integer",bool:"boolean",double:"number",long:"number",password:"string"};function oi(e,t=""){["label"].forEach((t=>{void 0===e[t]&&(e[t]="")}));let n=t;for(let s in e){let t=new RegExp("{"+s+"}");n=n.replace(t,e[s])}return n}const ri={integer:e=>ri.number(e)&&parseInt(e,10)===e,string:e=>"string"==typeof e,number:e=>!isNaN(e)&&"number"==typeof e,boolean:function(e){return"boolean"==typeof e},float:function(e){return ri.number(e)&&!ri.integer(e)},array:e=>Array.isArray(e),object:e=>"object"==typeof e&&!ri.array(e),date:e=>e instanceof Date,timestamp(e){return!(!this.integer(e)||Math.abs(e).toString().length>16)},file:e=>"string"==typeof e.url,email:e=>"string"==typeof e&&!!e.match(si.email)&&e.length<255,url:e=>"string"==typeof e&&!!e.match(si.url),pattern(e,t){try{return new RegExp(e).test(t)}catch(Ye){return!1}},method:e=>"function"==typeof e,idcard:e=>"string"==typeof e&&!!e.match(si.idcard),"url-https"(e){return this.url(e)&&e.startsWith("https://")},"url-scheme":e=>e.startsWith("://"),"url-web":e=>!1};const ai={required:(e,t,n)=>e.required&&function(e,t){return null==e||"string"==typeof e&&!e||!(!Array.isArray(e)||e.length)||"object"===t&&!Object.keys(e).length}(t,e.format||typeof t)?oi(e,e.errorMessage||n.required):null,range(e,t,n){const{range:s,errorMessage:i}=e;let o=new Array(s.length);for(let a=0;a<s.length;a++){const e=s[a];ri.object(e)&&void 0!==e.value?o[a]=e.value:o[a]=e}let r=!1;return Array.isArray(t)?r=new Set(t.concat(o)).size===o.length:o.indexOf(t)>-1&&(r=!0),r?null:oi(e,i||n.enum)},rangeNumber(e,t,n){if(!ri.number(t))return oi(e,e.errorMessage||n.pattern.mismatch);let{minimum:s,maximum:i,exclusiveMinimum:o,exclusiveMaximum:r}=e,a=o?t<=s:t<s,l=r?t>=i:t>i;return void 0!==s&&a?oi(e,e.errorMessage||n.number[o?"exclusiveMinimum":"minimum"]):void 0!==i&&l?oi(e,e.errorMessage||n.number[r?"exclusiveMaximum":"maximum"]):void 0!==s&&void 0!==i&&(a||l)?oi(e,e.errorMessage||n.number.range):null},rangeLength(e,t,n){if(!ri.string(t)&&!ri.array(t))return oi(e,e.errorMessage||n.pattern.mismatch);let s=e.minLength,i=e.maxLength,o=t.length;return void 0!==s&&o<s?oi(e,e.errorMessage||n.length.minLength):void 0!==i&&o>i?oi(e,e.errorMessage||n.length.maxLength):void 0!==s&&void 0!==i&&(o<s||o>i)?oi(e,e.errorMessage||n.length.range):null},pattern:(e,t,n)=>ri.pattern(e.pattern,t)?null:oi(e,e.errorMessage||n.pattern.mismatch),format(e,t,n){var s=Object.keys(ri),i=ii[e.format]?ii[e.format]:e.format||e.arrayType;return s.indexOf(i)>-1&&!ri[i](t)?oi(e,e.errorMessage||n.typeError):null},arrayTypeFormat(e,t,n){if(!Array.isArray(t))return oi(e,e.errorMessage||n.typeError);for(let s=0;s<t.length;s++){const i=t[s];let o=this.format(e,i,n);if(null!==o)return o}return null}};class li extends class{constructor(e){this._message=e}async validateRule(e,t,n,s,i){var o=null;let r=t.rules;if(r.findIndex((e=>e.required))<0){if(null==n)return o;if("string"==typeof n&&!n.length)return o}var a=this._message;if(void 0===r)return a.default;for(var l=0;l<r.length;l++){let c=r[l],u=this._getValidateType(c);if(Object.assign(c,{label:t.label||`["${e}"]`}),ai[u]&&null!=(o=ai[u](c,n,a)))break;if(c.validateExpr){let e=Date.now();if(!1===c.validateExpr(n,i,e)){o=this._getMessage(c,c.errorMessage||this._message.default);break}}if(c.validateFunction&&null!==(o=await this.validateFunction(c,n,s,i,u)))break}return null!==o&&(o=a.TAG+o),o}async validateFunction(e,t,n,s,i){let o=null;try{let r=null;const a=await e.validateFunction(e,t,s||n,(e=>{r=e}));(r||"string"==typeof a&&a||!1===a)&&(o=this._getMessage(e,r||a,i))}catch(Ye){o=this._getMessage(e,Ye.message,i)}return o}_getMessage(e,t,n){return oi(e,t||e.errorMessage||this._message[n]||t.default)}_getValidateType(e){var t="";return e.required?t="required":e.format?t="format":e.arrayType?t="arrayTypeFormat":e.range?t="range":void 0!==e.maximum||void 0!==e.minimum?t="rangeNumber":void 0!==e.maxLength||void 0!==e.minLength?t="rangeLength":e.pattern?t="pattern":e.validateFunction&&(t="validateFunction"),t}}{constructor(e,t){super(li.message),this._schema=e,this._options=t||null}updateSchema(e){this._schema=e}async validate(e,t){let n=this._checkFieldInSchema(e);return n||(n=await this.invokeValidate(e,!1,t)),n.length?n[0]:null}async validateAll(e,t){let n=this._checkFieldInSchema(e);return n||(n=await this.invokeValidate(e,!0,t)),n}async validateUpdate(e,t){let n=this._checkFieldInSchema(e);return n||(n=await this.invokeValidateUpdate(e,!1,t)),n.length?n[0]:null}async invokeValidate(e,t,n){let s=[],i=this._schema;for(let o in i){let r=i[o],a=await this.validateRule(o,r,e[o],e,n);if(null!=a&&(s.push({key:o,errorMessage:a}),!t))break}return s}async invokeValidateUpdate(e,t,n){let s=[];for(let i in e){let o=await this.validateRule(i,this._schema[i],e[i],e,n);if(null!=o&&(s.push({key:i,errorMessage:o}),!t))break}return s}_checkFieldInSchema(e){var t=Object.keys(e),n=Object.keys(this._schema);if(new Set(t.concat(n)).size===n.length)return"";var s=t.filter((e=>n.indexOf(e)<0));return[{key:"invalid",errorMessage:oi({field:JSON.stringify(s)},li.message.TAG+li.message.defaultInvalid)}]}}li.message=new function(){return{TAG:"",default:"验证错误",defaultInvalid:"提交的字段{field}在数据库中并不存在",validateFunction:"验证无效",required:"{label}必填",enum:"{label}超出范围",timestamp:"{label}格式无效",whitespace:"{label}不能为空",typeError:"{label}类型无效",date:{format:"{label}日期{value}格式无效",parse:"{label}日期无法解析,{value}无效",invalid:"{label}日期{value}无效"},length:{minLength:"{label}长度不能少于{minLength}",maxLength:"{label}长度不能超过{maxLength}",range:"{label}必须介于{minLength}和{maxLength}之间"},number:{minimum:"{label}不能小于{minimum}",maximum:"{label}不能大于{maximum}",exclusiveMinimum:"{label}不能小于等于{minimum}",exclusiveMaximum:"{label}不能大于等于{maximum}",range:"{label}必须介于{minimum}and{maximum}之间"},pattern:{mismatch:"{label}格式不匹配"}}};const ci=(e,t,n)=>{const s=n.find((e=>{return e.format&&("int"===(t=e.format)||"double"===t||"number"===t||"timestamp"===t);var t})),i=n.find((e=>e.format&&"boolean"===e.format||"bool"===e.format));return s&&(t=t||0===t?gi(Number(t))?Number(t):t:null),i&&(t=!!yi(t)&&t),t},ui=(e,t)=>fi(t,e),di=(e,t={})=>{const n=mi(e);if("object"==typeof n&&Array.isArray(n)&&n.length>1){return n.reduce(((e,t)=>e+`#${t}`),"_formdata_")}return n[0]||e},hi=e=>{let t=e.replace("_formdata_#","");return t=t.split("#").map((e=>gi(e)?Number(e):e)),t},pi=(e,t,n)=>("object"!=typeof e||mi(t).reduce(((e,t,s,i)=>s===i.length-1?(e[t]=n,null):(t in e||(e[t]=/^[0-9]{1,}$/.test(i[s+1])?[]:{}),e[t])),e),e);function mi(e){return Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,"").split(".")}const fi=(e,t,n="undefined")=>{let s=mi(t).reduce(((e,t)=>(e||{})[t]),e);return s&&void 0===s?n:s},gi=e=>!isNaN(Number(e)),yi=e=>"boolean"==typeof e;const ki=n({name:"uniForms",emits:["validate","submit"],options:{virtualHost:!0},props:{value:{type:Object,default:()=>null},modelValue:{type:Object,default:()=>null},model:{type:Object,default:()=>null},rules:{type:Object,default:()=>({})},errShowType:{type:String,default:"undertext"},validateTrigger:{type:String,default:"submit"},labelPosition:{type:String,default:"left"},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:"left"},border:{type:Boolean,default:!1}},provide(){return{uniForm:this}},data:()=>({formData:{},formRules:{}}),computed:{localData(){const e=this.model||this.modelValue||this.value;return e?(t=e,JSON.parse(JSON.stringify(t))):{};var t}},watch:{rules:{handler:function(e,t){this.setRules(e)},deep:!0,immediate:!0}},created(){getApp().$vm.$.appContext.config.globalProperties.binddata||(getApp().$vm.$.appContext.config.globalProperties.binddata=function(e,t,n){if(n)this.$refs[n].setValue(e,t);else{let n;for(let e in this.$refs){const t=this.$refs[e];if(t&&t.$options&&"uniForms"===t.$options.name){n=t;break}}if(!n)return i("error","at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:182","当前 uni-froms 组件缺少 ref 属性");n.setValue(e,t)}}),this.childrens=[],this.inputChildrens=[],this.setRules(this.rules)},methods:{setRules(e){this.formRules=Object.assign({},this.formRules,e),this.validator=new li(e)},setValue(e,t){let n=this.childrens.find((t=>t.name===e));return n?(this.formData[e]=ci(0,t,this.formRules[e]&&this.formRules[e].rules||[]),n.onFieldChange(this.formData[e])):null},validate(e,t){return this.checkAll(this.formData,e,t)},validateField(e=[],t){e=[].concat(e);let n={};return this.childrens.forEach((t=>{const s=di(t.name);-1!==e.indexOf(s)&&(n=Object.assign({},n,{[s]:this.formData[s]}))})),this.checkAll(n,[],t)},clearValidate(e=[]){e=[].concat(e),this.childrens.forEach((t=>{if(0===e.length)t.errMsg="";else{const n=di(t.name);-1!==e.indexOf(n)&&(t.errMsg="")}}))},submit(e,t,n){for(let s in this.dataValue){this.childrens.find((e=>e.name===s))&&void 0===this.formData[s]&&(this.formData[s]=this._getValue(s,this.dataValue[s]))}return n||i("warn","at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:289","submit 方法即将废弃，请使用validate方法代替！"),this.checkAll(this.formData,e,t,"submit")},async checkAll(e,t,n,s){if(!this.validator)return;let i,o=[];for(let c in e){const e=this.childrens.find((e=>di(e.name)===c));e&&o.push(e)}n||"function"!=typeof t||(n=t),!n&&"function"!=typeof n&&Promise&&(i=new Promise(((e,t)=>{n=function(n,s){n?t(n):e(s)}})));let r=[],a=JSON.parse(JSON.stringify(e));for(let c in o){const e=o[c];let t=di(e.name);const n=await e.onFieldChange(a[t]);if(n&&(r.push(n),"toast"===this.errShowType||"modal"===this.errShowType))break}Array.isArray(r)&&0===r.length&&(r=null),Array.isArray(t)&&t.forEach((e=>{let t=di(e),n=ui(e,this.localData);void 0!==n&&(a[t]=n)})),"submit"===s?this.$emit("submit",{detail:{value:a,errors:r}}):this.$emit("validate",r);let l={};return l=((e={},t)=>{let n=JSON.parse(JSON.stringify(e)),s={};for(let i in n){let e=hi(i);pi(s,e,n[i])}return s})(a,this.name),n&&"function"==typeof n&&n(r,l),i&&n?i:null},validateCheck(e){this.$emit("validate",e)},_getValue:ci,_isRequiredField:e=>{let t=!1;for(let n=0;n<e.length;n++){if(e[n].required){t=!0;break}}return t},_setDataValue:(e,t,n)=>(t[e]=n,n||""),_getDataValue:ui,_realName:di,_isRealName:e=>/^_formdata_#*/.test(e),_isEqual:(e,t)=>{if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;var n=toString.call(e);if(n!==toString.call(t))return!1;switch(n){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}if("[object Object]"==n){var s=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);if(s.length!=i.length)return!1;for(var o=0;o<s.length;o++){var r=s[o];if(e[r]!==t[r])return!1}return!0}return"[object Array]"==n?e.toString()==t.toString():void 0}}},[["render",function(t,n,s,i,o,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-forms"},[e.createElementVNode("form",null,[e.renderSlot(t.$slots,"default",{},void 0,!0)])])}],["__scopeId","data-v-bdc00db0"]]),vi=n({__name:"login",setup(t){const n=g();let s=e.ref({loginName:"",password:"",phone:"",vCode:""}),i={loginName:{rules:[{required:!0,errorMessage:"用户名不能为空"},{validateFunction:function(e,t,n,s){!0==t.length<6&&s("用户名长度不得小于六位");return!0}}]},password:{rules:[{required:!0,errorMessage:"密码不能为空"},{validateFunction:function(e,t,n,s){!0==t.length<6&&s("密码长度不得小于六位");return!0}}]},phone:{rules:[{required:!0,errorMessage:"手机号不能为空"},{validateFunction:function(e,t,n,s){!0==!/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/.test(t)&&s("手机号格式不正确");return!0}}]},vCode:{rules:[{required:!0,errorMessage:"验证码不能为空"},{validateFunction:function(e,t,n,s){return!0}}]}},r=e.ref("account"),a=e.ref(),l=e.ref();function c(){r.value="account",s.value.phone="",s.value.vCode=""}function u(){r.value="phone",s.value.loginName="",s.value.password=""}async function d(){let e=await a.value.validate();e.vCode&&e.vCode!=l.value?uni.showToast({title:"验证码错误",icon:"none"}):async function(e){const t=await(s=e,As({name:"user_login",data:s}));var s;t?(n.commit("updateUserInfo",t),uni.showToast({title:"登陆成功",icon:"none"}),setTimeout((()=>{uni.navigateBack()}),1e3)):uni.showToast({title:"账号或者密码错误",icon:"none"})}({type:r.value,...e})}function h(e){l.value=e}return(t,n)=>{const l=o(e.resolveDynamicComponent("uni-forms-item"),ti),p=o(e.resolveDynamicComponent("SendCode"),ni),m=o(e.resolveDynamicComponent("uni-forms"),ki);return e.openBlock(),e.createElementBlock("view",{class:"login-container"},[e.createElementVNode("image",{class:"banner-bg",src:"/static/img/login_bg.png",mode:""}),e.createElementVNode("view",{class:"login-nav"},[e.createElementVNode("view",{class:e.normalizeClass(["nav-item","account"==e.unref(r)?"active":""]),onClick:c}," 账号登录 ",2),e.createElementVNode("view",{class:e.normalizeClass(["nav-item","account"!=e.unref(r)?"active":""]),onClick:u}," 手机登录 ",2)]),e.createVNode(m,{class:"form",ref_key:"form",ref:a,modelValue:e.unref(s),rules:e.unref(i)},{default:e.withCtx((()=>["account"==e.unref(r)?(e.openBlock(),e.createElementBlock("view",{key:0,class:""},[e.createVNode(l,{label:"账号",name:"loginName"},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{type:"text",placeholder:"请输入账号","placeholder-class":"placeholder",class:"form-input","onUpdate:modelValue":n[0]||(n[0]=t=>e.unref(s).loginName=t)},null,512),[[e.vModelText,e.unref(s).loginName]])])),_:1}),e.createVNode(l,{label:"密码",name:"password"},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{type:"password",placeholder:"请输入密码","placeholder-class":"placeholder",class:"form-input","onUpdate:modelValue":n[1]||(n[1]=t=>e.unref(s).password=t)},null,512),[[e.vModelText,e.unref(s).password]])])),_:1})])):(e.openBlock(),e.createElementBlock("view",{key:1,class:""},[e.createVNode(l,{label:"手机号",name:"phone"},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{type:"number",placeholder:"请输入手机号","placeholder-class":"placeholder",class:"form-input","onUpdate:modelValue":n[2]||(n[2]=t=>e.unref(s).phone=t)},null,512),[[e.vModelText,e.unref(s).phone]])])),_:1}),e.createVNode(l,{name:"vCode",label:"验证码"},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{type:"number",maxlength:"6",label:"验证码",placeholder:"请输入验证码","placeholder-class":"placeholder",class:"form-input","onUpdate:modelValue":n[3]||(n[3]=t=>e.unref(s).vCode=t)},null,512),[[e.vModelText,e.unref(s).vCode]])])),_:1})])),"phone"==e.unref(r)?(e.openBlock(),e.createBlock(p,{key:2,form:e.unref(a),sendCodeData:h},null,8,["form"])):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"login-btn",onClick:n[4]||(n[4]=(...e)=>d&&d(...e))},"点击登录")])),_:1},8,["modelValue","rules"]),e.createElementVNode("view",{class:"footer-select"},[e.createElementVNode("text",null,"注册"),e.createElementVNode("text",null,"忘记密码")])])}}},[["__scopeId","data-v-143c5f73"]]),wi={__name:"abelAdmin",setup(t){const n=e.ref(!1),i=g(),{labelList:r,userInfo:a}=i.state,l=e.ref();e.onMounted((async()=>{l.value=await Js()}));const c=e.ref(),u=e.computed((()=>r.filter((e=>!c.value.includes(e._id)&&e._id)))),d=e.computed((()=>r.filter((e=>c.value.includes(e._id)))));function h(){n.value&&async function(){let{message:e}=await(t={labelList:c.value,userId:a._id},As({name:"updateLableItem",data:t}));var t;uni.showToast({title:e});const n=l.value.filter((e=>c.value.includes(e._id)));i.commit("setlabelListItem",n),await(e=>As({name:"setlabelListItem",data:e}))({showTable:n,userId:a._id}),i.commit("updateUserInfo",{...a,labelIds:c.value,labelListItem:n})}(),n.value=!n.value}return e.watch((()=>a),((e,t)=>{c.value=e.labelIds}),{immediate:!0,deep:!0}),(t,i)=>{const r=o(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",{class:"label-container"},[e.createElementVNode("view",{class:"label-box"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"title"}," 我的标签 "),e.createElementVNode("view",{class:"edit",onClick:h},e.toDisplayString(n.value?"完成":"编辑"),1)]),e.createElementVNode("view",{class:"label-content"},[d.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(d.value,((t,s)=>(e.openBlock(),e.createElementBlock("view",{class:"content-title-item",key:t._id},[e.createTextVNode(e.toDisplayString(t.name)+" ",1),n.value?(e.openBlock(),e.createBlock(r,{key:0,onClick:e=>function(e){n.value&&(c.value=c.value.filter((t=>t!==e._id)))}(t),class:"inco-close",type:"clear",size:"20",color:"red"},null,8,["onClick"])):e.createCommentVNode("",!0)])))),128)):e.createCommentVNode("",!0),d.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"noData"}," 当前没有数据 "))])]),e.createElementVNode("view",{class:"label-box"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"title"}," 标签推荐 ")]),e.createElementVNode("view",{class:"label-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,((t,s)=>(e.openBlock(),e.createElementBlock("view",{class:"content-title-item",onClick:e=>function(e){n.value&&c.value.push(e._id)}(t),key:t._id},e.toDisplayString(t.name),9,["onClick"])))),128)),!u.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"noData"}," 当前没有数据 ")):e.createCommentVNode("",!0)])])])}}},_i=n(wi,[["__scopeId","data-v-663f99fd"]]),bi=e=>{(e.$wxs||(e.$wxs=[])).push("handler"),(e.$wxsModules||(e.$wxsModules={})).handler="812594ec"},xi={name:"node",options:{},data:()=>({ctrl:{}}),props:{name:String,attrs:{type:Object,default:()=>({})},childs:Array,opts:Array},components:{},mounted(){if(this.$nextTick((()=>{for(this.root=this.$parent;"uv-parse"!==this.root.$options.name;this.root=this.root.$parent);})),this.opts[0]){let e;for(e=this.childs.length;e--&&"img"!==this.childs[e].name;);-1!==e&&(this.observer=uni.createIntersectionObserver(this).relativeToViewport({top:500,bottom:500}),this.observer.observe("._img",(e=>{e.intersectionRatio&&(this.$set(this.ctrl,"load",1),this.observer.disconnect())})))}},beforeDestroy(){this.observer&&this.observer.disconnect()},methods:{play(e){this.root.$emit("play")},imgTap(e){const t=this.childs[e.currentTarget.dataset.i];t.a?this.linkTap(t.a):t.attrs.ignore||(t.attrs.src=t.attrs.src||t.attrs["data-src"],this.root.$emit("imgtap",t.attrs),this.root.previewImg&&uni.previewImage({current:parseInt(t.attrs.i),urls:this.root.imgList}))},imgLongTap(e){const t=this.childs[e.currentTarget.dataset.i].attrs;this.opts[3]&&!t.ignore&&uni.showActionSheet({itemList:["保存图片"],success:()=>{const e=e=>{uni.saveImageToPhotosAlbum({filePath:e,success(){uni.showToast({title:"保存成功"})}})};this.root.imgList[t.i].startsWith("http")?uni.downloadFile({url:this.root.imgList[t.i],success:t=>e(t.tempFilePath)}):e(this.root.imgList[t.i])}})},imgLoad(e){const t=e.currentTarget.dataset.i;this.childs[t].w?(this.opts[1]&&!this.ctrl[t]||-1===this.ctrl[t])&&this.$set(this.ctrl,t,1):this.$set(this.ctrl,t,e.detail.width),this.checkReady()},checkReady(){this.root&&!this.root.lazyLoad&&(this.root._unloadimgs-=1,this.root._unloadimgs||setTimeout((()=>{this.root.getRect().then((e=>{this.root.$emit("ready",e)})).catch((()=>{this.root.$emit("ready",{})}))}),350))},linkTap(e){const t=e.currentTarget?this.childs[e.currentTarget.dataset.i]:{},n=t.attrs||e,s=n.href;this.root.$emit("linktap",Object.assign({innerText:this.root.getText(t.children||[])},n)),s&&("#"===s[0]?this.root.navigateTo(s.substring(1)).catch((()=>{})):s.split("?")[0].includes("://")?this.root.copyLink&&plus.runtime.openWeb(s):uni.navigateTo({url:s,fail(){uni.switchTab({url:s,fail(){}})}}))},mediaError(e){const t=e.currentTarget.dataset.i,n=this.childs[t];if("video"===n.name||"audio"===n.name){let e=(this.ctrl[t]||0)+1;if(e>n.src.length&&(e=0),e<n.src.length)return void this.$set(this.ctrl,t,e)}else"img"===n.name&&(this.opts[2]&&this.$set(this.ctrl,t,-1),this.checkReady());this.root&&this.root.$emit("error",{source:n.name,attrs:n.attrs,errMsg:e.detail.errMsg})}}};bi(xi);const Si=n(xi,[["render",function(t,n,s,i,o,r){const a=e.resolveComponent("node",!0);return e.openBlock(),e.createElementBlock("view",{id:s.attrs.id,class:e.normalizeClass("_block _"+s.name+" "+s.attrs.class),style:e.normalizeStyle(s.attrs.style)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.childs,((t,i)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:i},["img"===t.name&&!t.t&&(s.opts[1]&&!o.ctrl[i]||o.ctrl[i]<0)?(e.openBlock(),e.createElementBlock("image",{key:0,class:"_img",style:e.normalizeStyle(t.attrs.style),src:o.ctrl[i]<0?s.opts[2]:s.opts[1],mode:"widthFix"},null,12,["src"])):e.createCommentVNode("",!0),"img"===t.name&&t.t?(e.openBlock(),e.createElementBlock("rich-text",{key:1,style:e.normalizeStyle("display:"+t.t),nodes:[{attrs:{style:t.attrs.style,src:t.attrs.src},name:"img"}],"data-i":i,onClick:n[0]||(n[0]=e.withModifiers(((...e)=>r.imgTap&&r.imgTap(...e)),["stop"]))},null,12,["nodes","data-i"])):"img"===t.name?(e.openBlock(),e.createElementBlock("image",{key:2,id:t.attrs.id,class:e.normalizeClass("_img "+t.attrs.class),style:e.normalizeStyle((-1===o.ctrl[i]?"display:none;":"")+"width:"+(o.ctrl[i]||1)+"px;"+t.attrs.style),src:t.attrs.src||(o.ctrl.load?t.attrs["data-src"]:""),mode:t.h?t.w?"":"heightFix":"widthFix","data-i":i,onLoad:n[1]||(n[1]=(...e)=>r.imgLoad&&r.imgLoad(...e)),onError:n[2]||(n[2]=(...e)=>r.mediaError&&r.mediaError(...e)),onClick:n[3]||(n[3]=e.withModifiers(((...e)=>r.imgTap&&r.imgTap(...e)),["stop"])),onLongpress:n[4]||(n[4]=(...e)=>r.imgLongTap&&r.imgLongTap(...e))},null,46,["id","src","mode","data-i"])):t.text?(e.openBlock(),e.createElementBlock("text",{key:3,decode:""},e.toDisplayString(t.text),1)):"br"===t.name?(e.openBlock(),e.createElementBlock("text",{key:4},"\\n")):"a"===t.name?(e.openBlock(),e.createElementBlock("view",{key:5,id:t.attrs.id,class:e.normalizeClass((t.attrs.href?"_a ":"")+t.attrs.class),"hover-class":"_hover",style:e.normalizeStyle("display:inline;"+t.attrs.style),"data-i":i,onClick:n[5]||(n[5]=e.withModifiers(((...e)=>r.linkTap&&r.linkTap(...e)),["stop"]))},[e.createVNode(a,{name:"span",childs:t.children,opts:s.opts,style:{display:"inherit"}},null,8,["childs","opts"])],14,["id","data-i"])):t.html?(e.openBlock(),e.createElementBlock("view",{key:6,id:t.attrs.id,class:e.normalizeClass("_video "+t.attrs.class),style:e.normalizeStyle(t.attrs.style),innerHTML:t.html,onVplay:n[6]||(n[6]=e.withModifiers(((...e)=>r.play&&r.play(...e)),["stop"]))},null,46,["id","innerHTML"])):"iframe"===t.name?(e.openBlock(),e.createElementBlock("iframe",{key:7,style:e.normalizeStyle(t.attrs.style),allowfullscreen:t.attrs.allowfullscreen,frameborder:t.attrs.frameborder,src:t.attrs.src},null,12,["allowfullscreen","frameborder","src"])):"embed"===t.name?(e.openBlock(),e.createElementBlock("embed",{key:8,style:e.normalizeStyle(t.attrs.style),src:t.attrs.src},null,12,["src"])):"table"===t.name&&t.c||"li"===t.name?(e.openBlock(),e.createElementBlock("view",{key:9,id:t.attrs.id,class:e.normalizeClass("_"+t.name+" "+t.attrs.class),style:e.normalizeStyle(t.attrs.style)},["li"===t.name?(e.openBlock(),e.createBlock(a,{key:0,childs:t.children,opts:s.opts},null,8,["childs","opts"])):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(t.children,((t,n)=>(e.openBlock(),e.createElementBlock("view",{key:n,class:e.normalizeClass("_"+t.name+" "+t.attrs.class),style:e.normalizeStyle(t.attrs.style)},["td"===t.name||"th"===t.name?(e.openBlock(),e.createBlock(a,{key:0,childs:t.children,opts:s.opts},null,8,["childs","opts"])):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(t.children,((t,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:n},["td"===t.name||"th"===t.name?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass("_"+t.name+" "+t.attrs.class),style:e.normalizeStyle(t.attrs.style)},[e.createVNode(a,{childs:t.children,opts:s.opts},null,8,["childs","opts"])],6)):(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass("_"+t.name+" "+t.attrs.class),style:e.normalizeStyle(t.attrs.style)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.children,((t,n)=>(e.openBlock(),e.createElementBlock("view",{key:n,class:e.normalizeClass("_"+t.name+" "+t.attrs.class),style:e.normalizeStyle(t.attrs.style)},[e.createVNode(a,{childs:t.children,opts:s.opts},null,8,["childs","opts"])],6)))),128))],6))],64)))),128))],6)))),128))],14,["id"])):t.c?2===t.c?(e.openBlock(),e.createElementBlock("view",{key:11,id:t.attrs.id,class:e.normalizeClass("_block _"+t.name+" "+t.attrs.class),style:e.normalizeStyle(t.f+";"+t.attrs.style)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.children,((t,n)=>(e.openBlock(),e.createBlock(a,{key:n,style:e.normalizeStyle(t.f),name:t.name,attrs:t.attrs,childs:t.children,opts:s.opts},null,8,["style","name","attrs","childs","opts"])))),128))],14,["id"])):(e.openBlock(),e.createBlock(a,{key:12,style:e.normalizeStyle(t.f),name:t.name,attrs:t.attrs,childs:t.children,opts:s.opts},null,8,["style","name","attrs","childs","opts"])):(e.openBlock(),e.createElementBlock("rich-text",{key:10,id:t.attrs.id,style:e.normalizeStyle("display:inline;"+t.f),preview:!1,selectable:s.opts[4],"user-select":s.opts[4],nodes:[t]},null,12,["id","selectable","user-select","nodes"]))],64)))),128))],14,["id"])}],["__scopeId","data-v-9338c69f"]]),Ii={trustTags:Ni("a,abbr,ad,audio,b,blockquote,br,code,col,colgroup,dd,del,dl,dt,div,em,fieldset,h1,h2,h3,h4,h5,h6,hr,i,img,ins,label,legend,li,ol,p,q,ruby,rt,source,span,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,title,ul,video"),blockTags:Ni("address,article,aside,body,caption,center,cite,footer,header,html,nav,pre,section"),inlineTags:Ni("abbr,b,big,code,del,em,i,ins,label,q,small,span,strong,sub,sup"),ignoreTags:Ni("area,base,canvas,embed,frame,head,iframe,input,link,map,meta,param,rp,script,source,style,textarea,title,track,wbr"),voidTags:Ni("area,base,br,col,circle,ellipse,embed,frame,hr,img,input,line,link,meta,param,path,polygon,rect,source,track,use,wbr"),entities:{lt:"<",gt:">",quot:'"',apos:"'",ensp:" ",emsp:" ",nbsp:" ",semi:";",ndash:"–",mdash:"—",middot:"·",lsquo:"‘",rsquo:"’",ldquo:"“",rdquo:"”",bull:"•",hellip:"…",larr:"←",uarr:"↑",rarr:"→",darr:"↓"},tagStyle:{address:"font-style:italic",big:"display:inline;font-size:1.2em",caption:"display:table-caption;text-align:center",center:"text-align:center",cite:"font-style:italic",dd:"margin-left:40px",mark:"background-color:yellow",pre:"font-family:monospace;white-space:pre",s:"text-decoration:line-through",small:"display:inline;font-size:0.8em",strike:"text-decoration:line-through",u:"text-decoration:underline"},svgDict:{animatetransform:"animateTransform",lineargradient:"linearGradient",viewbox:"viewBox",attributename:"attributeName",repeatcount:"repeatCount",repeatdur:"repeatDur"}},Ei={},{windowWidth:Ti}=uni.getSystemInfoSync(),Ai=Ni(" ,\r,\n,\t,\f");let Ci=0;function Ni(e){const t=Object.create(null),n=e.split(",");for(let s=n.length;s--;)t[n[s]]=!0;return t}function Li(e,t){let n=e.indexOf("&");for(;-1!==n;){const s=e.indexOf(";",n+3);let i;if(-1===s)break;"#"===e[n+1]?(i=parseInt(("x"===e[n+2]?"0":"")+e.substring(n+2,s)),isNaN(i)||(e=e.substr(0,n)+String.fromCharCode(i)+e.substr(s+1))):(i=e.substring(n+1,s),(Ii.entities[i]||"amp"===i&&t)&&(e=e.substr(0,n)+(Ii.entities[i]||"&")+e.substr(s+1))),n=e.indexOf("&",n+1)}return e}function Pi(e){let t=e.length-1;for(let n=t;n>=-1;n--)(-1===n||e[n].c||!e[n].name||"div"!==e[n].name&&"p"!==e[n].name&&"h"!==e[n].name[0]||(e[n].attrs.style||"").includes("inline"))&&(t-n>=5&&e.splice(n+1,t-n,{name:"div",attrs:{},children:e.slice(n+1,t+1)}),t=n-1)}function Bi(e){this.options=e||{},this.tagStyle=Object.assign({},Ii.tagStyle,this.options.tagStyle),this.imgList=e.imgList||[],this.imgList._unloadimgs=0,this.plugins=e.plugins||[],this.attrs=Object.create(null),this.stack=[],this.nodes=[],this.pre=(this.options.containerStyle||"").includes("white-space")&&this.options.containerStyle.includes("pre")?2:0}function Oi(e){this.handler=e}Ii.ignoreTags.iframe=void 0,Ii.trustTags.iframe=!0,Ii.ignoreTags.embed=void 0,Ii.trustTags.embed=!0,Bi.prototype.parse=function(e){for(let t=this.plugins.length;t--;)this.plugins[t].onUpdate&&(e=this.plugins[t].onUpdate(e,Ii)||e);for(new Oi(this).parse(e);this.stack.length;)this.popNode();return this.nodes.length>50&&Pi(this.nodes),this.nodes},Bi.prototype.expose=function(){for(let e=this.stack.length;e--;){const t=this.stack[e];if(t.c||"a"===t.name||"video"===t.name||"audio"===t.name)return;t.c=1}},Bi.prototype.hook=function(e){for(let t=this.plugins.length;t--;)if(this.plugins[t].onParse&&!1===this.plugins[t].onParse(e,this))return!1;return!0},Bi.prototype.getUrl=function(e){const t=this.options.domain;return"/"===e[0]?e="/"===e[1]?(t?t.split("://")[0]:"http")+":"+e:t?t+e:plus.io.convertLocalFileSystemURL(e):e.includes("data:")||e.includes("://")||(e=t?t+"/"+e:plus.io.convertLocalFileSystemURL(e)),e},Bi.prototype.parseStyle=function(e){const t=e.attrs,n=(this.tagStyle[e.name]||"").split(";").concat((t.style||"").split(";")),s={};let i="";t.id&&!this.xml&&(this.options.useAnchor?this.expose():"img"!==e.name&&"a"!==e.name&&"video"!==e.name&&"audio"!==e.name&&(t.id=void 0)),t.width&&(s.width=parseFloat(t.width)+(t.width.includes("%")?"%":"px"),t.width=void 0),t.height&&(s.height=parseFloat(t.height)+(t.height.includes("%")?"%":"px"),t.height=void 0);for(let o=0,r=n.length;o<r;o++){const e=n[o].split(":");if(e.length<2)continue;const t=e.shift().trim().toLowerCase();let r=e.join(":").trim();if("-"===r[0]&&r.lastIndexOf("-")>0||r.includes("safe"))i+=`;${t}:${r}`;else if(!s[t]||r.includes("import")||!s[t].includes("import")){if(r.includes("url")){let e=r.indexOf("(")+1;if(e){for(;'"'===r[e]||"'"===r[e]||Ai[r[e]];)e++;r=r.substr(0,e)+this.getUrl(r.substr(e))}}else r.includes("rpx")&&(r=r.replace(/[0-9.]+\s*rpx/g,(e=>parseFloat(e)*Ti/750+"px")));s[t]=r}}return e.attrs.style=i,s},Bi.prototype.onTagName=function(e){this.tagName=this.xml?e:e.toLowerCase(),"svg"===this.tagName&&(this.xml=(this.xml||0)+1,Ii.ignoreTags.style=void 0)},Bi.prototype.onAttrName=function(e){"data-"===(e=this.xml?e:e.toLowerCase()).substr(0,5)?"data-src"!==e||this.attrs.src?"img"===this.tagName||"a"===this.tagName?this.attrName=e:this.attrName=void 0:this.attrName="src":(this.attrName=e,this.attrs[e]="T")},Bi.prototype.onAttrVal=function(e){const t=this.attrName||"";"style"===t||"href"===t?this.attrs[t]=Li(e,!0):t.includes("src")?this.attrs[t]=this.getUrl(Li(e,!0)):t&&(this.attrs[t]=e)},Bi.prototype.onOpenTag=function(e){const t=Object.create(null);t.name=this.tagName,t.attrs=this.attrs,this.options.nodes.length&&(t.type="node"),this.attrs=Object.create(null);const n=t.attrs,s=this.stack[this.stack.length-1],i=s?s.children:this.nodes,o=this.xml?e:Ii.voidTags[t.name];if(Ei[t.name]&&(n.class=Ei[t.name]+(n.class?" "+n.class:"")),"embed"===t.name&&this.expose(),"video"!==t.name&&"audio"!==t.name||("video"!==t.name||n.id||(n.id="v"+Ci++),n.controls||n.autoplay||(n.controls="T"),t.src=[],n.src&&(t.src.push(n.src),n.src=void 0),this.expose()),o){if(!this.hook(t)||Ii.ignoreTags[t.name])return void("base"!==t.name||this.options.domain?"source"===t.name&&s&&("video"===s.name||"audio"===s.name)&&n.src&&s.src.push(n.src):this.options.domain=n.href);const e=this.parseStyle(t);if("img"===t.name){if(n.src&&(n.src.includes("webp")&&(t.webp="T"),n.src.includes("data:")&&!n["original-src"]&&(n.ignore="T"),!n.ignore||t.webp||n.src.includes("cloud://"))){for(let i=this.stack.length;i--;){const s=this.stack[i];"a"===s.name&&(t.a=s.attrs),"table"!==s.name||t.webp||n.src.includes("cloud://")||(!e.display||e.display.includes("inline")?t.t="inline-block":t.t=e.display,e.display=void 0),s.c=1}n.i=this.imgList.length.toString();let s=n["original-src"]||n.src;this.imgList.push(s),t.t||(this.imgList._unloadimgs+=1),this.options.lazyLoad&&(n["data-src"]=n.src,n.src=void 0)}"inline"===e.display&&(e.display=""),n.ignore&&(e["max-width"]=e["max-width"]||"100%",n.style+=";-webkit-touch-callout:none"),parseInt(e.width)>Ti&&(e.height=void 0),isNaN(parseInt(e.width))||(t.w="T"),!isNaN(parseInt(e.height))&&(!e.height.includes("%")||s&&(s.attrs.style||"").includes("height"))&&(t.h="T")}else if("svg"===t.name)return i.push(t),this.stack.push(t),void this.popNode();for(const t in e)e[t]&&(n.style+=`;${t}:${e[t].replace(" !important","")}`);n.style=n.style.substr(1)||void 0}else("pre"===t.name||(n.style||"").includes("white-space")&&n.style.includes("pre"))&&2!==this.pre&&(this.pre=t.pre=1),t.children=[],this.stack.push(t);i.push(t)},Bi.prototype.onCloseTag=function(e){let t;for(e=this.xml?e:e.toLowerCase(),t=this.stack.length;t--&&this.stack[t].name!==e;);if(-1!==t)for(;this.stack.length>t;)this.popNode();else if("p"===e||"br"===e){(this.stack.length?this.stack[this.stack.length-1].children:this.nodes).push({name:e,attrs:{class:Ei[e]||"",style:this.tagStyle[e]||""}})}},Bi.prototype.popNode=function(){const e=this.stack.pop();let t=e.attrs;const n=e.children,s=this.stack[this.stack.length-1],i=s?s.children:this.nodes;if(!this.hook(e)||Ii.ignoreTags[e.name])return"title"===e.name&&n.length&&"text"===n[0].type&&this.options.setTitle&&uni.setNavigationBarTitle({title:n[0].text}),void i.pop();if(e.pre&&2!==this.pre){this.pre=e.pre=void 0;for(let e=this.stack.length;e--;)this.stack[e].pre&&(this.pre=1)}const o={};if("svg"===e.name){if(this.xml>1)return void this.xml--;let n="";const s=t.style;return t.style="",t.xmlns="http://www.w3.org/2000/svg",function e(t){if("text"===t.type)return void(n+=t.text);const s=Ii.svgDict[t.name]||t.name;n+="<"+s;for(const i in t.attrs){const e=t.attrs[i];e&&(n+=` ${Ii.svgDict[i]||i}="${e}"`)}if(t.children){n+=">";for(let n=0;n<t.children.length;n++)e(t.children[n]);n+="</"+s+">"}else n+="/>"}(e),e.name="img",e.attrs={src:"data:image/svg+xml;utf8,"+n.replace(/#/g,"%23"),style:s,ignore:"T"},e.children=void 0,this.xml=!1,void(Ii.ignoreTags.style=!0)}if(t.align&&("table"===e.name?"center"===t.align?o["margin-inline-start"]=o["margin-inline-end"]="auto":o.float=t.align:o["text-align"]=t.align,t.align=void 0),t.dir&&(o.direction=t.dir,t.dir=void 0),"font"===e.name&&(t.color&&(o.color=t.color,t.color=void 0),t.face&&(o["font-family"]=t.face,t.face=void 0),t.size)){let e=parseInt(t.size);isNaN(e)||(e<1?e=1:e>7&&(e=7),o["font-size"]=["x-small","small","medium","large","x-large","xx-large","xxx-large"][e-1]),t.size=void 0}if((t.class||"").includes("align-center")&&(o["text-align"]="center"),Object.assign(o,this.parseStyle(e)),"table"!==e.name&&parseInt(o.width)>Ti&&(o["max-width"]="100%",o["box-sizing"]="border-box"),Ii.blockTags[e.name]?e.name="div":Ii.trustTags[e.name]||this.xml||(e.name="span"),"a"===e.name||"ad"===e.name||"iframe"===e.name)this.expose();else if("video"===e.name){(o.height||"").includes("auto")&&(o.height=void 0);let n='<video style="width:100%;height:100%"';for(const e in t)t[e]&&(n+=" "+e+'="'+t[e]+'"');this.options.pauseVideo&&(n+=" onplay=\"this.dispatchEvent(new CustomEvent('vplay',{bubbles:!0}));for(var e=document.getElementsByTagName('video'),t=0;t<e.length;t++)e[t]!=this&&e[t].pause()\""),n+=">";for(let t=0;t<e.src.length;t++)n+='<source src="'+e.src[t]+'">';n+="</video>",e.html=n}else if("ul"!==e.name&&"ol"!==e.name||!e.c){if("table"===e.name){let s=parseFloat(t.cellpadding),i=parseFloat(t.cellspacing);const r=parseFloat(t.border),a=o["border-color"],l=o["border-style"];if(e.c&&(isNaN(s)&&(s=2),isNaN(i)&&(i=2)),r&&(t.style+=`;border:${r}px ${l||"solid"} ${a||"gray"}`),e.flag&&e.c){o.display="grid",i?(o["grid-gap"]=i+"px",o.padding=i+"px"):r&&(t.style+=";border-left:0;border-top:0");const c=[],u=[],d=[],h={};!function e(t){for(let n=0;n<t.length;n++)"tr"===t[n].name?u.push(t[n]):e(t[n].children||[])}(n);for(let e=1;e<=u.length;e++){let t=1;for(let n=0;n<u[e-1].children.length;n++){const o=u[e-1].children[n];if("td"===o.name||"th"===o.name){for(;h[e+"."+t];)t++;let n=o.attrs.style||"",u=n.indexOf("width")?n.indexOf(";width"):0;if(-1!==u){let e=n.indexOf(";",u+6);-1===e&&(e=n.length),o.attrs.colspan||(c[t]=n.substring(u?u+7:6,e)),n=n.substr(0,u)+n.substr(e)}if(n+=";display:flex",u=n.indexOf("vertical-align"),-1!==u){const e=n.substr(u+15,10);e.includes("middle")?n+=";align-items:center":e.includes("bottom")&&(n+=";align-items:flex-end")}else n+=";align-items:center";if(u=n.indexOf("text-align"),-1!==u){const e=n.substr(u+11,10);e.includes("center")?n+=";justify-content: center":e.includes("right")&&(n+=";justify-content: right")}if(n=(r?`;border:${r}px ${l||"solid"} ${a||"gray"}`+(i?"":";border-right:0;border-bottom:0"):"")+(s?`;padding:${s}px`:"")+";"+n,o.attrs.colspan&&(n+=`;grid-column-start:${t};grid-column-end:${t+parseInt(o.attrs.colspan)}`,o.attrs.rowspan||(n+=`;grid-row-start:${e};grid-row-end:${e+1}`),t+=parseInt(o.attrs.colspan)-1),o.attrs.rowspan){n+=`;grid-row-start:${e};grid-row-end:${e+parseInt(o.attrs.rowspan)}`,o.attrs.colspan||(n+=`;grid-column-start:${t};grid-column-end:${t+1}`);for(let n=1;n<o.attrs.rowspan;n++)for(let s=0;s<(o.attrs.colspan||1);s++)h[e+n+"."+(t-s)]=1}n&&(o.attrs.style=n),d.push(o),t++}}if(1===e){let e="";for(let n=1;n<t;n++)e+=(c[n]?c[n]:"auto")+" ";o["grid-template-columns"]=e}}e.children=d}else e.c&&(o.display="table"),isNaN(i)||(o["border-spacing"]=i+"px"),(r||s)&&function e(t){for(let n=0;n<t.length;n++){const i=t[n];"th"===i.name||"td"===i.name?(r&&(i.attrs.style=`border:${r}px ${l||"solid"} ${a||"gray"};${i.attrs.style||""}`),s&&(i.attrs.style=`padding:${s}px;${i.attrs.style||""}`)):i.children&&e(i.children)}}(n);if(this.options.scrollTable&&!(t.style||"").includes("inline")){const n=Object.assign({},e);e.name="div",e.attrs={style:"overflow:auto"},e.children=[n],t=n.attrs}}else if("td"!==e.name&&"th"!==e.name||!t.colspan&&!t.rowspan)if("ruby"===e.name){e.name="span";for(let e=0;e<n.length-1;e++)"text"===n[e].type&&"rt"===n[e+1].name&&(n[e]={name:"div",attrs:{style:"display:inline-block;text-align:center"},children:[{name:"div",attrs:{style:"font-size:50%;"+(n[e+1].attrs.style||"")},children:n[e+1].children},n[e]]},n.splice(e+1,1))}else e.c&&function e(t){t.c=2;for(let n=t.children.length;n--;){const s=t.children[n];s.name&&(Ii.inlineTags[s.name]||(s.attrs.style||"").includes("inline")&&s.children)&&!s.c&&e(s),s.c&&"table"!==s.name||(t.c=1)}}(e);else for(let a=this.stack.length;a--;)if("table"===this.stack[a].name){this.stack[a].flag=1;break}}else{const e={a:"lower-alpha",A:"upper-alpha",i:"lower-roman",I:"upper-roman"};e[t.type]&&(t.style+=";list-style-type:"+e[t.type],t.type=void 0);for(let t=n.length;t--;)"li"===n[t].name&&(n[t].c=1)}if((o.display||"").includes("flex")&&!e.c)for(let a=n.length;a--;){const e=n[a];e.f&&(e.attrs.style=(e.attrs.style||"")+e.f,e.f=void 0)}const r=s&&((s.attrs.style||"").includes("flex")||(s.attrs.style||"").includes("grid"))&&!e.c;r&&(e.f=";max-width:100%"),n.length>=50&&e.c&&!(o.display||"").includes("flex")&&Pi(n);for(const a in o)if(o[a]){const n=`;${a}:${o[a].replace(" !important","")}`;r&&(a.includes("flex")&&"flex-direction"!==a||"align-self"===a||a.includes("grid")||"-"===o[a][0]||a.includes("width")&&n.includes("%"))?(e.f+=n,"width"===a&&(t.style+=";width:100%")):t.style+=n}t.style=t.style.substr(1)||void 0},Bi.prototype.onText=function(e){if(!this.pre){let t,n="";for(let s=0,i=e.length;s<i;s++)Ai[e[s]]?(" "!==n[n.length-1]&&(n+=" "),"\n"!==e[s]||t||(t=!0)):n+=e[s];if(" "===n){if(t)return;{const e=this.stack[this.stack.length-1];if(e&&"t"===e.name[0])return}}e=n}const t=Object.create(null);if(t.type="text",t.text=Li(e),this.hook(t)){(this.stack.length?this.stack[this.stack.length-1].children:this.nodes).push(t)}},Oi.prototype.parse=function(e){this.content=e||"",this.i=0,this.start=0,this.state=this.text;for(let t=this.content.length;-1!==this.i&&this.i<t;)this.state()},Oi.prototype.checkClose=function(e){const t="/"===this.content[this.i];return!!(">"===this.content[this.i]||t&&">"===this.content[this.i+1])&&(e&&this.handler[e](this.content.substring(this.start,this.i)),this.i+=t?2:1,this.start=this.i,this.handler.onOpenTag(t),"script"===this.handler.tagName?(this.i=this.content.indexOf("</",this.i),-1!==this.i&&(this.i+=2,this.start=this.i),this.state=this.endTag):this.state=this.text,!0)},Oi.prototype.text=function(){if(this.i=this.content.indexOf("<",this.i),-1===this.i)return void(this.start<this.content.length&&this.handler.onText(this.content.substring(this.start,this.content.length)));const e=this.content[this.i+1];if(e>="a"&&e<="z"||e>="A"&&e<="Z")this.start!==this.i&&this.handler.onText(this.content.substring(this.start,this.i)),this.start=++this.i,this.state=this.tagName;else if("/"===e||"!"===e||"?"===e){this.start!==this.i&&this.handler.onText(this.content.substring(this.start,this.i));const t=this.content[this.i+2];if("/"===e&&(t>="a"&&t<="z"||t>="A"&&t<="Z"))return this.i+=2,this.start=this.i,void(this.state=this.endTag);let n="--\x3e";"!"===e&&"-"===this.content[this.i+2]&&"-"===this.content[this.i+3]||(n=">"),this.i=this.content.indexOf(n,this.i),-1!==this.i&&(this.i+=n.length,this.start=this.i)}else this.i++},Oi.prototype.tagName=function(){if(Ai[this.content[this.i]]){for(this.handler.onTagName(this.content.substring(this.start,this.i));Ai[this.content[++this.i]];);this.i<this.content.length&&!this.checkClose()&&(this.start=this.i,this.state=this.attrName)}else this.checkClose("onTagName")||this.i++},Oi.prototype.attrName=function(){let e=this.content[this.i];if(Ai[e]||"="===e){this.handler.onAttrName(this.content.substring(this.start,this.i));let t="="===e;const n=this.content.length;for(;++this.i<n;)if(e=this.content[this.i],!Ai[e]){if(this.checkClose())return;if(t)return this.start=this.i,void(this.state=this.attrVal);if("="!==this.content[this.i])return this.start=this.i,void(this.state=this.attrName);t=!0}}else this.checkClose("onAttrName")||this.i++},Oi.prototype.attrVal=function(){const e=this.content[this.i],t=this.content.length;if('"'===e||"'"===e){if(this.start=++this.i,this.i=this.content.indexOf(e,this.i),-1===this.i)return;this.handler.onAttrVal(this.content.substring(this.start,this.i))}else for(;this.i<t;this.i++){if(Ai[this.content[this.i]]){this.handler.onAttrVal(this.content.substring(this.start,this.i));break}if(this.checkClose("onAttrVal"))return}for(;Ai[this.content[++this.i]];);this.i<t&&!this.checkClose()&&(this.start=this.i,this.state=this.attrName)},Oi.prototype.endTag=function(){const e=this.content[this.i];if(Ai[e]||">"===e||"/"===e){if(this.handler.onCloseTag(this.content.substring(this.start,this.i)),">"!==e&&(this.i=this.content.indexOf(">",this.i),-1===this.i))return;this.start=++this.i,this.state=this.text}else this.i++};const Di=[];const Ri=n({name:"uv-parse",data:()=>({nodes:[]}),props:{containerStyle:{type:String,default:""},content:{type:String,default:""},copyLink:{type:[Boolean,String],default:!0},domain:String,errorImg:{type:String,default:""},lazyLoad:{type:[Boolean,String],default:!1},loadingImg:{type:String,default:""},pauseVideo:{type:[Boolean,String],default:!0},previewImg:{type:[Boolean,String],default:!0},scrollTable:[Boolean,String],selectable:[Boolean,String],setTitle:{type:[Boolean,String],default:!0},showImgMenu:{type:[Boolean,String],default:!0},tagStyle:Object,useAnchor:[Boolean,Number]},emits:["load","ready","imgtap","linktap","play","error"],components:{node:Si},watch:{content(e){this.setContent(e)}},created(){this.plugins=[];for(let e=Di.length;e--;)this.plugins.push(new Di[e](this))},mounted(){this.content&&!this.nodes.length&&this.setContent(this.content)},beforeDestroy(){this._hook("onDetached")},methods:{in(e,t,n){e&&t&&n&&(this._in={page:e,selector:t,scrollTop:n})},navigateTo(e,t){return new Promise(((n,s)=>{if(!this.useAnchor)return void s(Error("Anchor is disabled"));t=t||parseInt(this.useAnchor)||0;const i=uni.createSelectorQuery().in(this._in?this._in.page:this).select((this._in?this._in.selector:"._root")+(e?` #${e}`:"")).boundingClientRect();this._in?i.select(this._in.selector).scrollOffset().select(this._in.selector).boundingClientRect():i.selectViewport().scrollOffset(),i.exec((e=>{if(!e[0])return void s(Error("Label not found"));const i=e[1].scrollTop+e[0].top-(e[2]?e[2].top:0)+t;this._in?this._in.page[this._in.scrollTop]=i:uni.pageScrollTo({scrollTop:i,duration:300}),n()}))}))},getText(e){let t="";return function e(n){for(let s=0;s<n.length;s++){const i=n[s];if("text"===i.type)t+=i.text.replace(/&amp;/g,"&");else if("br"===i.name)t+="\n";else{const n="p"===i.name||"div"===i.name||"tr"===i.name||"li"===i.name||"h"===i.name[0]&&i.name[1]>"0"&&i.name[1]<"7";n&&t&&"\n"!==t[t.length-1]&&(t+="\n"),i.children&&e(i.children),n&&"\n"!==t[t.length-1]?t+="\n":"td"!==i.name&&"th"!==i.name||(t+="\t")}}}(e||this.nodes),t},getRect(){return new Promise(((e,t)=>{uni.createSelectorQuery().in(this).select("#_root").boundingClientRect().exec((n=>n[0]?e(n[0]):t(Error("Root label not found"))))}))},pauseMedia(){for(let t=(this._videos||[]).length;t--;)this._videos[t].pause();let e=this.$parent;for(;!e.$scope;)e=e.$parent;e.$scope.$getAppWebview().evalJS('for(var e=document.getElementsByTagName("video"),i=e.length;i--;)e[i].pause()')},setPlaybackRate(e){this.playbackRate=e;for(let s=(this._videos||[]).length;s--;)this._videos[s].playbackRate(e);const t='for(var e=document.getElementsByTagName("video"),i=e.length;i--;)e[i].playbackRate='+e;let n=this.$parent;for(;!n.$scope;)n=n.$parent;n.$scope.$getAppWebview().evalJS(t)},setContent(e,t){t&&this.imgList||(this.imgList=[]);const n=new Bi(this).parse(e);if(this.$set(this,"nodes",t?(this.nodes||[]).concat(n):n),this._videos=[],this.$nextTick((()=>{this._hook("onLoad"),this.$emit("load")})),this.lazyLoad||this.imgList._unloadimgs<this.imgList.length/2){let e=0;const t=n=>{n&&n.height||(n={}),n.height===e?this.$emit("ready",n):(e=n.height,setTimeout((()=>{this.getRect().then(t).catch(t)}),350))};this.getRect().then(t).catch(t)}else this.imgList._unloadimgs||this.getRect().then((e=>{this.$emit("ready",e)})).catch((()=>{this.$emit("ready",{})}))},_hook(e){for(let t=Di.length;t--;)this.plugins[t][e]&&this.plugins[t][e]()}}},[["render",function(t,n,s,i,o,r){const a=e.resolveComponent("node");return e.openBlock(),e.createElementBlock("view",{id:"_root",class:e.normalizeClass((s.selectable?"_select ":"")+"_root"),style:e.normalizeStyle(s.containerStyle)},[o.nodes[0]?(e.openBlock(),e.createBlock(a,{key:1,childs:o.nodes,opts:[s.lazyLoad,s.loadingImg,s.errorImg,s.showImgMenu,s.selectable],name:"span"},null,8,["childs","opts"])):e.renderSlot(t.$slots,"default",{key:0},void 0,!0)],6)}],["__scopeId","data-v-095dbfcc"]]);class Vi{constructor(e,t){this.options=e,this.animation=uni.createAnimation({...e}),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let n=this.currentStepAnimates[this.next],s={};if(s=n||{styles:{},config:{}},Mi.includes(e)){s.styles.transform||(s.styles.transform="");let n="";"rotate"===e&&(n="deg"),s.styles.transform+=`${e}(${t+n}) `}else s.styles[e]=`${t}`;this.currentStepAnimates[this.next]=s}_animateRun(e={},t={}){let n=this.$.$refs.ani.ref;if(n)return new Promise(((s,i)=>{nvueAnimation.transition(n,{styles:e,...t},(e=>{s()}))}))}_nvueNextAnimate(e,t=0,n){let s=e[t];if(s){let{styles:i,config:o}=s;this._animateRun(i,o).then((()=>{t+=1,this._nvueNextAnimate(e,t,n)}))}else this.currentStepAnimates={},"function"==typeof n&&n(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const Mi=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function Fi(e,t){if(t)return clearTimeout(t.timer),new Vi(e,t)}Mi.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((e=>{Vi.prototype[e]=function(...t){return this.animation[e](...t),this}}));const $i=n({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let n in e){t+=this.toLine(n)+":"+e[n]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=Fi(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let t in e)try{"object"==typeof e[t]?this.animation[t](...e[t]):this.animation[t](e[t])}catch(Ye){i("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:148",`方法 ${t} 不存在`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=Fi(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},n=(e,n)=>{"fade"===n?t.opacity=this.animationType(e)[n]:t.transform+=this.animationType(e)[n]+" "};return"string"==typeof this.modeClass?n(e,this.modeClass):this.modeClass.forEach((t=>{n(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let n=null;"fade"===t?n=e?0:1:(n=e?"-100%":"0","zoom-in"===t&&(n=e?.8:1),"zoom-out"===t&&(n=e?1.2:1),"slide-right"===t&&(n=e?"100%":"0"),"slide-bottom"===t&&(n=e?"100%":"0")),this.animation[this.animationMode()[t]](n)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((n=>{t(e,n)})),this.animation},animationType:e=>({fade:e?0:1,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(t,n,s,i,o,r){return e.withDirectives((e.openBlock(),e.createElementBlock("view",{ref:"ani",animation:o.animationData,class:e.normalizeClass(s.customClass),style:e.normalizeStyle(r.transformStyles),onClick:n[0]||(n[0]=(...e)=>r.onClick&&r.onClick(...e))},[e.renderSlot(t.$slots,"default")],14,["animation"])),[[e.vShow,o.isShow]])}]]),Ui={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},borderRadius:{type:String}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{backgroundColor:"transparent",borderRadius:this.borderRadius||"0",position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}},computed:{getStyles(){let e={backgroundColor:this.bg};return this.borderRadius,e=Object.assign(e,{borderRadius:this.borderRadius}),e},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:n,safeArea:s,screenHeight:i,safeAreaInsets:o}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=t+(n||0),s&&this.safeArea?this.safeAreaInsets=o.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},activated(){this.setH5Visible(!this.showPopup)},deactivated(){this.setH5Visible(!0)},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(e=!0){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){if(this.showPopup)return;e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):i("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:310","缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.showPoptrans(),this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||this.showPoptrans()},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center",borderRadius:this.borderRadius||"0"},e||this.showPoptrans()},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||this.showPoptrans()},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||this.showPoptrans()},showPoptrans(){this.$nextTick((()=>{this.showPopup=!0,this.showTrans=!0}))}}};const ji=n(Ui,[["render",function(t,n,s,i,r,a){const l=o(e.resolveDynamicComponent("uni-transition"),$i);return r.showPopup?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-popup",[r.popupstyle,a.isDesktop?"fixforpc-z-index":""]])},[e.createElementVNode("view",{onTouchstart:n[1]||(n[1]=(...e)=>a.touchstart&&a.touchstart(...e))},[r.maskShow?(e.openBlock(),e.createBlock(l,{key:"1",name:"mask","mode-class":"fade",styles:r.maskClass,duration:r.duration,show:r.showTrans,onClick:a.onTap},null,8,["styles","duration","show","onClick"])):e.createCommentVNode("",!0),e.createVNode(l,{key:"2","mode-class":r.ani,name:"content",styles:r.transClass,duration:r.duration,show:r.showTrans,onClick:a.onTap},{default:e.withCtx((()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-popup__wrapper",[r.popupstyle]]),style:e.normalizeStyle(a.getStyles),onClick:n[0]||(n[0]=(...e)=>a.clear&&a.clear(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)])),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],2)):e.createCommentVNode("",!0)}],["__scopeId","data-v-73d3b141"]]),zi=n({__name:"CommentMasker",props:["isshow"],emits:["closeShow","sendDataComent"],setup(t,{emit:n}){const s=e.ref(),i=t,r=n,a=e.ref();function l(){r("closeShow")}async function c(){""!=a.value&&(r("sendDataComent",a.value),a.value="")}return e.watch((()=>i.isshow),(e=>{e?s.value.open():s.value.close()})),(t,n)=>{const i=o(e.resolveDynamicComponent("uni-popup"),ji);return e.openBlock(),e.createBlock(i,{ref_key:"popup",ref:s,"mask-click":!1,type:"bottom"},{default:e.withCtx((()=>{var t,s;return[e.createElementVNode("view",{class:"poput-wrapper"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"popItem",onClick:l}," 取消 "),e.createElementVNode("view",{class:"popItem",onClick:c}," 发布 ")]),e.createElementVNode("view",{class:"popContent"},[e.withDirectives(e.createElementVNode("textarea",{class:"popup-content-textarea","onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),placeholder:"请输入内容",maxlength:"200"},null,512),[[e.vModelText,a.value,void 0,{trim:!0}]]),e.createElementVNode("view",{class:"popup-content-count"},e.toDisplayString(200-((null==(t=a.value)?void 0:t.length)?null==(s=a.value)?void 0:s.length:0)),1)])])]})),_:1},512)}}},[["__scopeId","data-v-33cbe236"]]);function qi(e,t=2){for(e+="";e.length<t;)e="0"+e;return e.slice(-t)}const Hi={yyyy:e=>qi(e.year,4),yy:e=>qi(e.year),MM:e=>qi(e.month),M:e=>e.month,dd:e=>qi(e.day),d:e=>e.day,hh:e=>qi(e.hour),h:e=>e.hour,mm:e=>qi(e.minute),m:e=>e.minute,ss:e=>qi(e.second),s:e=>e.second,SSS:e=>qi(e.millisecond,3),S:e=>e.millisecond};function Ji(e){return e instanceof Date?e:"string"==typeof e?e.indexOf("T")>-1?new Date(e):new Date(e.replace(/-/g,"/")):new Date(e)}function Wi(e,{locale:t="zh",threshold:n=[6e4,36e5],format:s="yyyy/MM/dd hh:mm:ss"}){if("-"===e)return e;if(!e&&0!==e)return"";const i={zh:{year:"年",month:"月",day:"天",hour:"小时",minute:"分钟",second:"秒",ago:"前",later:"后",justNow:"刚刚",soon:"马上",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},o=i[t]||i.zh;let r,a,l=Ji(e),c=l.getTime()-Date.now(),u=Math.abs(c);if(u<n[0])return c<0?o.justNow:o.soon;if(u>=n[1])return function(e,t="yyyy/MM/dd hh:mm:ss"){if(!e&&0!==e)return"";const n={year:(e=Ji(e)).getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()},s=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/;let i=!0,o=t;for(;i;)i=!1,o=o.replace(s,(function(e){return i=!0,Hi[e](n)}));return o}(l,s);let d=o.later;c<0&&(d=o.ago,c=-c);const h=Math.floor(c/1e3),p=Math.floor(h/60),m=Math.floor(p/60),f=Math.floor(m/24),g=Math.floor(f/30),y=Math.floor(g/12);switch(!0){case y>0:r=y,a=o.year;break;case g>0:r=g,a=o.month;break;case f>0:r=f,a=o.day;break;case m>0:r=m,a=o.hour;break;case p>0:r=p,a=o.minute;break;default:r=h,a=o.second}return"en"===t&&(1===r?r="a":a+="s"),o.template.replace(/{\s*num\s*}/g,r+"").replace(/{\s*unit\s*}/g,a).replace(/{\s*suffix\s*}/g,d)}const Gi=n({name:"uniDateformat",props:{date:{type:[Object,String,Number],default:()=>"-"},locale:{type:String,default:"zh"},threshold:{type:Array,default:()=>[0,0]},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data:()=>({refreshMark:0}),computed:{dateShow(){return this.refreshMark,Wi(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler(){this.setAutoRefresh()},immediate:!0}},methods:{refresh(){this.refreshMark++},setAutoRefresh(){clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval((()=>{this.refresh()}),parseInt(this.refreshRate)))}}},[["render",function(t,n,s,i,o,r){return e.openBlock(),e.createElementBlock("text",null,e.toDisplayString(r.dateShow),1)}]]),Ki=n({__name:"commentBox",props:{commentData:{type:Object,default:()=>({})},isRepaly:{type:Boolean,default:!1}},emits:["repalyComment"],setup(t,{emit:n}){const s=n,r=t;function a(e){i("log","at components/comment-box/commentBox.vue:56",e,"sss"),e.isRepaly&&(e.comment.repaly_id=e.comment.comment_id,e.comment.comment_id=r.commentData.comment_id),s("repalyComment",e)}return(n,s)=>{const i=o(e.resolveDynamicComponent("uni-dateformat"),Gi),l=e.resolveComponent("commentBox",!0);return e.openBlock(),e.createElementBlock("view",{class:"comment-box"},[e.createElementVNode("view",{class:"comment-header"},[e.createElementVNode("view",{class:"comment-header-logo"},[e.createElementVNode("image",{src:r.commentData.author.avatar,mode:"aspectFill"},null,8,["src"])]),e.createElementVNode("view",{class:"comment-header-info"},[r.commentData.isRepaly?(e.openBlock(),e.createElementBlock("view",{key:1,class:"title"},[e.createTextVNode(e.toDisplayString(r.commentData.author.author_name)+" ",1),e.createElementVNode("text",{class:"reply-text"}," 回复 "),e.createTextVNode(" "+e.toDisplayString(r.commentData.to),1)])):(e.openBlock(),e.createElementBlock("view",{key:0,class:"title"},e.toDisplayString(r.commentData.author.author_name),1)),e.createElementVNode("view",{class:""},[e.createVNode(i,{date:r.commentData.createTime,format:"yyyy-MM-dd hh:mm:ss"},null,8,["date"])])])]),e.createElementVNode("view",{class:"comment-content"},[e.createElementVNode("view",{class:""},e.toDisplayString(r.commentData.content),1),e.createElementVNode("view",{class:"comment-info"},[e.createElementVNode("view",{class:"comment-button",onClick:s[0]||(s[0]=e=>a({comment:t.commentData,isRepaly:t.isRepaly}))}," 回复 ")]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.commentData.replay,(t=>(e.openBlock(),e.createElementBlock("view",{class:"repaly-comment",key:t.comment_id},[e.createVNode(l,{isRepaly:!0,commentData:t,onRepalyComment:a},null,8,["commentData"])])))),128))])])}}},[["__scopeId","data-v-1113e173"]]);function Qi(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Zi={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Yi(e){Zi=e}const Xi=/[&<>"']/,eo=new RegExp(Xi.source,"g"),to=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,no=new RegExp(to.source,"g"),so={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},io=e=>so[e];function oo(e,t){if(t){if(Xi.test(e))return e.replace(eo,io)}else if(to.test(e))return e.replace(no,io);return e}const ro=/(^|[^\[])\^/g;function ao(e,t){let n="string"==typeof e?e:e.source;t=t||"";const s={replace:(e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(ro,"$1"),n=n.replace(e,i),s},getRegex:()=>new RegExp(n,t)};return s}function lo(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const co={exec:()=>null};function uo(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let s=!1,i=t;for(;--i>=0&&"\\"===n[i];)s=!s;return s?"|":" |"})).split(/ \|/);let s=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(/\\\|/g,"|");return n}function ho(e,t,n){const s=e.length;if(0===s)return"";let i=0;for(;i<s;){const o=e.charAt(s-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.slice(0,s-i)}function po(e,t,n,s){const i=t.href,o=t.title?oo(t.title):null,r=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){s.state.inLink=!0;const e={type:"link",raw:n,href:i,title:o,text:r,tokens:s.inlineTokens(r)};return s.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:o,text:oo(r)}}class mo{constructor(e){__publicField(this,"options"),__publicField(this,"rules"),__publicField(this,"lexer"),this.options=e||Zi}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:ho(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const s=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=s.length?e.slice(s.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=ho(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:ho(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=ho(t[0],"\n").split("\n"),n="",s="";const i=[];for(;e.length>0;){let t=!1;const o=[];let r;for(r=0;r<e.length;r++)if(/^ {0,3}>/.test(e[r]))o.push(e[r]),t=!0;else{if(t)break;o.push(e[r])}e=e.slice(r);const a=o.join("\n"),l=a.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");n=n?`${n}\n${a}`:a,s=s?`${s}\n${l}`:l;const c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=c,0===e.length)break;const u=i[i.length-1];if("code"===(null==u?void 0:u.type))break;if("blockquote"===(null==u?void 0:u.type)){const t=u,o=t.raw+"\n"+e.join("\n"),r=this.blockquote(o);i[i.length-1]=r,n=n.substring(0,n.length-t.raw.length)+r.raw,s=s.substring(0,s.length-t.text.length)+r.text;break}if("list"!==(null==u?void 0:u.type));else{const t=u,o=t.raw+"\n"+e.join("\n"),r=this.list(o);i[i.length-1]=r,n=n.substring(0,n.length-u.raw.length)+r.raw,s=s.substring(0,s.length-t.raw.length)+r.raw,e=o.substring(i[i.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:i,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,i={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const o=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let r=!1;for(;e;){let n=!1,s="",a="";if(!(t=o.exec(e)))break;if(this.rules.block.hr.test(e))break;s=t[0],e=e.substring(s.length);let l=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],u=!l.trim(),d=0;if(this.options.pedantic?(d=2,a=l.trimStart()):u?d=t[1].length+1:(d=t[2].search(/[^ ]/),d=d>4?1:d,a=l.slice(d),d+=t[1].length),u&&/^[ \t]*$/.test(c)&&(s+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,d-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:\`\`\`|~~~)`),o=new RegExp(`^ {0,${Math.min(3,d-1)}}#`),r=new RegExp(`^ {0,${Math.min(3,d-1)}}<[a-z].*>`,"i");for(;e;){const h=e.split("\n",1)[0];let p;if(c=h,this.options.pedantic?(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),p=c):p=c.replace(/\t/g,"    "),i.test(c))break;if(o.test(c))break;if(r.test(c))break;if(t.test(c))break;if(n.test(c))break;if(p.search(/[^ ]/)>=d||!c.trim())a+="\n"+p.slice(d);else{if(u)break;if(l.replace(/\t/g,"    ").search(/[^ ]/)>=4)break;if(i.test(l))break;if(o.test(l))break;if(n.test(l))break;a+="\n"+c}u||c.trim()||(u=!0),s+=h+"\n",e=e.substring(h.length+1),l=p.slice(d)}}i.loose||(r?i.loose=!0:/\n[ \t]*\n[ \t]*$/.test(s)&&(r=!0));let h,p=null;this.options.gfm&&(p=/^\[[ xX]\] /.exec(a),p&&(h="[ ] "!==p[0],a=a.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:s,task:!!p,checked:h,loose:!1,text:a,tokens:[]}),i.raw+=s}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){const t=i.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));i.loose=n}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!/[:|]/.test(t[2]))return;const n=uo(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const e of s)/^ *-+: *$/.test(e)?o.align.push("right"):/^ *:-+: *$/.test(e)?o.align.push("center"):/^ *:-+ *$/.test(e)?o.align.push("left"):o.align.push(null);for(let e=0;e<n.length;e++)o.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:o.align[e]});for(const e of i)o.rows.push(uo(e,o.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:o.align[t]}))));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:oo(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=ho(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let s=0;s<e.length;s++)if("\\"===e[s])s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],s="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],s=e[3])}else s=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),po(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:s?s.replace(this.rules.inline.anyPunctuation,"$1"):s},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return po(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s)return;if(s[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=[...s[0]].length-1;let i,o,r=n,a=0;const l="*"===s[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(s=l.exec(t));){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(o=[...i].length,s[3]||s[4]){r+=o;continue}if((s[5]||s[6])&&n%3&&!((n+o)%3)){a+=o;continue}if(r-=o,r>0)continue;o=Math.min(o,o+r+a);const t=[...s[0]][0].length,l=e.slice(0,n+s.index+t+o);if(Math.min(n,o)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),s=/^ /.test(e)&&/ $/.test(e);return n&&s&&(e=e.substring(1,e.length-1)),e=oo(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=oo(t[1]),n="mailto:"+e):(e=oo(t[1]),n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){var t;let n;if(n=this.rules.inline.url.exec(e)){let e,s;if("@"===n[2])e=oo(n[0]),s="mailto:"+e;else{let i;do{i=n[0],n[0]=(null==(t=this.rules.inline._backpedal.exec(n[0]))?void 0:t[0])??""}while(i!==n[0]);e=oo(n[0]),s="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:e,href:s,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:oo(t[0]),{type:"text",raw:t[0],text:e}}}}const fo=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,go=/(?:[*+-]|\d{1,9}[.)])/,yo=ao(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,go).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),ko=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,vo=/(?!\s*\])(?:\\.|[^\[\]\\])+/,wo=ao(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",vo).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),_o=ao(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,go).getRegex(),bo="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",xo=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,So=ao("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",xo).replace("tag",bo).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Io=ao(ko).replace("hr",fo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bo).getRegex(),Eo={blockquote:ao(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Io).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:wo,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:fo,html:So,lheading:yo,list:_o,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:Io,table:co,text:/^[^\n]+/},To=ao("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",fo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bo).getRegex(),Ao={...Eo,table:To,paragraph:ao(ko).replace("hr",fo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",To).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bo).getRegex()},Co={...Eo,html:ao("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",xo).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:co,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ao(ko).replace("hr",fo).replace("heading"," *#{1,6} *[^\n]").replace("lheading",yo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},No=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Lo=/^( {2,}|\\)\n(?!\s*$)/,Po="\\p{P}\\p{S}",Bo=ao(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Po).getRegex(),Oo=ao(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Po).getRegex(),Do=ao("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Po).getRegex(),Ro=ao("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Po).getRegex(),Vo=ao(/\\([punct])/,"gu").replace(/punct/g,Po).getRegex(),Mo=ao(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Fo=ao(xo).replace("(?:--\x3e|$)","--\x3e").getRegex(),$o=ao("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Fo).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Uo=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,jo=ao(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Uo).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),zo=ao(/^!?\[(label)\]\[(ref)\]/).replace("label",Uo).replace("ref",vo).getRegex(),qo=ao(/^!?\[(ref)\](?:\[\])?/).replace("ref",vo).getRegex(),Ho={_backpedal:co,anyPunctuation:Vo,autolink:Mo,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:Lo,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:co,emStrongLDelim:Oo,emStrongRDelimAst:Do,emStrongRDelimUnd:Ro,escape:No,link:jo,nolink:qo,punctuation:Bo,reflink:zo,reflinkSearch:ao("reflink|nolink(?!\\()","g").replace("reflink",zo).replace("nolink",qo).getRegex(),tag:$o,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:co},Jo={...Ho,link:ao(/^!?\[(label)\]\((.*?)\)/).replace("label",Uo).getRegex(),reflink:ao(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Uo).getRegex()},Wo={...Ho,escape:ao(No).replace("])","~|])").getRegex(),url:ao(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Go={...Wo,br:ao(Lo).replace("{2,}","*").getRegex(),text:ao(Wo.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ko={normal:Eo,gfm:Ao,pedantic:Co},Qo={normal:Ho,gfm:Wo,breaks:Go,pedantic:Jo};class Zo{constructor(e){__publicField(this,"tokens"),__publicField(this,"options"),__publicField(this,"state"),__publicField(this,"tokenizer"),__publicField(this,"inlineQueue"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Zi,this.options.tokenizer=this.options.tokenizer||new mo,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Ko.normal,inline:Qo.normal};this.options.pedantic?(t.block=Ko.pedantic,t.inline=Qo.pedantic):this.options.gfm&&(t.block=Ko.gfm,this.options.breaks?t.inline=Qo.breaks:t.inline=Qo.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ko,inline:Qo}}static lex(e,t){return new Zo(t).lex(e)}static lexInline(e,t){return new Zo(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){let s,i,o;for(this.options.pedantic&&(e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(s=n.call({lexer:this},e,t))&&(e=e.substring(s.raw.length),t.push(s),!0)))))if(s=this.tokenizer.space(e))e=e.substring(s.raw.length),1===s.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(s);else if(s=this.tokenizer.code(e))e=e.substring(s.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?t.push(s):(i.raw+="\n"+s.raw,i.text+="\n"+s.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(s=this.tokenizer.fences(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.heading(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.hr(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.blockquote(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.list(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.html(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.def(e))e=e.substring(s.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title}):(i.raw+="\n"+s.raw,i.text+="\n"+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(s=this.tokenizer.table(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.lheading(e))e=e.substring(s.raw.length),t.push(s);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let s;this.options.extensions.startBlock.forEach((e=>{s=e.call({lexer:this},n),"number"==typeof s&&s>=0&&(t=Math.min(t,s))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o)))i=t[t.length-1],n&&"paragraph"===(null==i?void 0:i.type)?(i.raw+="\n"+s.raw,i.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(s),n=o.length!==e.length,e=e.substring(s.raw.length);else if(s=this.tokenizer.text(e))e=e.substring(s.raw.length),i=t[t.length-1],i&&"text"===i.type?(i.raw+="\n"+s.raw,i.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(s);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,s,i,o,r,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(r||(a=""),r=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((s=>!!(n=s.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&"text"===n.type&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),s=t[t.length-1],s&&"text"===n.type&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,a))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let s;this.options.extensions.startInline.forEach((e=>{s=e.call({lexer:this},n),"number"==typeof s&&s>=0&&(t=Math.min(t,s))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),r=!0,s=t[t.length-1],s&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class Yo{constructor(e){__publicField(this,"options"),__publicField(this,"parser"),this.options=e||Zi}space(e){return""}code({text:e,lang:t,escaped:n}){var s;const i=null==(s=(t||"").match(/^\S*/))?void 0:s[0],o=e.replace(/\n$/,"")+"\n";return i?'<pre><code class="language-'+oo(i)+'">'+(n?o:oo(o,!0))+"</code></pre>\n":"<pre><code>"+(n?o:oo(o,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,n=e.start;let s="";for(let o=0;o<e.items.length;o++){const t=e.items[o];s+=this.listitem(t)}const i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+s+"</"+i+">\n"}listitem(e){let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&"paragraph"===e.tokens[0].type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let s="";for(let i=0;i<e.rows.length;i++){const t=e.rows[i];n="";for(let e=0;e<t.length;e++)n+=this.tablecell(t[e]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+s+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const s=this.parser.parseInline(n),i=lo(e);if(null===i)return s;let o='<a href="'+(e=i)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+s+"</a>",o}image({href:e,title:t,text:n}){const s=lo(e);if(null===s)return n;let i=`<img src="${e=s}" alt="${n}"`;return t&&(i+=` title="${t}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class Xo{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class er{constructor(e){__publicField(this,"options"),__publicField(this,"renderer"),__publicField(this,"textRenderer"),this.options=e||Zi,this.options.renderer=this.options.renderer||new Yo,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Xo}static parse(e,t){return new er(t).parse(e)}static parseInline(e,t){return new er(t).parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const i=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}const o=i;switch(o.type){case"space":n+=this.renderer.space(o);continue;case"hr":n+=this.renderer.hr(o);continue;case"heading":n+=this.renderer.heading(o);continue;case"code":n+=this.renderer.code(o);continue;case"table":n+=this.renderer.table(o);continue;case"blockquote":n+=this.renderer.blockquote(o);continue;case"list":n+=this.renderer.list(o);continue;case"html":n+=this.renderer.html(o);continue;case"paragraph":n+=this.renderer.paragraph(o);continue;case"text":{let i=o,r=this.renderer.text(i);for(;s+1<e.length&&"text"===e[s+1].type;)i=e[++s],r+="\n"+this.renderer.text(i);n+=t?this.renderer.paragraph({type:"paragraph",raw:r,text:r,tokens:[{type:"text",raw:r,text:r}]}):r;continue}default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let s=0;s<e.length;s++){const i=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=e||"";continue}}const o=i;switch(o.type){case"escape":case"text":n+=t.text(o);break;case"html":n+=t.html(o);break;case"link":n+=t.link(o);break;case"image":n+=t.image(o);break;case"strong":n+=t.strong(o);break;case"em":n+=t.em(o);break;case"codespan":n+=t.codespan(o);break;case"br":n+=t.br(o);break;case"del":n+=t.del(o);break;default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class tr{constructor(e){__publicField(this,"options"),__publicField(this,"block"),this.options=e||Zi}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Zo.lex:Zo.lexInline}provideParser(){return this.block?er.parse:er.parseInline}}__publicField(tr,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));const nr=new class{constructor(...e){__publicField(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),__publicField(this,"options",this.setOptions),__publicField(this,"parse",this.parseMarkdown(!0)),__publicField(this,"parseInline",this.parseMarkdown(!1)),__publicField(this,"Parser",er),__publicField(this,"Renderer",Yo),__publicField(this,"TextRenderer",Xo),__publicField(this,"Lexer",Zo),__publicField(this,"Tokenizer",mo),__publicField(this,"Hooks",tr),this.use(...e)}walkTokens(e,t){var n,s;let i=[];for(const o of e)switch(i=i.concat(t.call(this,o)),o.type){case"table":{const e=o;for(const n of e.header)i=i.concat(this.walkTokens(n.tokens,t));for(const n of e.rows)for(const e of n)i=i.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=o;i=i.concat(this.walkTokens(e.items,t));break}default:{const e=o;(null==(s=null==(n=this.defaults.extensions)?void 0:n.childTokens)?void 0:s[e.type])?this.defaults.extensions.childTokens[e.type].forEach((n=>{const s=e[n].flat(1/0);i=i.concat(this.walkTokens(s,t))})):e.tokens&&(i=i.concat(this.walkTokens(e.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let s=e.renderer.apply(this,t);return!1===s&&(s=n.apply(this,t)),s}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new Yo(this.defaults);for(const n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const s=n,i=e.renderer[s],o=t[s];t[s]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new mo(this.defaults);for(const n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const s=n,i=e.tokenizer[s],o=t[s];t[s]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new tr;for(const n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;const s=n,i=e.hooks[s],o=t[s];tr.passThroughHooks.has(n)?t[s]=e=>{if(this.defaults.async)return Promise.resolve(i.call(t,e)).then((e=>o.call(t,e)));const n=i.call(t,e);return o.call(t,n)}:t[s]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,s=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(s.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Zo.lex(e,t??this.defaults)}parser(e,t){return er.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{const s={...n},i={...this.defaults,...s},o=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===s.async)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==t)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);const r=i.hooks?i.hooks.provideLexer():e?Zo.lex:Zo.lexInline,a=i.hooks?i.hooks.provideParser():e?er.parse:er.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then((e=>r(e,i))).then((e=>i.hooks?i.hooks.processAllTokens(e):e)).then((e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then((()=>e)):e)).then((e=>a(e,i))).then((e=>i.hooks?i.hooks.postprocess(e):e)).catch(o);try{i.hooks&&(t=i.hooks.preprocess(t));let e=r(t,i);i.hooks&&(e=i.hooks.processAllTokens(e)),i.walkTokens&&this.walkTokens(e,i.walkTokens);let n=a(e,i);return i.hooks&&(n=i.hooks.postprocess(n)),n}catch(Ye){return o(Ye)}}}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+oo(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function sr(e,t){return nr.parse(e,t)}sr.options=sr.setOptions=function(e){return nr.setOptions(e),sr.defaults=nr.defaults,Yi(sr.defaults),sr},sr.getDefaults=Qi,sr.defaults=Zi,sr.use=function(...e){return nr.use(...e),sr.defaults=nr.defaults,Yi(sr.defaults),sr},sr.walkTokens=function(e,t){return nr.walkTokens(e,t)},sr.parseInline=nr.parseInline,sr.Parser=er,sr.parser=er.parse,sr.Renderer=Yo,sr.TextRenderer=Xo,sr.Lexer=Zo,sr.lexer=Zo.lex,sr.Tokenizer=mo,sr.Hooks=tr,sr.parse=sr,sr.options,sr.setOptions,sr.use,sr.walkTokens,sr.parseInline,er.parse,Zo.lex;const ir=e=>As({name:"updateComent",data:e});const or=e=>As({name:"getCommentData",data:e}),rr={__name:"articleDetail",setup(t){const n=g(),{checkLogin:i}=j(),r=e.ref(),l=e.ref(!1),c=e.ref({}),u=e.ref();async function d(){return await or({articleId:r.value._id})}async function h(){await i(),l.value=!l.value}function p(){l.value=!l.value}async function m(e){await ir({userId:n.state.userInfo._id,articleId:r.value._id,content:e,...u.value}),uni.showToast({title:"发布成功"}),p(),u.value={},c.value=await d()}a((async e=>{const t=JSON.parse(JSON.stringify(e.options));let n=await function(e){return As({name:"get_article_Detatil",data:e})}({articleId:t._id});r.value=n,r.value.browse_count++,c.value=await d()}));const f=e.computed((()=>{var e,t;return(null==(e=null==r?void 0:r.value)?void 0:e.content)?sr(null==(t=null==r?void 0:r.value)?void 0:t.content):null}));function y(e){p(),u.value={comment_id:e.comment.comment_id,isRepaly:e.isRepaly},e.comment.repaly_id&&(u.value.repaly_id=e.comment.repaly_id)}const k=e.computed((()=>{var e;return n.state.userInfo.author_likes_ids.includes(null==(e=r.value)?void 0:e.author.id)}));async function v(){var e,t,s;await i();const o=await(a={authorId:null==(e=r.value)?void 0:e.author.id,userId:n.state.userInfo._id},As({name:"updateFollow",data:a}));var a;uni.showToast({title:o.msg});let l=[...n.state.userInfo.author_likes_ids];l.includes(null==(t=r.value)?void 0:t.author.id)?l=l.filter((e=>{var t;return e!=(null==(t=r.value)?void 0:t.author.id)})):l.push(null==(s=r.value)?void 0:s.author.id),uni.$emit("updatefellow"),n.commit("updateUserInfo",{...n.state.userInfo,author_likes_ids:l})}const w=e.computed((()=>{var e;return n.state.userInfo.thumbs_up_article_ids.includes(null==(e=r.value)?void 0:e._id)}));async function _(){var e;await i(),await(e={articId:r.value._id,userId:n.state.userInfo._id},As({name:"updateGoodOk",data:e}));let t=[...n.state.userInfo.thumbs_up_article_ids];t.includes(r.value._id)?(t=t.filter((e=>e!==r.value._id)),r.value.thumbs_up_count--):(t.push(r.value._id),r.value.thumbs_up_count++),n.commit("updateUserInfo",{...n.state.userInfo,thumbs_up_article_ids:t})}function b(){uni.navigateTo({url:`/pages/commentList/commentList?id=${r.value._id}`})}return(t,n)=>{var i,a,u,d,g,x,S;const I=o(e.resolveDynamicComponent("uv-parse"),Ri),E=o(e.resolveDynamicComponent("uni-icons"),s),T=o(e.resolveDynamicComponent("CommentMasker"),zi);return e.openBlock(),e.createElementBlock("view",{class:"article-detail-container"},[e.createElementVNode("view",{class:"detail-title"},e.toDisplayString(null==(i=r.value)?void 0:i.title),1),e.createElementVNode("view",{class:"detail-header"},[e.createElementVNode("view",{class:"detail-logo"},[e.createElementVNode("image",{src:null==(a=r.value)?void 0:a.author.avatar,mode:"aspectFill"},null,8,["src"])]),e.createElementVNode("view",{class:"detail-header-content"},[e.createElementVNode("view",{class:"detail-header-content-title"},e.toDisplayString(null==(u=r.value)?void 0:u.author.author_name),1),e.createElementVNode("view",{class:"detail-header-content-info"},[e.createElementVNode("text",null,"发布时间："+e.toDisplayString(null==(d=r.value)?void 0:d.create_time),1),e.createElementVNode("br"),e.createElementVNode("text",null,"浏览量："+e.toDisplayString(null==(g=r.value)?void 0:g.browse_count),1),e.createElementVNode("text",null,"赞："+e.toDisplayString(null==(x=r.value)?void 0:x.thumbs_up_count),1)])]),e.createElementVNode("button",{type:"default",class:"detail-header-button",onClick:v},e.toDisplayString(k.value?"取消关注":"关注"),1)]),e.createElementVNode("view",{class:"detail-content-container"},[e.createElementVNode("view",{class:"detail-html"},[e.createVNode(I,{content:f.value,selectable:!0,lazyLoad:"true"},null,8,["content"])]),e.createElementVNode("view",{class:"detail-comment"}," 最新评论 "),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,(t=>(e.openBlock(),e.createElementBlock("view",{class:"comment-content-cointainer",key:t._id},[e.createVNode(Ki,{commentData:t,onRepalyComment:y},null,8,["commentData"])])))),128)),c.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"no-data"}," 暂无评论 ")):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"detail-bottom"},[e.createElementVNode("view",{class:"input-container",onClick:h},[e.createElementVNode("text",null,"谈谈你的看法...."),e.createVNode(E,{type:"compose",size:"16",color:"#f07373"})]),e.createElementVNode("view",{class:"detail-bottom-icons"},[e.createElementVNode("view",{class:"detail-bottom-icon-box",onClick:b},[e.createVNode(E,{type:"chat",size:"22",color:"#f07373"})]),e.createVNode(Cs,{itemId:null==(S=r.value)?void 0:S._id},null,8,["itemId"]),e.createElementVNode("view",{class:"detail-bottom-icon-box",onClick:_},[e.createVNode(E,{type:w.value?"hand-up-filled":"hand-up",size:"22",color:"#f07373"},null,8,["type"])])])]),e.createVNode(T,{isshow:l.value,onCloseShow:p,onSendDataComent:m},null,8,["isshow"])])}}},ar=n({__name:"commentList",setup(t){const n=e.ref(),s=e.ref([]),i=e.ref(5),r=e.ref(1),c=e.ref("loading"),u=e.ref(!1),d=g(),h=e.ref({});async function p(){let e=await or({articleId:n.value,pageSize:i.value,page:r.value});if(0==e.length)return void(c.value="noMore");let t=JSON.parse(JSON.stringify(s.value));t.push(...e),s.value=t}function m(e){f(),h.value={comment_id:e.comment.comment_id,isRepaly:e.isRepaly},e.comment.repaly_id&&(h.value.repaly_id=e.comment.repaly_id)}function f(){u.value=!u.value}async function y(e){await ir({userId:d.state.userInfo._id,articleId:n.value,content:e,...h.value}),uni.showToast({title:"发布成功"}),f(),h.value={},r.value=1,s.value=[],c.value="loading",await p()}return a((async e=>{n.value=e.id,await p()})),l((()=>{"noMore"!==c.value&&(r.value++,p())})),(t,n)=>{const i=o(e.resolveDynamicComponent("uni-load-more"),Hs),r=o(e.resolveDynamicComponent("CommentMasker"),zi);return e.openBlock(),e.createElementBlock("view",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(t=>(e.openBlock(),e.createElementBlock("view",{class:"comment-content-cointainer",key:t._id},[e.createVNode(Ki,{commentData:t,onRepalyComment:m},null,8,["commentData"])])))),128)),0===s.value.length||s.value.length>5?(e.openBlock(),e.createBlock(i,{key:0,contentText:{contentdown:"上拉加载更多",contentrefresh:"正在加载....",contentnomore:"暂无更多评论"},status:c.value},null,8,["contentText","status"])):e.createCommentVNode("",!0),e.createVNode(r,{isshow:u.value,onCloseShow:f,onSendDataComent:y},null,8,["isshow"])])}}},[["__scopeId","data-v-0d09510f"]]),lr=n({__name:"myArticle",setup(t){const{checkLogin:n}=j(),s=g(),i=e.ref({}),o=e.ref(!1);return a((async()=>{await n(),await async function(){const e=await(t={userId:s.state.userInfo._id},As({name:"getArticleMyList",data:t}));var t;i.value=e,e.length>0&&(o.value=!0)}()})),(t,n)=>(e.openBlock(),e.createElementBlock("view",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(t=>(e.openBlock(),e.createBlock(Ns,{list:t,key:t._id},null,8,["list"])))),128)),o.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"no-data"},"暂无发布的文章")):e.createCommentVNode("",!0)]))}},[["__scopeId","data-v-cc11aba6"]]),cr={__name:"feedback",setup(t){const n=g(),r=e.ref(),l=e.ref([]),{checkLogin:c}=j();async function u(){const e=5-l.value.length;uni.chooseImage({count:e,success(t){t.tempFilePaths.forEach(((n,s)=>{s<e&&l.value.push({url:n,name:t.tempFiles[s].name})}))}})}async function d(){if(!r.value)return void uni.showToast({title:"请输入反馈信息",icon:"error"});uni.showLoading();const e=await Promise.all((i("log","at pages/feedback/feedback.vue:108","imageList.value",l.value),l.value.map((e=>new Promise((async t=>{t((await Ts.uploadFile({filePath:e.url,cloudPath:e.name})).fileID)}))))));var t;uni.hideLoading(),await(t={content:r.value,userId:n.state.userInfo._id,feedBackImageList:e},As({name:"update_feedBack",data:t})),uni.showToast({title:"反馈成功"}),setTimeout((()=>{uni.switchTab({url:"/pages/self/self"})}),1e3)}return a((async()=>{await c()})),(t,n)=>{const i=o(e.resolveDynamicComponent("uni-icons"),s);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"feedback-title"}," 意见反馈： "),e.createElementVNode("view",{class:"feedback-content"},[e.withDirectives(e.createElementVNode("textarea",{class:"feedback-textarea","onUpdate:modelValue":n[0]||(n[0]=e=>r.value=e),placeholder:"请输入您要反馈的问题"},null,512),[[e.vModelText,r.value]])]),e.createElementVNode("view",{class:"feedback-title"}," 反馈图片： "),e.createElementVNode("view",{class:"feedback-image-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"feedback-image-item",key:n},[e.createElementVNode("view",{class:"close-icon",onClick:e=>function(e){l.value=l.value.filter((t=>t.url!==e.url))}(t)},[e.createVNode(i,{type:"closeempty",size:"18",color:"#fff"})],8,["onClick"]),e.createElementVNode("view",{class:"image-box"},[e.createElementVNode("image",{src:t.url,mode:"aspectFill"},null,8,["src"])])])))),128)),l.value.length<5?(e.openBlock(),e.createElementBlock("view",{key:0,class:"feedback-image-item",onClick:u},[e.createElementVNode("view",{class:"image-box"},[e.createVNode(i,{type:"plusempty",size:"50",color:"#eee"})])])):e.createCommentVNode("",!0)]),e.createElementVNode("button",{type:"warn",class:"feedback-button",onClick:d},"提交反馈意见")])}}},ur=n(cr,[["__scopeId","data-v-00fb0ec6"]]);__definePage("pages/index/index",Qs),__definePage("pages/follow/follow",Ys),__definePage("pages/self/self",Xs),__definePage("pages/serch/serch",ei),__definePage("pages/userinfo/login/login",vi),__definePage("pages/abelAdmin/abelAdmin",_i),__definePage("pages/articleDetail/articleDetail",rr),__definePage("pages/commentList/commentList",ar),__definePage("pages/myArticle/myArticle",lr),__definePage("pages/feedback/feedback",ur);const dr={onLaunch:function(){i("log","at App.vue:4","App Launch")},onShow:function(){i("log","at App.vue:7","App Show")},onHide:function(){i("log","at App.vue:10","App Hide")}},hr={updateUserInfo(e,t){e.userInfo=t,uni.setStorage({key:"userInfo",data:t})},setHistoryList(e,t){let n=e.historyList;n.length>0&&-1!=n.findIndex((e=>e==t))||(n.unshift(t),uni.setStorageSync("historyList",n),e.historyList=n)},clearData(e){uni.showToast({title:"清空成功",icon:"none"}),e.historyList=[],uni.setStorageSync("historyList",[])},setlabelList(e,t){uni.setStorageSync("labelList",t),e.labelList=t},setlabelListItem(e,t){uni.setStorageSync("labelListItem",t),e.labelListItem=t}},pr={add(){}},mr={userInfo:uni.getStorageSync("userInfo")||null,historyList:uni.getStorageSync("historyList")||[],labelList:uni.getStorageSync("labelList")||[],labelListItem:uni.getStorageSync("labelListItem")||[]},fr=new $({state:mr,mutations:hr,actions:pr});const{app:gr,Vuex:yr,Pinia:kr}=function(){const t=e.createVueApp(dr);return t.use(fr),{app:t}}();uni.Vuex=yr,uni.Pinia=kr,gr.provide("__globalStyles",__uniConfig.styles),gr._component.mpType="app",gr._component.render=()=>{},gr.mount("#app")}(Vue);
